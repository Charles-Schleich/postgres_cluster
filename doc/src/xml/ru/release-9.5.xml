<!-- doc/src/xml/release-9.5.xml -->
<!-- See header comment in release.xml about typical markup -->

 <sect1 id="release-9-5-9">
  <title>Выпуск 9.5.9</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-08-31</para>
  </formalpara>

  <para>В этот выпуск вошло несколько исправлений, внесённых после версии 9.5.8. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.9</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы обновляете сервер с версии, более ранней, чем 9.5.8, см. <xref remap="4" linkend="release-9-5-8"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
     <para>Отображение сторонних таблиц в представлении <structname>information_schema</structname>.<structname>table_privileges</structname> (Питер Эйзентраут)</para>

     <para>Раньше сторонние таблицы отображались в остальных связанных представлениях <structname>information_schema</structname>, но отсутствовали в этом.</para>

     <para>Так как определение этого представления устанавливается программой <application>initdb</application>, для решения проблемы будет недостаточно обычного обновления. Если вы хотите исправить существующую инсталляцию, вы можете от имени суперпользователя выполнить в <application>psql</application>: <programlisting>BEGIN;
DROP SCHEMA information_schema CASCADE;
\i <replaceable>SHAREDIR</replaceable>/information_schema.sql
COMMIT;</programlisting> (Запустите <literal>pg_config --sharedir</literal>, если вы не знаете, что задать в качестве <replaceable>SHAREDIR</replaceable>.) Это потребуется повторить для каждой базы данных, требующей исправления.</para>
    </listitem>

    <listitem>
     <para>Исправление обработки аварийного выхода (например, при получении <systemitem>SIGTERM</systemitem>) при попытке выполнить <command>ROLLBACK</command> для прерванной транзакции (Том Лейн)</para>

     <para>В таких ситуациях мог происходить сбой проверочного утверждения. В выпускаемых сборках выход всё равно производился, но в журнал выводилось неуместное сообщение <quote>cannot drop active portal</quote> (удалить активный портал нельзя).</para>
    </listitem>

    <listitem>
     <para>Удаление проверочного утверждения, которое могло нарушаться при аварийном выходе (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Правильное обнаружение столбцов, имеющих тип диапазона или домена, который определён поверх искомого составного или доменного типа (Том Лейн)</para>

     <para>Определённые команды <command>ALTER</command>, меняющие определение составного или доменного типа, должны проверять, нет ли в базе данных значений этого типа, и прерываться, если они есть, так как для изменения или обновления таких значений нет необходимой инфраструктуры. Ранее эти проверки могли пропустить значения, обёрнутые в типы диапазонов или вложенные домены, что могло нарушить целостность в базе данных.</para>
    </listitem>

    <listitem>
     <para>Устранение сбоя в <application>pg_restore</application> при работе в параллельном режиме и использовании файла-списка объектов, подлежащих восстановлению (Фабрицио де Ройес Мелло)</para>
    </listitem>

    <listitem>
     <para>Исправление лексического анализатора <application>ecpg</application>, чтобы он принимал предложения <literal>RETURNING</literal> без связанных переменных C (Михаэль Мескес)</para>

     <para>Благодаря этому программы <application>ecpg</application> могут содержать SQL-конструкции, использующие <literal>RETURNING</literal> внутри (например, внутри CTE), не определяя значения, которые будут возвращены клиенту.</para>
    </listitem>

    <listitem>
     <para>Улучшение выбора флагов компилятора для PL/Perl в Windows (Том Лейн)</para>

     <para>В результате этого исправления предотвращаются сбои PL/Perl, возможные из-за некорректных предположений о ширине значений <type>time_t</type>. Побочным эффектом, который могут заметить разработчики расширений, стала ликвидация глобального определения <literal>_USE_32BIT_TIME_T</literal> в сборках <productname>PostgreSQL</productname> для Windows. Это не должно приводить к проблемам, так как тип <type>time_t</type> не используется ни в каких определениях API <productname>PostgreSQL</productname>.</para>
    </listitem>

    <listitem>
     <para>Исправление поведения <literal>make check</literal> при использовании альтернативной (не GNU) программы make (Томас Мунро)</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-8">
  <title>Выпуск 9.5.8</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-08-10</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.7. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.8</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы используете сторонние серверы данных, на которых для проверки подлинности применяются пароли, прочитайте ниже первую запись в списке изменений.</para>

   <para>Также, если вы обновляете сервер с версии более ранней, чем 9.5.7, см. <xref remap="4" linkend="release-9-5-7"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
     <para>Дальнейшее ограничение видимости <structname>pg_user_mappings</structname>.<structfield>umoptions</structfield> для защиты паролей, сохранённых в свойствах сопоставлений пользователей (Ной Миш)</para>

     <para>Исправление дефекта CVE-2017-7486 оказалось некорректным: в результате пользователь мог видеть свойства своего собственного сопоставления, даже когда он не имел права <literal>USAGE</literal> для соответствующего стороннего сервера. В таких свойствах мог содержаться пароль, который должен задавать владелец сервера, а не сам пользователь. Так как представление <structname>information_schema.user_mapping_options</structname> не показывает свойства в таких случаях, и <structname>pg_user_mappings</structname> не должно. (CVE-2017-7547)</para>

     <para>Само по себе это исправление корректирует поведение только в новых базах данных, создаваемых initdb. Если вы хотите применить это исправление к существующей базе данных, вам нужно будет проделать следующие действия:</para>

     <procedure>
      <step>
       <para>Добавьте <literal>allow_system_table_mods = true</literal> в <filename>postgresql.conf</filename> и перезапустите сервер. (В версиях, поддерживающих <command>ALTER SYSTEM</command>, вы можете воспользоваться этой командой для изменения конфигурации, но перезапустить сервер потребуется всё равно.)</para>
      </step>

      <step>
       <para>В <emphasis>каждой</emphasis> базе данных кластера выполните от имени суперпользователя следующие команды: <programlisting>SET search_path = pg_catalog;
CREATE OR REPLACE VIEW pg_user_mappings AS
    SELECT
        U.oid       AS umid,
        S.oid       AS srvid,
        S.srvname   AS srvname,
        U.umuser    AS umuser,
        CASE WHEN U.umuser = 0 THEN
            'public'
        ELSE
            A.rolname
        END AS usename,
        CASE WHEN (U.umuser &lt;&gt; 0 AND A.rolname = current_user
                     AND (pg_has_role(S.srvowner, 'USAGE')
                          OR has_server_privilege(S.oid, 'USAGE')))
                    OR (U.umuser = 0 AND pg_has_role(S.srvowner, 'USAGE'))
                    OR (SELECT rolsuper FROM pg_authid WHERE rolname = current_user)
                    THEN U.umoptions
                 ELSE NULL END AS umoptions
    FROM pg_user_mapping U
         LEFT JOIN pg_authid A ON (A.oid = U.umuser) JOIN
        pg_foreign_server S ON (U.umserver = S.oid);</programlisting></para>
      </step>

      <step>
       <para>Не забудьте внести коррективы в базах данных <literal>template0</literal> и <literal>template1</literal>, в противном случае уязвимость сохранится в базах, которые будут создаваться впоследствии. Чтобы поправить <literal>template0</literal>, вам потребуется временно разрешить подключения к ней. В <productname>PostgreSQL</productname> 9.5 и новее вы можете выполнить <programlisting>ALTER DATABASE template0 WITH ALLOW_CONNECTIONS true;</programlisting>, а внеся поправку в <literal>template0</literal>, восстановить прежнее состояние командой <programlisting>ALTER DATABASE template0 WITH ALLOW_CONNECTIONS false;</programlisting> В более ранних версиях вместо этого используйте пару команд <programlisting>UPDATE pg_database SET datallowconn = true WHERE datname = 'template0';
UPDATE pg_database SET datallowconn = false WHERE datname = 'template0';</programlisting></para>
      </step>

      <step>
       <para>В заключение удалите параметр конфигурации <literal>allow_system_table_mods</literal> и ещё раз перезапустите postmaster.</para>
      </step>
     </procedure>
    </listitem>

    <listitem>
     <para>Запрет пустых паролей для всех методов аутентификации по паролю (Хейкки Линнакангас)</para>

     <para>Библиотека <application>libpq</application> игнорирует пустое указание пароля и не передаёт его на сервер. Поэтому, если пароль пользователя пустой, <application>psql</application> и другие клиенты на базе <application>libpq</application> не позволяют подключиться с таким паролем. Как следствие, администратор может решить, что установка пустого пароля равнозначна запрету входа по паролю. Однако с изменённым клиентом или клиентом не на базе <application moreinfo="none">libpq</application> подключение оказывается возможным, в зависимости от настроенного метода аутентификации. В частности, самый распространённый метод, <literal>md5</literal>, принимает пустые пароли. В результате этого изменения сервер не будет принимать пустые пароли во всех случаях. (CVE-2017-7546)</para>
    </listitem>

    <listitem>
     <para>Добавление в <function>lo_put()</function> проверки права <literal>UPDATE</literal> для целевых больших объектов (Том Лейн, Мишель Пакье)</para>

     <para>Функция <function>lo_put()</function>, несомненно, должна требовать наличия тех же прав, что и <function>lowrite()</function>, но такая проверка отсутствовала, что позволяло пользователю менять данные в большом объекте. (CVE-2017-7548)</para>
    </listitem>

    <listitem>
     <para>Исправление в документации описания процесса обновления резервных серверов с использованием <application>pg_upgrade</application> (Брюс Момджян)</para>

     <para>Ранее в документации говорилось, что нужно запустить/остановить ведущий сервер после запуска <application>pg_upgrade</application>, но до синхронизации резервных серверов. Однако эта последовательность небезопасна.</para>
    </listitem>

    <listitem>
     <para>Исправление одновременной блокировки цепочки изменённых кортежей (Альваро Эррера)</para>

     <para>Когда цепочка изменённых кортежей блокируется одновременно несколькими сеансами в неконфликтующем режиме с использованием старого снимка, и все операции завершаются успешно, существовала возможность, что некоторые из них, несмотря на это, нарушатся (и заключат, что актуальной версии кортежа нет) из-за условий гонки. В частности, вследствие этого проверка внешнего ключа могла не увидеть кортеж, который определённо существует, но изменяется параллельной операцией.</para>
    </listitem>

    <listitem>
     <para>Устранение риска повреждения данных при замораживании кортежа, в котором XMAX равен идентификатору мультитранзакции с ровно одним ещё востребованным членом (Фёдор Сигаев)</para>
    </listitem>

    <listitem>
     <para>Предупреждение целочисленного переполнения и краха при сортировке в памяти более чем одного миллиарда кортежей (Сергей Копосов)</para>
    </listitem>

    <listitem>
     <para>В Windows необходимо повторять попытки создания процесса в случае ошибки при резервировании диапазона адресов разделяемой памяти в новом процессе (Том Лейн, Амит Капила)</para>

     <para>Это должно устранить периодические сбои при запуске дочерних процессов, возможно, вызванные вмешательством антивирусных программ.</para>
    </listitem>

    <listitem>
     <para>Устранение маловероятной возможности повреждения разделяемой хеш-таблицы предикатных блокировок в сборках для Windows (Томас Мунро, Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Предотвращение вывода в журнал сообщения о штатном закрытии SSL-соединения (поведение должно быть таким же, как и при сбросе соединения) (Мишель Пакье)</para>
    </listitem>

    <listitem>
     <para>Запрещение передачи сеансовых билетов SSL клиентам (Том Лейн)</para>

     <para>Это исправление устраняет сбои при переподключении клиентов с реализациями SSL, в которых эти билеты используются.</para>
    </listitem>

    <listitem>
     <para>Исправление кода, устанавливающего <xref linkend="guc-tcp-keepalives-idle"/> в Solaris (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление дефекта в сборщике статистики, приводящего к потере запросных сообщений, выдаваемых сразу после перезапуска главного процесса (Том Лейн)</para>

     <para>Запросы статистики, выдаваемые в течение полсекунды после предыдущего отключения главного процесса, по сути терялись.</para>
    </listitem>

    <listitem>
     <para>Размер приёмного буфера в сборщике статистики должен быть не меньше 100 Кбайт (Том Лейн)</para>

     <para>Это снижает риск потери данных статистики на старых платформах, где размер приёмного буфера по умолчанию меньше.</para>
    </listitem>

    <listitem>
     <para>Устранение возможности создания некорректного сегмента WAL при повышении резервного сервера сразу после того, как он обрабатывает запись <literal>XLOG_SWITCH</literal> (Андрес Фройнд)</para>
    </listitem>

    <listitem>
     <para>Процесс <application>walsender</application> должен завершаться своевременно, когда клиент инициирует выключение (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление обработки сигналов <systemitem>SIGHUP</systemitem> и <systemitem>SIGUSR1</systemitem> в процессах walsender (Петр Желинек, Андрес Фройнд)</para>
    </listitem>

    <listitem>
     <para>Предотвращение панического состояния, которое могут вызвать процессы walsender во время контрольной точки при выключении (Андрес Фройнд, Мишель Пакье)</para>
    </listitem>

    <listitem>
     <para>Устранение неоправданной паузы при перезапуске процессов <application>walreceiver</application>, возникающей вследствие условий гонки в главном процессе (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Устранение утечки маленьких подтранзакций, оказывающихся на диске при логическом декодировании (Андрес Фройнд)</para>

     <para>В результате образовывались временные файлы, занимающие лишнее место на диске.</para>
    </listitem>

    <listitem>
     <para>Оптимизация операций, необходимых для получения снимков при создании слотов логического декодирования (Андрес Фройнд, Петр Желинек)</para>

     <para>Предыдущий алгоритм оказывался очень неэффективным на сервере со множеством открытых транзакций.</para>
    </listitem>

    <listitem>
     <para>Устранение условий гонки, при которых создание слотов логического декодирования могло откладываться на неопределённое время (Андрес Фройнд, Петр Желинек)</para>
    </listitem>

    <listitem>
     <para>Уменьшение издержек при обработке событий сброса системного кеша (Том Лейн)</para>

     <para>Это особенно полезно для логического декодирования, когда сброс кеша происходит часто.</para>
    </listitem>

    <listitem>
     <para>Исправление поведения в ситуациях, когда <command>INSERT</command> или <command>UPDATE</command> присваивает более одного элемента столбцу с типом домена на базе массива (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Разрешение использования оконных функций во вложенных <literal>SELECT</literal> в аргументах агрегатной функции (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Предупреждение конфликта имён с автоматически генерируемыми типами массивов при выполнении <command>ALTER ... RENAME</command> (Вик Фиринг)</para>

     <para>Ранее автоматически сгенерированный тип массива во избежание конфликта переименовывался при выполнении <command>CREATE</command>; данное исправление распространяет это поведение и на операции переименования.</para>
    </listitem>

    <listitem>
     <para>Устранение потери указателя в <command>ALTER TABLE</command> когда для ограничения, принадлежащего таблице, добавлен комментарий (Дэвид Роули)</para>

     <para>При повторном применении комментария к воссозданному ограничению мог произойти сбой со странным сообщением или даже с аварийным завершением.</para>
    </listitem>

    <listitem>
     <para>Добавление для команды <command>ALTER USER ... SET</command> всех вариантов синтаксиса, что принимает <command>ALTER ROLE ... SET</command> (Питер Эйзентраут)</para>
    </listitem>

    <listitem>
     <para>Обновление информации о зависимости при смене типа аргумента или возврата для функции ввода/вывода с <type>opaque</type> на целевой тип (Хейкки Линнакангас)</para>

     <para><command>CREATE TYPE</command> изменяет функции ввода/вывода, объявленные в давно устаревшем стиле, но информация о зависимости от этого типа не записывалась, в результате чего после команд <command>DROP TYPE</command> могли оставаться дефектные определения функций.</para>
    </listitem>

    <listitem>
     <para>Сокращение использования памяти при обработке командой <command>ANALYZE</command> столбцов <type>tsvector</type> (Хейкки Линнакангас)</para>
    </listitem>

    <listitem>
     <para>Устранение ненужной потери точности и небрежного округления при умножении и делении значений <type>money</type> на целые числа или числа с плавающей точкой (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Уточнение проверок пробельных символов в функциях, разбирающих идентификаторы, например <function>regprocedurein()</function> (Том Лейн)</para>

     <para>В зависимости от используемой локали эти функции могли неправильно воспринимать фрагменты многобайтных символов как пробелы.</para>
    </listitem>

    <listitem>
     <para>Использование уместных символов <literal>#define</literal> из Perl при сборке <application>PL/Perl</application> (Ашутош Шарма, Том Лейн)</para>

     <para>Это предупреждает проблемы переносимости, обычно проявляющиеся в виде ошибок <quote>проверки совместимости</quote> в момент загрузки библиотеки при использовании последних версий Perl.</para>
    </listitem>

    <listitem>
     <para>Обеспечение в <application>libpq</application> корректного сброса состояния аутентификации GSS/SASL и SSPI после неудачной попытки подключения (Мишель Пакье)</para>

     <para>Ранее этот сброс не выполнялся и при переходе с SSL-соединения на не SSL ошибка GSS/SASL при попытке SSL-подключения мешала затем установить обычное подключение, без SSL. С SSPI этого не происходило, но имела место утечка памяти.</para>
    </listitem>

    <listitem>
     <para>В <application>psql</application> устранён сбой, возникающий, когда команда <command>COPY FROM STDIN</command> завершалась вводом сигнала EOF с клавиатуры, а затем следовала ещё одна попытка выполнить <command>COPY FROM STDIN</command> (Томас Мунро)</para>

     <para>Это некорректное поведение наблюдалось в системах, основанных на BSD, (включая macOS), но не в других.</para>
    </listitem>

    <listitem>
     <para>Исправление программ <application>pg_dump</application> и <application>pg_restore</application>, чтобы команды <command>REFRESH MATERIALIZED VIEW</command> выдавались в конце (Том Лейн)</para>

     <para>Это предотвращает ошибки при выгрузке/восстановлении данных, когда материализованное представление ссылается на таблицы, принадлежащие другому пользователю.</para>
    </listitem>

    <listitem>
     <para>Улучшение вывода в <application>pg_dump</application>/<application>pg_restore</application> сообщений об ошибках, возникающих в <application>zlib</application> (Владимир Кунщиков, Альваро Эррера)</para>
    </listitem>

    <listitem>
     <para>Исправление поведения <application>pg_dump</application> с ключом <option>--clean</option>, чтобы событийные триггеры удалялись должным образом (Том Лейн)</para>

     <para>Теперь также правильно назначаются владельцы событийных триггеров; ранее после запуска скрипта восстановления такие триггеры оказывались принадлежащими суперпользователю.</para>
    </listitem>

    <listitem>
     <para>Исправление дефекта в <application>pg_dump</application>, когда для пустого класса операторов выдавался некорректный SQL (Даниэль Густафсон)</para>
    </listitem>

    <listitem>
     <para>Исправление вывода <application>pg_dump</application> в stdout на платформе Windows (Кунтал Гхош)</para>

     <para>Сжатые данные выгрузки в текстовом виде при выводе в stdout оказывались испорченными из-за того, что дескриптор файла не переводился в двоичный режим.</para>
    </listitem>

    <listitem>
     <para>Исправление вывода <function>pg_get_ruledef()</function> для правила <literal>ON SELECT</literal>, связанного с представлением, в котором переименовывались столбцы (Том Лейн)</para>

     <para>В некоторых особых случаях <application>pg_dump</application> использует <function>pg_get_ruledef()</function> для выгрузки представлений, так что эта ошибка могла приводить к сбоям при выгрузке/загрузке.</para>
    </listitem>

    <listitem>
     <para>Исправление выгрузки внешних соединений с пустыми ограничениями, получающихся, например, в результате <literal>NATURAL LEFT JOIN</literal> без общих столбцов (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление выгрузки выражений с функциями в предложении <literal>FROM</literal> в случаях, когда эти выражения не преобразуются в нечто, напоминающее вызов функции (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление вывода <application>pg_basebackup</application> в stdout на платформе Windows (Харибабу Комми)</para>

     <para>Архивируемые данные при выводе в stdout оказывались испорченными из-за того, что дескриптор файла не переводился в двоичный режим.</para>
    </listitem>

    <listitem>
     <para>Исправление <application>pg_rewind</application> для корректной работы с файлами больше 2 ГБ (Кунтал Гхош, Мишель Пакье)</para>

     <para>Обычно такие файлы в каталогах данных <productname>PostgreSQL</productname> не образуются, но в некоторых случаях они могут появиться.</para>
    </listitem>

    <listitem>
     <para>Исправление <application>pg_upgrade</application>, чтобы в конечной записи в WAL не оказалось <xref linkend="guc-wal-level"/> = <literal>minimum</literal> (Брюс Момджян)</para>

     <para>Это могло препятствовать переподключению обновлённых резервных серверов.</para>
    </listitem>

    <listitem>
     <para>Исправление в <application>pg_xlogdump</application> вычисления длины записи WAL (Андрес Фройнд)</para>
    </listitem>

    <listitem>
     <para>В <filename>postgres_fdw</filename> соединения к удалённым серверам должны устанавливаться заново после команд <command>ALTER SERVER</command> и <command>ALTER USER MAPPING</command> (Киотаро Хоригучи)</para>

     <para>Благодаря этому изменения параметров, затрагивающие свойства соединения, вступят в силу своевременно.</para>
    </listitem>

    <listitem>
     <para>В <filename>postgres_fdw</filename> реализована отмена команд управления удалёнными транзакциями (Роберт Хаас, Рафия Сабих)</para>

     <para>Это изменение позволяет быстрее прервать ожидание неотвечающего удалённого сервера в большем количестве случаев, чем раньше.</para>
    </listitem>

    <listitem>
     <para>Увеличение <literal>MAX_SYSCACHE_CALLBACKS</literal> для выделения дополнительного места расширениям (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>При сборке разделяемых библиотек с gcc всегда должен передаваться ключ <option>-fPIC</option>, а не <option>-fpic</option> (Том Лейн)</para>

     <para>Это позволяет поддерживать библиотеки расширений большего размера на тех платформах, где эти ключи не равнозначны.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [af1f18259] 2017-08-02 15:07:20 -0400
Branch: REL9_4_STABLE [8892170e7] 2017-08-02 15:07:20 -0400
Branch: REL9_3_STABLE [3d9ae20e7] 2017-08-02 15:07:20 -0400
Branch: REL9_2_STABLE [1188b9b2c] 2017-08-02 15:07:21 -0400
-->
     <para>Экранирование фигурных скобок в наших сборочных скриптах для Microsoft MSVC во избежание предупреждений или ошибок с новыми версиями Perl (Эндрю Дунстан)</para>
    </listitem>

    <listitem>
     <para>Для сборок MSVC реализована обработка ситуации, когда библиотека <application>openssl</application> находится не в подкаталоге <filename>VC</filename> (Эндрю Дунстан)</para>
    </listitem>

    <listitem>
     <para>Для сборок MSVC добавлен нужный путь для заголовочных файлов <application>libxml2</application> (Эндрю Дунстан)</para>

     <para>Это устраняет прежнюю необходимость перемещения файлов в стандартной инсталляции <application>libxml2</application> в Windows.</para>
    </listitem>

    <listitem>
     <para>Сборки MSVC должны распознавать библиотеку Tcl с именем <filename>tcl86.lib</filename> (Ной Миш)</para>
    </listitem>

    <listitem>
     <para>В сборках MSVC должны учитываться флаги в параметре <literal>PROVE_FLAGS</literal>, заданном в командной строке <filename>vcregress.pl</filename> (Эндрю Дунстан)</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-7">
  <title>Выпуск 9.5.7</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-05-11</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.6. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.7</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы используете сторонние серверы данных, на которых для проверки подлинности применяются пароли, прочитайте ниже первую запись в списке изменений.</para>

   <para>А если вы используете сторонние средства репликации, основанные на <quote>логическом декодировании</quote>, обратите внимание на четвёртую запись в списке изменений.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.5.6, см. <xref remap="4" linkend="release-9-5-6"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
     <para>Ограничение видимости <structname>pg_user_mappings</structname>.<structfield>umoptions</structfield> для защиты паролей, сохранённых в свойствах сопоставлений пользователей (Мишель Пакье, Фейке Стинберген)</para>

     <para>Предыдущая реализация позволяла владельцу объекта стороннего сервера или любому, кто получил право <literal>USAGE</literal>, видеть свойства всех сопоставлений, связанных с этим сервером. В том числе это могли быть и пароли других пользователей. Теперь определение данного представления изменено для соответствия поведению <structname>information_schema.user_mapping_options</structname>, так что эти свойства может прочитать только собственно пользователь сопоставления либо, если это сопоставление роли <literal>PUBLIC</literal>, владелец сервера, либо суперпользователь. (CVE-2017-7486)</para>

     <para>Само по себе это исправление корректирует поведение только в новых базах данных, создаваемых initdb. Если вы хотите применить это исправление к существующей базе данных, следуйте исправленной процедуре в списке изменений, относящейся к CVE-2017-7547, в <xref remap="6" linkend="release-9-5-8"/>.</para>
    </listitem>

    <listitem>
     <para>Предотвращение утечки статистической информации через негерметичные операторы (Питер Эйзентраут)</para>

     <para>Некоторые функции оценки избирательности в планировщике применяют пользовательские операторы к значениям, получаемым из <structname>pg_statistic</structname>, например, к наиболее частым значениям и элементам гистограммы. Это происходит до проверки прав доступа к таблице, так что злонамеренный пользователь может воспользоваться этим и получить подобные значения из столбцов таблицы, чтение которых ему запрещено. Для устранения этой уязвимости следует переходить к общим оценкам, если функция, реализующая оператор, не считается герметичной и вызывающий её пользователь не имеет права на чтение столбца, статистика по которому требуется планировщику. На практике в большинстве случаев одно из этих условий выполняется. (CVE-2017-7484)</para>
    </listitem>

    <listitem>
     <para>Восстановление восприятия библиотекой <application>libpq</application> переменной окружения <envar>PGREQUIRESSL</envar> (Даниэль Густафсон)</para>

     <para>Поддержка этой переменной окружения была непреднамеренно ликвидирована в <productname>PostgreSQL</productname> 9.3, но в документации она осталась. Это создало угрозу безопасности, так как пользователи могли рассчитывать на то, что она будет требовать SSL-шифрования подключений, но на самом деле этого не происходило. Теперь эта переменная воспринимается как и раньше, но имеет меньший приоритет, чем <envar>PGSSLMODE</envar>, во избежание нарушения конфигураций, работающих корректно с версиями после 9.3. (CVE-2017-7485)</para>
    </listitem>

    <listitem>
     <para>Исправление потенциально некорректного начального снимка при логическом декодировании (Петр Желинек, Андрес Фройнд)</para>

     <para>Изначальный снимок, создаваемый для слота репликации с логическим декодированием, мог быть некорректным. В результате сторонние средства, использующие логическое декодирование, могли получать неполные/несогласованные начальные данные. Вероятность такого сбоя увеличивалась, если при создании слота исходный сервер был загружен либо уже существовал другой логический слот.</para>

     <para>Если вы используете средство репликации, основанное на логическом декодировании, и копировали непустой набор данных в начале репликации, имеет смысл пересоздать реплику после установления этого обновления либо сверить содержимое базы с исходным сервером.</para>
    </listitem>

    <listitem>
     <para>Исправление потенциального повреждения <quote>слоёв инициализации</quote> нежурналируемых индексов (Роберт Хаас, Мишель Пакье)</para>

     <para>Это повреждение могло приводить к переходу нежурналируемого индекса в ошибочное состояние после сбоя и перезапуска сервера. Устранить возникшую проблему можно было, только удалив и перестроив индекс.</para>
    </listitem>

    <listitem>
     <para>Исправление ошибочного восстановления записей <structname>pg_subtrans</structname> при воспроизведении резервным сервером подготовленных, но не зафиксированных двухфазных транзакций (Том Лейн)</para>

     <para>В большинстве случаев это не имело никаких болезненных последствий, но в особых ситуациях могло приводить к зацикливанию ссылок в <structname>pg_subtrans</structname>, что, в свою очередь, провоцировало бесконечные циклы в запросах, обращающимся к строкам, изменённым двухфазной транзакцией.</para>
    </listitem>

    <listitem>
     <para>Предотвращение возможного сбоя в <application>walsender</application> при ошибке инициализации буфера строки (Стас Кельвич, Фудзии Масао)</para>
    </listitem>

    <listitem>
     <para>Предупреждение возможного сбоя при повторном сканировании индекса GiST с использованием только индекса и поиском ближайших соседей (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление поведения postmaster при обработке сбоя <function>fork()</function> для фонового рабочего процесса (Том Лейн)</para>

     <para>Ранее postmaster модифицировал элементы своего состояния так, как будто процесс был запущен успешно, что впоследствии приводило к замешательству.</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Gierth <rhodiumtoad@postgresql.org>
Branch: REL9_5_STABLE [7be3678a8] 2017-04-24 07:53:05 +0100
-->
     <para>Устранение сбоев или неверных ответов в случаях, когда тип данных столбца в <literal>GROUPING SETS</literal> является хешируемым, но не сортируемым (Паван Деоласи)</para>
    </listitem>

    <listitem>
     <para>Исключение применения оптимизации <quote>физического целевого списка</quote> к нестандартным сканированиям (Дмитрий Иванов, Том Лейн)</para>

     <para>Эта оптимизация предполагала, что получить все столбцы кортежа можно недорого, что действительно верно для обычных кортежей Postgres, но с нестандартными провайдерами сканирования это может быть не так.</para>
    </listitem>

    <listitem>
     <para>Использование правильного подвыражения при применении политики защиты на уровне строк <literal>FOR ALL</literal> (Стивен Фрост)</para>

     <para>В некоторых случаях применялось ограничение <literal>WITH CHECK</literal>, хотя более уместным было бы ограничение <literal>USING</literal>.</para>
    </listitem>

    <listitem>
     <para>Обеспечение видимости результатов непосредственно предшествующих DDL при разборе запросов в скриптах расширений (Жульен Рохо, Том Лейн)</para>

     <para>Из-за того, что кеш между командами в скрипте расширения не сбрасывался, запрос к данным мог не наблюдать эффектов непосредственно предшествующего ему изменения каталога, например результатов <command>ALTER TABLE ... RENAME</command>.</para>
    </listitem>

    <listitem>
     <para>Ликвидация проверки прав доступа к табличному пространству при перестроении существующего индекса командой <command>ALTER TABLE ... ALTER COLUMN TYPE</command> (Ной Миш)</para>

     <para>Это команда выдавала ошибку, если вызывающий пользователь не имел права <literal>CREATE</literal> для табличного пространства, содержащего индекс. Такое поведение малополезно, так что стоит исключить эту проверку и разрешить перестраивать индекс там, где он находился.</para>
    </listitem>

    <listitem>
     <para>Предотвращение рекурсивного обращения команды <command>ALTER TABLE ... VALIDATE CONSTRAINT</command> к дочерним таблицам когда ограничение помечено как <literal>NO INHERIT</literal> (Амит Ланготе)</para>

     <para>Это предупреждает нежелательные сбои типа <quote>constraint does not exist</quote> (ограничение не существует) в случаях, когда в дочерних таблицах нет соответствующего ограничения.</para>
    </listitem>

    <listitem>
     <para>Устранение потери указателя в <command>COPY ... TO</command> когда для исходной таблицы активна защита на уровне строк (Том Лейн)</para>

     <para>Обычно это не имело болезненных последствий, но иногда всё же приводило к неожиданным ошибкам и сбоям.</para>
    </listitem>

    <listitem>
     <para>Предупреждение обращения к уже закрытому элементу relcache в <command>CLUSTER</command> и <command>VACUUM FULL</command> (Том Лейн)</para>

     <para>При особом стечении обстоятельств это могло приводить к тому, что индексы в целевом отношении перестраивались с неправильным режимом сохранения.</para>
    </listitem>

    <listitem>
     <para>Исправление ошибки команды <command>VACUUM</command>, когда она неправильно учитывала страницы, которые не могла прочитать из-за конфликтующих закреплений страниц (Эндрю Гирт)</para>

     <para>Это провоцировало недооценивание количества кортежей в таблице. В худшем случае с чрезвычайно востребованной таблицей команда <command>VACUUM</command> могла ошибочно сообщить, что таблица вовсе не содержит кортежей, что приводило к очень плохим решениям при планировании.</para>
    </listitem>

    <listitem>
     <para>Обеспечение возможности прерывания циклов массовой передачи кортежей в соединении по хешу при попытке отмены запроса (Том Лейн, Томас Мунро)</para>
    </listitem>

    <listitem>
     <para>Исправление проблем с переполнением целочисленных значений при сравнении типов <type>interval</type> (Киотаро Хоригучи, Том Лейн)</para>

     <para>Операторы сравнения для типа <type>interval</type> могли выдавать неверные ответы для интервалов, превышающих 296000 лет. Индексы по столбцам с такими большими значениями следует перестроить, так как они могут быть испорчены.</para>
    </listitem>

    <listitem>
     <para>Исправление функции <function>cursor_to_xml()</function>, чтобы она выдавала правильный результат с <replaceable>tableforest</replaceable> = false (Томас Мунро, Питер Эйзентраут)</para>

     <para>Ранее она не добавляла внешний элемент <literal>&lt;table&gt;</literal>.</para>
    </listitem>

    <listitem>
     <para>Устранение проблем с округлением в функциях <function>float8_timestamptz()</function> и <function>make_interval()</function> (Том Лейн)</para>

     <para>Эти функции отбрасывали дробную часть, а не округляли числа при преобразовании значения с плавающей точкой к целому числу микросекунд; это могло приводить к неожиданным сдвигам результатов на единицу.</para>
    </listitem>

    <listitem>
     <para>Исправление функции <function>pg_get_object_address()</function> для членов семейств операторов (Альваро Эррера)</para>
    </listitem>

    <listitem>
     <para>Улучшение производительности представления <structname>pg_timezone_names</structname> (Том Лейн, Дэвид Роули)</para>
    </listitem>

    <listitem>
     <para>Уменьшение издержек при управлении памятью для контекстов, содержащих множество больших блоков (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление неаккуратной обработки редких ошибок в <function>lseek()</function> и <function>close()</function> (Том Лейн)</para>

     <para>В типичных ситуациях эти системные вызовы отрабатывают без ошибок, но в случае ошибки код <filename>fd.c</filename> мог повести себя некорректно.</para>
    </listitem>

    <listitem>
     <para>Исправление некорректной проверки факта работы postmaster в виде службы Windows (Мишель Пакье)</para>

     <para>Вследствие ошибки для вывода сообщений мог выбираться системный журнал событий (там где его на самом деле не было), так что запись сообщений фактически не производилась.</para>
    </listitem>

    <listitem>
     <para>Исправление в <application>ecpg</application> поддержки <command>COMMIT PREPARED</command> и <command>ROLLBACK PREPARED</command> (Масахико Савада)</para>
    </listitem>

    <listitem>
     <para>Исправление ошибки двойного освобождения при обработке строковых констант, заключённых в доллары, в <application>ecpg</application> (Михаэль Мескес)</para>
    </listitem>

    <listitem>
     <para>В <application>pg_dump</application> исправлена пометка схемы и владельца для комментариев и меток безопасности некоторых типов объектов БД (Джузеппе Брокколо, Том Лейн)</para>

     <para>В простых случаях это не проявлялось никак, но например, при восстановлении с выбором схемы, могли потеряться комментарии, которые в ней должны быть, из-за того, что они не были помечены как принадлежащие схеме своего объекта.</para>
    </listitem>

    <listitem>
     <para>Предотвращение вывода командой <literal>pg_restore -l</literal> некорректного файла со списком объектов, когда имена объектов SQL содержат символы перевода строки (Том Лейн)</para>

     <para>Символы перевода строки заменяются пробелами, что достаточно для того, чтобы этот список корректно обработала команда <literal>pg_restore -L</literal>.</para>
    </listitem>

    <listitem>
     <para>Исправление поведения <application>pg_upgrade</application> для корректного переноса комментариев и меток безопасности, связанных с <quote>большими объектами</quote> (BLOB) (Стивен Фрост)</para>

     <para>Ранее такие объекты корректно переносились в новую базу данных, но связанные с ними комментарии и метки безопасности терялись.</para>
    </listitem>

    <listitem>
     <para>Улучшение обработки ошибок в функции <function>pg_file_write()</function> из <filename>contrib/adminpack</filename> (Ной Миш)</para>

     <para>В частности, она не реагировала на ошибки в вызове <function>fclose()</function>.</para>
    </listitem>

    <listitem>
     <para>Предупреждение утечки предыдущего безымянного соединения при установлении нового безымянного соединения в <filename>contrib/dblink</filename> (Джо Конвей)</para>
    </listitem>

    <listitem>
     <para>Исправление извлечения триграмм из регулярных выражений в <filename>contrib/pg_trgm</filename> (Том Лейн)</para>

     <para>В некоторых случаях это могло приводить к формированию испорченной структуры данных, для которой отсутствуют какие-либо соответствия. Вследствие этого при сканировании по индексам GIN и GiST с использованием триграмм для регулярного выражения могли не находиться никакие результаты.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: REL9_5_STABLE [cdf5a004b] 2017-05-06 22:21:38 -0400
Branch: REL9_4_STABLE [f14bf0a8f] 2017-05-06 22:19:56 -0400
Branch: REL9_3_STABLE [3aa16b117] 2017-05-06 22:17:35 -0400
-->
     <para>В <filename>contrib/postgres_fdw</filename> реализована передача требования отмены запроса удалённому серверу (Мишель Пакье, Эцуро Фудзита)</para>

     <para>Ранее требование на отмену локального запроса не влекло за собой досрочную отмену удалённого запроса, уже переданного на выполнение. Это доработка ранее была реализована в 9.6 и теперь перенесена в 9.5.</para>
    </listitem>

    <listitem>
     <para>Поддержка Tcl 8.6 в сборках с MSVC (Альваро Эррера)</para>
    </listitem>

    <listitem>
     <para>Синхронизация нашей копии библиотеки timezone с выпущенной IANA версией tzcode2017b (Том Лейн)</para>

     <para>Это устраняет ошибку с некоторыми вариантами перехода на летнее время в январе 2038.</para>
    </listitem>

    <listitem>
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2017b, включающее изменение правил перехода на летнее время в Чили, Монголии и на Гаити, а также исторические изменения для Эквадора, Казахстана, Либерии и Испании. Переход к числовым аббревиатурам для ряда часовых поясов в Южной Америке, в Тихом и Индийском океанах, а также в некоторых азиатских и ближневосточных странах.</para>

     <para>Ранее в базе данных часовых поясов IANA предоставлялись текстовые аббревиатуры для всех часовых поясов и иногда при этом указывались аббревиатуры, которые практически не употреблялись местным населением. Сейчас происходит процесс ухода от этой практики в пользу использования числовых смещений UTC в тех часовых поясах, где нет никаких свидетельств реального использования английской аббревиатуры. Как минимум на данном этапе, <productname>PostgreSQL</productname> продолжит принимать подобные удалённые аббревиатуры при вводе дат/времени. Но они не будут видны при просмотре представления <structname>pg_timezone_names</structname> и не будут выводиться с датами/временем.</para>
    </listitem>

    <listitem>
     <para>Использование корректных правил перехода на летнее время для названий часовых поясов в стиле POSIX при сборке с MSVC (Дэвид Роули)</para>

     <para>Сборочные скрипты для MSVC не устанавливали корректно файл <filename>posixrules</filename> в дерево каталогов timezone. Это приводило к тому, что код timezone переходил к использованию встроенных представлений о том, какой вариант перехода на летнее время применим для названия пояса в стиле POSIX. По историческим причинам это соответствует правилам, которые действовали в США до 2007 г. (то есть переход на летнее время происходил в первое воскресенье апреля, а на зимнее — в последнее воскресенье октября). С этим исправлением для часового пояса с названием в стиле POSIX будут использоваться текущие и исторические даты перехода для пояса <literal>US/Eastern</literal>. Если для вас это нежелательно, удалите файл <filename>posixrules</filename> или замените его файлом другого часового пояса (см. <xref remap="4" linkend="datatype-timezones"/>). Учтите, что вследствие кеширования вам потребуется перезапустить сервер, чтобы подобные изменения вступили в силу.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-6">
  <title>Выпуск 9.5.6</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-02-09</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.5. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.6</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если в вашей инсталляции проявилась ошибка, описанная в первой записи следующего списка изменений, после обновления вам может потребоваться предпринять дополнительные действия для исправления испорченных индексов.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.5.5, см. <xref remap="4" linkend="release-9-5-5"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
     <para>Исправление поведения в особых условиях, которое приводило к повреждению индексов, создаваемых командой <command>CREATE INDEX CONCURRENTLY</command> (Паван Деоласи, Том Лейн)</para>

     <para>Если команда <command>CREATE INDEX CONCURRENTLY</command> применялась для построения индекса, зависящего от столбца, ранее не индексированного, то у строк, изменяемых транзакциями, выполняемыми одновременно с командой <command>CREATE INDEX</command>, могли оказываться некорректные записи в индексе. В случае подозрений, что вас это коснулось, самое надёжное решение — перестроить такие индексы после установки этого обновления.</para>
    </listitem>

    <listitem>
     <para>Предотвращение утери специального снимка, используемого при сканированиях каталога, при преждевременной очистке данных (Tom Lane)</para>

     <para>Рабочие процессы не учитывали этот снимок, сообщая о своём самом старом xmin, что оставляло возможность для удаления по-прежнему нужных данных параллельными операциями очистки. Это приводило к появлению плавающих ошибок с сообщениями <quote>ошибка поиска в кеше для отношения 1255</quote>.</para>
    </listitem>

    <listitem>
     <para>Исправление некорректной записи в WAL, формируемой для индексов BRIN (Кунтал Гхош)</para>

     <para>Запись WAL, выдаваемая для страницы BRIN <quote>revmap</quote> при перемещении кортежа индекса в другую страницу, была некорректной. При воспроизведении журнала соответствующая часть индекса становилась непригодной, и её требовалось вычислять заново.</para>
    </listitem>

    <listitem>
     <para>Безусловное фиксирование в WAL создания <quote>слоя инициализации</quote> для нежурналируемых таблиц (Мишель Пакье)</para>

     <para>Ранее это действие пропускалось при <xref linkend="guc-wal-level"/> = <literal>minimal</literal>, но на самом деле это необходимо даже в этом случае, чтобы нежурналируемая таблица корректно создавалась пустой после сбоя.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: REL9_5_STABLE [c0db1ec26] 2016-11-17 13:31:30 -0300
Branch: REL9_4_STABLE [30e3cb307] 2016-11-17 13:31:30 -0300
-->
     <para>Сокращение взаимоблокировок на резервных серверах при воспроизведении операций очистки индекса-B-дерева (Саймон Риггс)</para>

     <para>Это изменение исключает существенные задержки при репликации, которые иногда имели место при воспроизведении таких операций.</para>
    </listitem>

    <listitem>
     <para>Если процесс сборщика статистики потерян, перезапускать его и в режиме горячего резерва (Такаюки Цунакава)</para>
    </listitem>

    <listitem>
     <para>Обеспечение корректной работы механизма уведомлений горячего резерва, когда он включается при запуске резервного сервера (Антс Аасма, Крейг Рингер)</para>
    </listitem>

    <listitem>
     <para>Проверка прерываний в момент ожидания конфликтующего запроса сервером горячего резерва (Саймон Риггс)</para>
    </listitem>

    <listitem>
     <para>Предупреждение постоянного перезапуска процесса запуска автоочистки в особых случаях (Амит Хандекар)</para>

     <para>Это исправление решает проблему, возникавшую, когда автоочистка номинально отключена и есть несколько таблиц, требующих «заморозки», но эти таблицы уже обработаны рабочими процессами автоочистки.</para>
    </listitem>

    <listitem>
     <para>Исправление проверки на возможность удаления объекта, принадлежащего расширению (Том Лейн)</para>

     <para>Скрипты обновления расширений должны иметь возможность удалять объекты расширений, но это запрещалось для последовательностей со столбцами serial, а также, возможно, в других случаях.</para>
    </listitem>

    <listitem>
     <para>Команда <command>ALTER TABLE</command> должна сохранять назначения табличных пространств индексам при перестраивании индексов (Том Лейн, Мишель Пакье)</para>

     <para>Ранее с нестандартными значениями <xref linkend="guc-default-tablespace"/> были возможны разрушения индексов.</para>
    </listitem>

    <listitem>
     <para>Исправление некорректного изменения свойств триггерной функции при изменении свойства «откладываемости» ограничения внешнего ключа с помощью команды <command>ALTER TABLE ... ALTER CONSTRAINT</command> (Том Лейн)</para>

     <para>Это приводило к странным сбоям при последующем обращении к внешнему ключу, так как триггеры срабатывали не в положенное время.</para>
    </listitem>

    <listitem>
     <para>Недопущение удаления ограничения внешнего ключа при наличии событий, ожидающих обработки триггерами, для целевого отношения (Том Лейн)</para>

     <para>Это предотвращает ошибки <quote>не удалось найти триггер <replaceable>NNN</replaceable></quote> и <quote>в отношении <replaceable>NNN</replaceable> нет триггеров</quote>.</para>
    </listitem>

    <listitem>
     <para>Исправление поведения <command>ALTER TABLE ... SET DATA TYPE ... USING</command> в случаях, когда порядок столбцов в дочерней таблице отличается от родительской (Альваро Эррера)</para>

     <para>Вследствие того, что столбцы в выражении <literal>USING</literal> не перенумеровывались, возникала ошибка, обычно такая: <quote>атрибут <replaceable>N</replaceable> имеет неправильный тип</quote>.</para>
    </listitem>

    <listitem>
     <para>Исправление обращения к столбцу OID в случаях, когда таблица с таким столбцом связывается с родительской, тоже с OID, посредством <command>ALTER TABLE ... INHERIT</command> (Амит Ланготе)</para>

     <para>В таких случаях столбец OID должен обрабатываться как обычный пользовательский столбец, но этого не происходило, что приводило к странному поведению при последующих изменениях наследования.</para>
    </listitem>

    <listitem>
     <para>Исправление поведения <command>CREATE OR REPLACE VIEW</command> — запрос представления должен изменяться до применения новых параметров представления (Дин Рашид)</para>

     <para>Ранее в команде происходил сбой, если новые параметры оказывались несогласованными со старым определением представления.</para>
    </listitem>

    <listitem>
     <para>Получение правильного идентификатора объекта в <command>ALTER TEXT SEARCH CONFIGURATION</command> (Артур Закиров)</para>

     <para>Ранее расширениям, таким как модули логического декодирования, выдавался неправильный OID каталога.</para>
    </listitem>

    <listitem>
     <para>Предупреждение сбоев механизма учёта времени транзакций при запросе особых XID (<literal>FrozenTransactionId</literal> и <literal>BootstrapTransactionId</literal>) (Крейг Рингер)</para>
    </listitem>

    <listitem>
<!--
Author: Kevin Grittner <kgrittn@postgresql.org>
Branch: REL9_5_STABLE [bed2a0b06] 2016-12-13 19:14:42 -0600
Branch: REL9_4_STABLE [4b9d466c1] 2016-12-13 19:05:12 -0600
Branch: REL9_3_STABLE [5d80171ad] 2016-12-13 19:05:35 -0600
Branch: REL9_2_STABLE [60314e28e] 2016-12-13 19:08:09 -0600
-->
     <para>Проверка конфликтов сериализуемости перед тем, как будет выдана ошибка нарушения ограничений (Томас Мунро)</para>

     <para>В транзакциях сериализуемого уровня изоляции желательно, чтобы ошибка, вызванная параллельными транзакциями, заявлялась как ошибка сериализации, что скажет приложению, что попытка повторить то же действие может быть успешной. К сожалению, это не будет надёжно работать при дублировании ключа при параллельном его добавлении. В результате этого изменения такая ошибка будет выдаваться как ошибка сериализации, если приложение явно проверяет присутствие конфликтующего ключа (и не находит его) до этого в транзакции.</para>
    </listitem>

    <listitem>
     <para>Исправление некорректного использования reloptions представлений как reloptions обычных таблиц (Том Лейн)</para>

     <para>Симптомами ошибки были неуместные сообщения <quote>ON CONFLICT не поддерживается для таблицы ..., служащей таблицей каталога</quote> когда целевым отношением <command>INSERT ... ON CONFLICT</command> было представление с каскадной проверкой.</para>
    </listitem>

    <listitem>
     <para>Исправление некорректного сообщения <quote>допустимое число элементов в целевом списке ограничено <replaceable>N</replaceable></quote> при использовании <literal>ON CONFLICT</literal> с широкими таблицами (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Предотвращение разворачивания <replaceable>foo</replaceable><literal>.*</literal> в набор столбцов в исходном выражении <command>UPDATE</command> (Том Лейн)</para>

     <para>Это приводило к ошибкам с сообщением <quote>несоответствие целевого количества в UPDATE --- внутренняя ошибка</quote>. Теперь эта запись воспринимается как обозначение переменной «вся-строка», как и в других контекстах.</para>
    </listitem>

    <listitem>
     <para>Обеспечение точного определения модификаторов типа столбцов в конструкциях <literal>VALUES</literal> с несколькими строками (Том Лейн)</para>

     <para>Это устраняет проблемы, возникавшие, когда первое значение в столбце имеет воспринимаемый модификатор типа (например, длину значения <type>varchar</type>), но последующие значения не разделяют его ограничение.</para>
    </listitem>

    <listitem>
     <para>При нахождении незаконченной суррогатной пары Unicode в конце строки символов Unicode должна выдаваться ошибка (Том Лейн)</para>

     <para>Обычно за начальным суррогатным символом Unicode должно следовать продолжение, но это не проверялось когда такой начальный символ оказывался последним в строке символов Unicode (<literal>U&amp;'...'</literal>) или в Unicode-идентификаторе (<literal>U&amp;"..."</literal>).</para>
    </listitem>

    <listitem>
     <para>Определённо отрицательному поисковому запросу, например, <literal>!foo</literal>, должны удовлетворять пустые значения <type>tsvector</type> (Том Дунстан)</para>

     <para>Такие соответствия находились при поиске по индексу GIN, но не при последовательном сканировании или поиске по индексу GiST.</para>
    </listitem>

    <listitem>
     <para>Предотвращение сбоя в ситуации, когда <function>ts_rewrite()</function> заменяет поддерево не верхнего уровня пустым запросом (Артур Закиров)</para>
    </listitem>

    <listitem>
     <para>Устранение проблем с производительностью в <function>ts_rewrite()</function> (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление обработки в <function>ts_rewrite()</function> вложенных операторов NOT (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Увеличение скорости пользовательских агрегатов, использующих в качестве перехода функцию <function>array_append()</function> (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление <function>array_fill()</function> для корректной обработки пустых массивов (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Предупреждение возможных сбоев в функциях <function>array_position()</function> и <function>array_positions()</function> при обработке массивов записей (Джун-сок Янг)</para>
    </listitem>

    <listitem>
     <para>Устранение выхода на один байт за границу буфера в функции <function>quote_literal_cstr()</function> (Хейкки Линнакангас)</para>

     <para>Этот выход имел место только если входная строка содержала исключительно апострофы и/или обратные косые черты.</para>
    </listitem>

    <listitem>
     <para>Предотвращение одновременного выполнения вызовов <function>pg_start_backup()</function> и <function>pg_stop_backup()</function> (Мишель Пакье)</para>

     <para>Это предупреждает сбой проверки истинности и, вероятно, худшие последствия, в случае, если кто-то попытается запустить эти функции параллельно.</para>
    </listitem>

    <listitem>
     <para>Отключение трансформации, которая пыталась оптимизировать бесполезные преобразования <literal>AT TIME ZONE</literal> (Том Лейн)</para>

     <para>Вследствие этого выдавались неверные результаты, когда упрощённое выражение использовалось в условии индекса.</para>
    </listitem>

    <listitem>
     <para>Сохранение приведений <type>interval</type>-в-<type>interval</type>, которые на самом деле несут смысловую нагрузку (Том Лейн)</para>

     <para>В некоторых случаях приведения, которые должны были обнулять младшие поля значений <type>interval</type>, ошибочно считались бессмысленными и просто убирались. В результате, например, при приведении значения типа <type>INTERVAL MONTH</type> к <type>INTERVAL YEAR</type> поле месяцев не обнулялось.</para>
    </listitem>

    <listitem>
     <para>Исправление ошибок при передаче значений параметров GUC параллельным исполнителям (Мишель Пакье, Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Аннулирование кешированных планов при изменениях в параметрах сторонних таблиц (Амит Ланготе, Эцуро Фудзита, Ашутош Бапат)</para>
    </listitem>

    <listitem>
     <para>Исправление <application>pg_dump</application> для корректной выгрузки пользовательских приведений и преобразований, использующих встроенные функции (Стивен Фрост)</para>
    </listitem>

    <listitem>
     <para>Реализация более разумного поведения <application>pg_restore</application> с <option>--create --if-exists</option> в случаях, когда архив содержит нераспознанные команды <command>DROP</command> (Том Лейн)</para>

     <para>Это не устраняет никакую наблюдаемую ошибку, но может улучшить поведение в будущем, при использовании <application>pg_restore</application> с архивом, созданным предыдущей версией <application>pg_dump</application>.</para>
    </listitem>

    <listitem>
     <para>Исправление ограничения нагрузки <application>pg_basebackup</application> при низкой скорости ввода/вывода (Антонин Хоуска)</para>

     <para>Если скорость диска на время оказывалась ниже заданного ограничения, в вычислении происходило переполнение, и в результате ограничение отключалось до конца операции.</para>
    </listitem>

    <listitem>
     <para>Обеспечение корректной работы <application>pg_basebackup</application> с подкаталогами <filename>pg_stat_tmp</filename> и <filename>pg_replslot</filename>, являющимися символическими ссылками (Магнус Хагандер, Мишель Пакье)</para>
    </listitem>

    <listitem>
     <para>Предотвращение возможного сбоя <application>pg_basebackup</application> на резервном сервере при задействовании файлов WAL (Амит Капила, Роберт Хаас)</para>
    </listitem>

    <listitem>
     <para>Исправление возможного дефекта при обработке развёрнутых массивов в ограничениях-проверках доменов и в конструкциях <literal>CASE</literal> (Том Лейн)</para>

     <para>Существовала вероятность, что функция PL/pgSQL, вызванная в этих контекстах, изменит или даже удалит значение массива, которое должно сохраняться для дополнительных операций.</para>
    </listitem>

    <listitem>
     <para>Исправление рекурсивного вызова функций PL/pgSQL в таких контекстах, как проверки ограничений домена, выполняемые при присвоении значения переменной PL/pgSQL (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Обеспечение правильного учёта объектов исключений Python, создаваемых нами для PL/Python, счётчиками использования (Рафа де ла Торре, Том Лейн)</para>

     <para>Это предотвращает ошибки, возникавшие при использовании объектов после цикла уборки мусора в Python.</para>
    </listitem>

    <listitem>
     <para>Исправление в PL/Tcl поддержки триггеров для таблиц, в которых имеется столбец <literal>.tupno</literal> (Том Лейн)</para>

     <para>Это соответствует (ранее недокументированному) поведению команд PL/Tcl <command>spi_exec</command> и <command>spi_execp</command>, в том, что особый столбец <literal>.tupno</literal> добавляется, только если отсутствует настоящий с таким именем.</para>
    </listitem>

    <listitem>
     <para>В файлах <filename>~/.pgpass</filename> должны допускаться завершения строк в стиле DOS, даже на Unix-платформах (Вик Фиринг)</para>

     <para>Это изменение упрощает использование одних и тех же файлов паролей на машинах с Unix и Windows.</para>
    </listitem>

    <listitem>
     <para>Устранение выхода на один байт за границу буфера, когда <application>ecpg</application> передаётся имя файла, которое заканчивается точкой (Такаюки Цунакава)</para>
    </listitem>

    <listitem>
     <para>Исправление в <application>psql</application> дополнения табуляцией для команды <command>ALTER DEFAULT PRIVILEGES</command> (Жиль Даролд, Стивен Фрост)</para>
    </listitem>

    <listitem>
     <para>В <application>psql</application> пустое или содержащее только пробелы значение переменной окружения <envar>PAGER</envar> должно означать <quote>без постраничника</quote> (Том Лейн)</para>

     <para>Ранее с таким значением вывод, предназначенный для постраничника, просто исчезал.</para>
    </listitem>

    <listitem>
     <para>Улучшение в <filename>contrib/dblink</filename> передачи сообщений о низкоуровневых ошибках <application>libpq</application>, например, о нехватке памяти (Джо Конвей)</para>
    </listitem>

    <listitem>
     <para>Реализация <filename>contrib/dblink</filename> должна игнорировать невоспринимаемые ей параметры сервера, когда в качестве источника параметров подключения используется сторонний сервер <filename>contrib/postgres_fdw</filename> (Кори Хаинкер)</para>

     <para>Ранее, если объект стороннего сервера имел параметры, которые не относились к параметрам подключения <application>libpq</application>, происходила ошибка.</para>
    </listitem>

    <listitem>
     <para>Исправление проблем с переносимостью в функциях <filename>contrib/pageinspect</filename>, связанных с индексами GIN (Питер Эйзентраут, Том Лейн)</para>
    </listitem>

    <listitem>
     <para>В Windows изменённые переменные окружения должны передаваться и отладочным DLL (Кристина Ульрих)</para>
    </listitem>

    <listitem>
     <para>Синхронизация нашей копии библиотеки timezone с выпущенной IANA версией tzcode2016j (Том Лейн)</para>

     <para>Это решило ряд проблем; в частности, проблему при установке данных о часовых поясах в каталог, в котором не поддерживаются жёсткие ссылки.</para>
    </listitem>

    <listitem>
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016j, включающее изменения правил перехода на летнее время на Северном Кипре (добавление нового пояса Asia/Famagusta), в России (добавление нового пояса Europe/Saratov), в Тонга и в Антарктике/Кейси, плюс корректировку исторических данных для Италии, Казахстана, Мальты и Палестины. Переход к предпочитаемому числовому обозначению пояса для Тонга.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-5">
  <title>Выпуск 9.5.5</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-10-27</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.4. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.5</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если в вашей инсталляции проявилась ошибка, описанная в первой записи следующего списка изменений, после обновления вам может потребоваться предпринять дополнительные действия для исправления испорченных карт свободного места.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.5.2, см. <xref remap="4" linkend="release-9-5-2"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
     <para>Корректировка записи в WAL отметки об очистке карт свободного пространства и видимости (Паван Деоласи, Хейкки Линнакангас)</para>

     <para>Ранее могло получаться так, что эти файлы не восстанавливались корректно при восстановлении после сбоя или оказывались неправильными на резервном сервере. Обращение к недействительному содержимому карты свободного пространства могло повлечь попытки использовать страницы, которые были стёрты из самого отношения, что обычно приводило к ошибкам типа <quote>не удалось прочитать блок <replaceable>XXX</replaceable>: прочитано только 0 из 8192 байт</quote>. Также были возможны нарушения контрольных сумм в карте видимости, при включённом механизме контрольных сумм.</para>

     <para>Процедуры для определения наличия проблемы и её исправления рассматриваются в <ulink url="https://wiki.postgresql.org/wiki/Free_Space_Map_Problems"/>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [60893786d] 2016-09-03 13:28:53 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [36646d3af] 2016-09-03 13:28:53 -0400
Branch: REL9_5_STABLE [08a72872f] 2016-09-03 13:28:53 -0400
Branch: REL9_4_STABLE [a69443564] 2016-09-03 13:28:53 -0400
-->
     <para>Исправление некорректного создания в WAL записей, относящихся к индексам GIN, на машинах с порядком байт от старшего (Том Лейн)</para>

     <para>Типичным симптомом данной проблемы были ошибки <quote>unexpected GIN leaf action</quote> (неожиданное действие на уровне листьев GIN) при воспроизведении WAL.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [5c609a742] 2016-09-09 15:54:29 -0300
Branch: REL9_6_STABLE Release: REL9_6_0 [c3656c9ff] 2016-09-09 15:54:29 -0300
Branch: REL9_5_STABLE [f33765885] 2016-09-09 15:54:29 -0300
Branch: REL9_4_STABLE [8778da2af] 2016-09-09 15:54:29 -0300
Branch: REL9_3_STABLE [dfe7121df] 2016-09-09 15:54:29 -0300
-->
     <para>Исправление команды <command>SELECT FOR UPDATE/SHARE</command>, чтобы кортежи, изменённые впоследствии прерванной транзакцией, блокировались корректно (Альваро Эррера)</para>

     <para>Начиная с версии 9.5, команда <command>SELECT</command> иногда могла вообще не выдавать такие кортежи. Подтверждений того, что это могло иметь место в предыдущих версиях, не было, но теоретически при одновременных изменениях это возможно.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [96dd77d34] 2016-09-22 11:35:03 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [a88fe25f5] 2016-09-22 11:34:44 -0400
Branch: REL9_5_STABLE [c35917835] 2016-09-22 11:34:44 -0400
Branch: REL9_4_STABLE [d3dd00e67] 2016-09-22 11:34:44 -0400
Branch: REL9_3_STABLE [73df86a37] 2016-09-22 11:34:44 -0400
Branch: REL9_2_STABLE [8552f9b90] 2016-09-22 11:34:44 -0400
Branch: REL9_1_STABLE [0183df5dc] 2016-09-22 11:34:45 -0400
-->
     <para>Исправление перепроверок EvalPlanQual в ситуациях со сканированием CTE (Том Лейн)</para>

     <para>Перепроверка всегда воспринимала такие CTE, как не возвращающие строки, в результате чего обычно не удавалось изменить строки, которые были изменены недавно.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [07ef03512] 2016-08-17 17:03:36 -0700
Branch: REL9_6_STABLE Release: REL9_6_0 [e79aaebcc] 2016-08-17 17:03:36 -0700
Branch: REL9_5_STABLE [94bc30725] 2016-08-17 17:03:36 -0700
-->
     <para>Исправлено удаление спекулятивно добавленных кортежей TOAST при выходе из <command>INSERT ... ON CONFLICT</command> (Оскари Сааренмаа)</para>

     <para>В условиях гонки, когда две транзакции пытаются вставить конфликтующие кортежи, в проигравшей транзакции происходила ошибка <quote>попытка удаления невидимого кортежа</quote>, если при добавлении вставлялись поля TOAST.</para>
    </listitem>

    <listitem>
     <para>Предотвращение ошибок сериализации при операции добавлении данных, конфликтующей с собой же, в <command>INSERT ... ON CONFLICT</command> (Томас Мунро, Питер Геохеган)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [2c00fad28] 2016-08-24 14:38:12 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [616be05df] 2016-08-24 14:38:13 -0400
Branch: REL9_5_STABLE [25fe5f758] 2016-08-24 14:37:50 -0400
Branch: REL9_4_STABLE [08a823e53] 2016-08-24 14:37:51 -0400
Branch: REL9_3_STABLE [aaad96e40] 2016-08-24 14:37:51 -0400
Branch: REL9_2_STABLE [237663897] 2016-08-24 14:37:51 -0400
Branch: REL9_1_STABLE [3570ea424] 2016-08-24 14:37:51 -0400
-->
     <para>Исправление некорректного повторения предыдущих результатов агрегирования по хешу в подзапросе (Эндрю Гирт)</para>

     <para>Проверка возможности повторного использования ранее вычисленной хеш-таблицы со значениями состояния агрегата не учитывала то, что в выражении агрегируемого аргумента могла фигурировать ссылка на внешний запрос. В этом случае изменение в значении этой ссылки должно было приводить к пересчёту хеш-таблицы, но этого не происходило.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ae4760d66] 2016-08-24 22:20:25 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [006fb80a5] 2016-08-24 22:20:26 -0400
Branch: REL9_5_STABLE [46bd14a10] 2016-08-24 22:20:01 -0400
Branch: REL9_4_STABLE [566afa15c] 2016-08-24 22:20:01 -0400
-->
     <para>Ликвидирована утечка памяти на протяжении запроса в массовой команде <command>UPDATE</command> для таблицы с индексом <literal>PRIMARY KEY</literal> или <literal>REPLICA IDENTITY</literal> (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Исправление <command>COPY</command> со списком имён столбцов из таблицы, в которой включена защита на уровне строк (Адам Брайтвелл)</para>
    </listitem>

    <listitem>
     <para>Исправление <command>EXPLAIN</command>, чтобы она выдавала корректный XML, когда параметр <xref linkend="guc-track-io-timing"/> включён (Маркус Винанд)</para>

     <para>Ранее вывод в формате XML содержал синтаксически некорректные теги, как например <literal>&lt;I/O-Read-Time&gt;</literal>. Сейчас выдаётся такой тег: <literal>&lt;I-O-Read-Time&gt;</literal>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL9_6_BR [4b234fd8b] 2016-08-12 12:13:04 -0400
Branch: REL9_5_STABLE [ed2d7b8c8] 2016-08-12 12:13:04 -0400
Branch: REL9_4_STABLE [85974b468] 2016-08-12 12:13:04 -0400
Branch: REL9_3_STABLE [16cc6d23b] 2016-08-12 12:13:04 -0400
Branch: REL9_2_STABLE [ceb005319] 2016-08-12 12:13:04 -0400
-->
     <para>Подавление вывода нулей для неизмеренного времени в <command>EXPLAIN</command> (Максим Милютин)</para>

     <para>При определённом сочетании параметров команда <command>EXPLAIN</command> выдавала нулевые значения для того времени, которое на самом деле даже не замеряется при этих параметрах. Мы придерживаемся политики не выдавать такие поля в выводе <command>EXPLAIN</command>, так что нужно обеспечить согласованность во всех случаях.</para>
    </listitem>

    <listitem>
     <para>Исправление обновления статистики при <command>TRUNCATE</command> в подготовленной транзакции (Стас Кельвич)</para>
    </listitem>

    <listitem>
<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [dcb12ce8d] 2016-09-06 15:35:47 +0100
Branch: REL9_6_STABLE Release: REL9_6_0 [1fa42debe] 2016-09-09 11:43:08 +0100
Branch: REL9_5_STABLE [f3b3e871e] 2016-09-09 11:43:46 +0100
Branch: REL9_4_STABLE [81b0f8204] 2016-09-09 11:44:54 +0100
Branch: REL9_3_STABLE [e1dddf3e8] 2016-09-09 11:45:16 +0100
Branch: REL9_2_STABLE [eaf6fe7fa] 2016-09-09 11:45:40 +0100
Branch: REL9_1_STABLE [3ed7f54bc] 2016-09-09 11:46:03 +0100
-->
     <para>Исправление длительности таймаута, установленного для ожидания командой <command>VACUUM</command> исключительной блокировки, чтобы она могла опустошить таблицу (Саймон Риггс)</para>

     <para>Длительность таймаута должна была составлять 50 миллисекунд, но на самом деле это было лишь 50 микросекунд, в результате чего команда <command>VACUUM</command> оставляла попытку опустошить таблицу гораздо раньше, чем планировалось. Теперь устанавливается запланированное значение.</para>
    </listitem>

    <listitem>
     <para>Исправление ошибок при объединении наследуемых ограничений <literal>CHECK</literal> в процессе создания или изменения структуры таблицы (Том Лейн, Амит Ланготе)</para>

     <para>Теперь одинаковые ограничения <literal>CHECK</literal> могут добавляться в родительскую и дочернюю таблицу в любом порядке. С другой стороны, слияние проверенного ограничения из родительской таблицы с непроверенным (<literal>NOT VALID</literal>) ограничением в дочерней не должно допускаться. Подобным образом, не должно допускаться слияние дочернего ненаследуемого (<literal>NO INHERIT</literal>) ограничения с наследуемым.</para>
    </listitem>

    <listitem>
     <para>Вывод разумного значения в <structname>pg_settings</structname>.<structfield>unit</structfield> для параметров <varname>min_wal_size</varname> и <varname>max_wal_size</varname> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL9_6_BR [9389fbd03] 2016-08-14 15:06:01 -0400
Branch: REL9_5_STABLE [635651214] 2016-08-14 15:06:01 -0400
Branch: REL9_4_STABLE [4ac3d7794] 2016-08-14 15:06:01 -0400
Branch: REL9_3_STABLE [e8e20aadd] 2016-08-14 15:06:02 -0400
Branch: REL9_2_STABLE [9d5bf77b5] 2016-08-14 15:06:02 -0400
Branch: REL9_1_STABLE [7e01c8ef3] 2016-08-14 15:06:02 -0400
-->
     <para>Ликвидация искусственных ограничений на значения, принимаемые функциями <function>numeric_in()</function> и <function>numeric_recv()</function> (Том Лейн)</para>

     <para>Мы принимаем числовые значения, не превышающие предела хранения (больше <literal>1e100000</literal>), поэтому кажется довольно неразумным, что <function>numeric_in()</function> не принимала в научной записи экспоненты больше 1000. Также нет смысла не принимать в <function>numeric_recv()</function> более 1000 цифр во вводимом значении.</para>
    </listitem>

    <listitem>
     <para>Предотвращение очень маловероятного повреждения данных в результате проверки видимости кортежа без удержания блокировки буфера (Томас Мунро, Питер Геохеган, Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Сохранение времени фиксирования транзакций после перезагрузки сервера (Жульен Рохо, Крейг Рингер)</para>

     <para>При включённом параметре <xref linkend="guc-track-commit-timestamp"/> старые метки времени фиксации становились недоступными после полной перезагрузки сервера.</para>
    </listitem>

    <listitem>
     <para>Исправление логического декодирования WAL в случаях, когда вывод WAL из подтранзакции оказывался слишком большим и вымещался на диск (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [008c4135c] 2016-08-22 15:22:11 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [48b9ca0b6] 2016-08-22 15:30:31 -0400
Branch: REL9_5_STABLE [da9659f87] 2016-08-22 15:30:37 -0400
-->
     <para>Исправление возможной ошибки сортировки при прекращении использования сокращённых ключей (Питер Геохеган)</para>

     <para>В худшем случае это могло приводить к повреждению индекса-B-дерева, что потребует перестроить его с помощью команды <command>REINDEX</command>. Но, как нам представляется, такие ситуации очень редки.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [769fd9d8e] 2016-09-08 16:51:09 -0700
Branch: REL9_6_STABLE Release: REL9_6_0 [f6802936a] 2016-09-08 16:52:13 -0700
Branch: REL9_5_STABLE [26ce63ce7] 2016-09-08 16:52:13 -0700
Branch: REL9_4_STABLE [075cfbe4a] 2016-09-08 16:52:13 -0700
Branch: REL9_3_STABLE [d2a5b2b28] 2016-09-08 16:52:13 -0700
Branch: REL9_2_STABLE [f5462dedb] 2016-09-08 16:52:13 -0700
Branch: REL9_1_STABLE [08fdfe7a8] 2016-09-08 16:52:13 -0700
-->
     <para>Ликвидация утечки дескриптора файла, имевшей место при опустошении временного отношения размером более 1 Гбайта (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0e0f43d6f] 2016-08-31 08:52:13 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [3fc489cb3] 2016-08-31 08:52:13 -0400
Branch: REL9_5_STABLE [c40bb1155] 2016-08-31 08:52:13 -0400
Branch: REL9_4_STABLE [f4e40537e] 2016-08-31 08:52:13 -0400
Branch: REL9_3_STABLE [baf111d31] 2016-08-31 08:52:13 -0400
Branch: REL9_2_STABLE [823df401d] 2016-08-31 08:52:13 -0400
Branch: REL9_1_STABLE [e3439a455] 2016-08-31 08:52:13 -0400
-->
     <para>Запрещение запуска самостоятельного обслуживающего процесса при включённом режиме <literal>standby_mode</literal> (Мишель Пакье)</para>

     <para>Такой режим не будет ничем полезен, так как никакой процесс-приёмник WAL не сможет получать данные WAL; и это может привести к некорректному поведению кода, который не рассчитан на такую ситуацию.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [2d7e59100] 2016-08-17 13:15:03 -0700
Branch: REL9_6_STABLE Release: REL9_6_0 [8cb23dba8] 2016-08-17 13:15:03 -0700
Branch: REL9_5_STABLE [de396a1cb] 2016-08-17 13:15:03 -0700
Branch: REL9_4_STABLE [690a2fb90] 2016-08-17 13:15:04 -0700
-->
     <para>Исправление инициализации состояния слота репликации при повторном использовании слота (Мишель Пакье)</para>

     <para>В результате того, что не все поля слота сбрасывались, команда <command>VACUUM</command> могла не удалять «мёртвые» кортежи.</para>
    </listitem>

    <listitem>
     <para>Округление размера запроса разделяемой памяти до числа, кратного размеру огромной страницы, когда огромные страницы используются в Linux (Том Лейн)</para>

     <para>Это позволяет избежать возможных сбоев в <function>munmap()</function> в системах с нетипичными размерами огромных страниц. За исключением случаев краха, эти сбои проявлялись только в сообщениях в журнале.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [470d886c3] 2016-09-20 12:26:29 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [92668cd4d] 2016-09-20 12:28:02 -0400
Branch: REL9_5_STABLE [b1aed95f5] 2016-09-20 12:30:38 -0400
Branch: REL9_4_STABLE [626312d1b] 2016-09-20 12:30:42 -0400
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [49a91b88e] 2016-09-23 09:54:11 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [b251379fb] 2016-09-23 09:54:11 -0400
Branch: REL9_5_STABLE [93528f7b4] 2016-09-23 09:54:11 -0400
Branch: REL9_4_STABLE [32cdf680f] 2016-09-23 09:54:11 -0400
-->
     <para>Выбор более случайного значения для идентификатора управляющего сегмента динамической разделяемой памяти (Роберт Хаас, Том Лейн)</para>

     <para>Ранее каждый раз выбиралось одно и то же значение, потому что оно получалось из <function>random()</function>, но <function>srandom()</function> к этому моменту ещё не вызывалась. Это относительно безвредно, однако планировалось другое поведение.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [419113dfd] 2016-09-20 12:04:41 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [6bcd26c43] 2016-09-20 12:12:27 -0400
Branch: REL9_5_STABLE [c124e3649] 2016-09-20 12:12:31 -0400
Branch: REL9_4_STABLE [c23b2523d] 2016-09-20 12:12:36 -0400
-->
     <para>В Windows нужно повторять попытку создания управляющего сегмента динамической разделяемой памяти после ошибки «нет доступа» (Киотаро Хоригучи, Амит Капила)</para>

     <para>Иногда Windows выдаёт ошибку <literal>ERROR_ACCESS_DENIED</literal> вместо <literal>ERROR_ALREADY_EXISTS</literal>, когда такой сегмент уже существует. Получая такую ошибку, главный процесс не мог запуститься, считая, что столкнулся с неисправимой ошибкой.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [5697522d8] 2016-08-18 14:49:08 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [c81c71d88] 2016-08-18 14:48:51 -0400
Branch: REL9_5_STABLE [a8fc19505] 2016-08-18 14:48:51 -0400
-->
     <para>Исправление в <application>PL/pgSQL</application> поведения с параметрами и локальными переменными типов <type>int2vector</type> и <type>oidvector</type> (Том Лейн)</para>
    </listitem>

    <listitem>
     <para>Не пытаться разделять контекст SSL между несколькими подключениями в <application>libpq</application> (Хейкки Линнакангас)</para>

     <para>Такое разделение приводило к разнообразным ошибкам, особенно при попытке использования различных параметров SSL для разных соединений.</para>
    </listitem>

    <listitem>
     <para>Предотвращение утечек памяти в особых случаях в <application>libpq</application> (Том Лейн)</para>

     <para>Поступило сообщение об утечке в процессе <function>PQreset()</function>, но были возможны проявления и в связанных случаях.</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [3fcc98c99] 2016-09-18 13:46:32 +0300
Branch: REL9_6_STABLE Release: REL9_6_0 [e06728d63] 2016-09-18 13:56:11 +0300
Branch: REL9_5_STABLE [7c177ddc2] 2016-09-18 13:56:52 +0300
Branch: REL9_4_STABLE [d48e10a68] 2016-09-18 13:59:57 +0300
Branch: REL9_3_STABLE [b31f335bf] 2016-09-18 14:00:10 +0300
Branch: REL9_2_STABLE [a4a3fac16] 2016-09-18 14:00:13 +0300
Branch: REL9_1_STABLE [ed29d2de2] 2016-09-18 14:07:30 +0300
-->
     <para>Согласование поведения параметров <option>--help</option> и <option>--version</option> программы <application>ecpg</application> со всеми остальными нашими программами (Харибабу Комми)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [40c3fe498] 2016-09-19 22:55:43 +0300
Branch: REL9_6_STABLE Release: REL9_6_0 [f65764a04] 2016-09-19 22:55:50 +0300
Branch: REL9_5_STABLE [edb5c4097] 2016-09-19 22:58:03 +0300
Branch: REL9_4_STABLE [476945c45] 2016-09-19 22:59:44 +0300
Branch: master [65c655638] 2016-09-21 13:14:48 +0300
Branch: REL9_6_STABLE Release: REL9_6_0 [93834a20f] 2016-09-21 13:16:02 +0300
Branch: REL9_5_STABLE [b93d37474] 2016-09-21 13:16:20 +0300
Branch: REL9_4_STABLE [f16d4a241] 2016-09-21 13:16:24 +0300
-->
     <para>Исправление расчёта средней задержки в <application>pgbench</application> (Фабьен Коэльо)</para>

     <para>Этот расчёт был неверным при наличии в скрипте команд <literal>\sleep</literal> или когда длительность теста ограничивалась числом транзакций, а не общим временем.</para>
    </listitem>

    <listitem>
     <para>В <application>pg_upgrade</application> проверка загружаемости библиотек должна производиться по порядку имён (Том Лейн)</para>

     <para>Это обходное решение проблемы зависимостей между расширениями, образуемых связями модулей трансформации языков с базовыми модулями самих языков и типов данных.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [12f6eadff] 2016-09-23 13:49:26 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [7e02476f3] 2016-09-23 13:49:26 -0400
Branch: REL9_5_STABLE [96e16d739] 2016-09-23 13:49:26 -0400
Branch: REL9_4_STABLE [912ea1945] 2016-09-23 13:49:27 -0400
Branch: REL9_3_STABLE [f39bb487d] 2016-09-23 13:49:27 -0400
Branch: REL9_2_STABLE [53b29d986] 2016-09-23 13:49:27 -0400
-->
     <para>Программа <application>pg_dump</application> никогда не должна выгружать функции-конструкторы диапазонов (Том Лейн)</para>

     <para>В результате такой выгрузки программа <application>pg_upgrade</application> не могла справиться с расширениями, включающими диапазонные типы, пытаясь дважды создать их функции-конструкторы.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e97e9c57b] 2016-09-08 10:48:03 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [a88cee90f] 2016-09-08 10:48:03 -0400
Branch: REL9_5_STABLE [142a110b3] 2016-09-08 10:48:03 -0400
-->
     <para>При запуске <application>pg_dump</application> с ключом <option>-C</option> должно подавляться предложение <literal>TABLESPACE</literal> команды <command>CREATE DATABASE</command>, если указан ключ <option>--no-tablespaces</option> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [49340627f] 2016-08-29 12:16:18 +0100
Branch: REL9_6_STABLE Release: REL9_6_0 [216fd7fe7] 2016-08-29 12:18:12 +0100
Branch: REL9_5_STABLE [9050e5c89] 2016-08-29 12:18:57 +0100
Branch: REL9_5_STABLE [3aa233f82] 2016-08-29 18:12:04 -0300
-->
     <para>Исправление работы <application>pg_receivexlog</application> с ключом <option>--synchronous</option> без слотов (Габриэль Бартолини)</para>
    </listitem>

    <listitem>
     <para>Недопущение одновременного указания аргументов <option>--source-server</option> и <option>--source-target</option> для <application>pg_rewind</application> (Михаэль Банк)</para>
    </listitem>

    <listitem>
     <para>Программа <application>pg_rewind</application> должна отключать <varname>synchronous_commit</varname> в своём сеансе на исходном сервере (Михаэль Банк, Мишель Пакье)</para>

     <para>При этом <application>pg_rewind</application> сможет работать, даже когда на исходном сервере настроена синхронная репликация, но она по какой-то причине не функционирует.</para>
    </listitem>

    <listitem>
     <para>В <application>pg_xlogdump</application> нужно повторять попытку открыть новый сегмент WAL, когда используется параметр <option>--follow</option> (Магнус Хагандер)</para>

     <para>Это позволяет справиться с возможной задержкой при создании сервером следующего сегмента.</para>
    </listitem>

    <listitem>
<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [bab7823a4] 2016-08-29 14:34:58 +0900
Branch: REL9_6_STABLE Release: REL9_6_0 [2802b02a5] 2016-08-29 14:35:40 +0900
Branch: REL9_5_STABLE [7dfb9b479] 2016-08-29 14:35:51 +0900
Branch: REL9_4_STABLE [314a25fb3] 2016-08-29 14:38:17 +0900
Branch: REL9_3_STABLE [5833306dd] 2016-08-29 15:51:30 +0900
-->
     <para>Исправление программы <application>pg_xlogdump</application>, чтобы она корректно работала с файлом WAL, начинающимся с записи продолжения, располагающейся на нескольких страницах (Паван Деоласи)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [8a503526e] 2016-09-15 09:30:38 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [bea38f34a] 2016-09-15 09:30:37 -0400
Branch: REL9_5_STABLE [60b6d99da] 2016-09-15 09:30:36 -0400
Branch: REL9_4_STABLE [1336bd986] 2016-09-15 09:22:52 -0400
-->
     <para>Исправление <filename>contrib/pg_buffercache</filename> для работы со значением <varname>shared_buffers</varname>, превышающим 256 Гбайт (КайГай Кохей)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6657acc01] 2016-08-17 15:51:10 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [d715b76d1] 2016-08-17 15:51:10 -0400
Branch: REL9_5_STABLE [509815ed7] 2016-08-17 15:51:10 -0400
Branch: REL9_4_STABLE [3fa8ec44d] 2016-08-17 15:51:10 -0400
Branch: REL9_3_STABLE [7baa8bfca] 2016-08-17 15:51:10 -0400
Branch: REL9_2_STABLE [60bb1bb12] 2016-08-17 15:51:11 -0400
Branch: REL9_1_STABLE [9942376a5] 2016-08-17 15:51:11 -0400
-->
     <para>Исправление скрипта <filename>contrib/intarray/bench/bench.pl</filename>, чтобы он выводил результаты команды <command>EXPLAIN</command>, которую он выполняет при запуске с ключом <option>-e</option> (Даниэль Густафсон)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [593d4e47d] 2016-09-15 14:42:29 +0300
Branch: REL9_6_STABLE Release: REL9_6_0 [fcd93e4af] 2016-09-15 12:55:38 +0300
Branch: REL9_5_STABLE [e2838c580] 2016-09-15 14:51:42 +0300
Branch: master [5c6df67e0] 2016-09-15 22:52:51 +0300
Branch: REL9_6_STABLE Release: REL9_6_0 [9895818d5] 2016-09-15 22:45:08 +0300
Branch: REL9_5_STABLE [48e5ba61e] 2016-09-15 22:38:01 +0300
-->
     <para>Поддержка OpenSSL 1.1.0 (Хейкки Линнакангас)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [c3a081846] 2016-09-23 15:50:00 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [5a83e2d4e] 2016-09-23 15:50:00 -0400
Branch: REL9_5_STABLE [025c9a722] 2016-09-23 15:50:00 -0400
Branch: REL9_4_STABLE [5d41f27a9] 2016-09-23 15:50:00 -0400
-->
     <para>Внедрение инфраструктуры тестирования TAP, чтобы её можно было применять для тестирования расширений (Крейг Рингер)</para>

     <para>Когда <productname>PostgreSQL</productname> конфигурируется с параметром <option>--enable-tap-tests</option>, теперь команда <quote>make install</quote> будет устанавливать файлы поддержки Perl для тестирования TAP туда, где PGXS сможет найти их. Благодаря этому внешние расширения смогут использовать <literal>$(prove_check)</literal> без дополнительных проверок.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [8614b39bc] 2016-09-19 14:25:57 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [156f974f5] 2016-09-19 14:27:04 -0400
Branch: REL9_5_STABLE [52acf020a] 2016-09-19 14:27:08 -0400
Branch: REL9_4_STABLE [ca93b816f] 2016-09-19 14:27:13 -0400
-->
     <para>В сборках MSVC программа <application>pg_recvlogical</application> включена в клиентский набор (МауМау)</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [a79a68562] 2016-08-18 12:32:42 +0200
Branch: REL9_6_STABLE Release: REL9_6_0 [191d45793] 2016-08-18 12:37:55 +0200
Branch: REL9_5_STABLE [a0833b972] 2016-08-18 15:35:12 +0200
Branch: REL9_4_STABLE [1d990cd8c] 2016-08-18 15:35:26 +0200
Branch: REL9_3_STABLE [e8aed974b] 2016-08-18 15:35:36 +0200
Branch: REL9_2_STABLE [35982db49] 2016-08-18 15:35:43 +0200
-->
     <para>Корректировка сопоставления часовых поясов в Windows, чтобы сервер корректно распознавал имена часовых поясов, появившиеся в последних версиях Windows (Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [39b691f25] 2016-09-02 17:30:02 -0400
Branch: REL9_6_STABLE Release: REL9_6_0 [32c9950b3] 2016-09-02 17:29:31 -0400
Branch: REL9_5_STABLE [73a802a41] 2016-09-02 17:29:31 -0400
Branch: REL9_4_STABLE [7430ac852] 2016-09-02 17:29:32 -0400
Branch: REL9_3_STABLE [ee78d4885] 2016-09-02 17:29:32 -0400
Branch: REL9_2_STABLE [1195b8efe] 2016-09-02 17:29:32 -0400
Branch: REL9_1_STABLE [380dad29d] 2016-09-02 17:29:32 -0400
-->
     <para>Предупреждение ошибок при использовании устаревших аббревиатур динамических часовых поясов (Том Лейн)</para>

     <para>Если аббревиатуре динамического часового пояса не соответствует запись в данных часового пояса, считать её равнозначной имени часового пояса. Это предупреждает неожиданные ошибки, когда IANA удаляет аббревиатуры из своей базы данных часовых поясов, что произошло в выпуске <application>tzdata</application> 2016f и, вполне вероятно, повторится в будущем. Вследствие этого не только не распознавались отдельные аббревиатуры; при любом расхождении происходил сбой в представлении <structname>pg_timezone_abbrevs</structname>.</para>
    </listitem>

    <listitem>
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016h, включающее изменение правил перехода на летнее время в Палестине и Турции, а также исторические изменения для Турции и некоторых регионов России. Переход к числовым аббревиатурам для некоторых часовых поясов в Антарктике, бывшем Советском Союзе и на Шри-Ланке.</para>

     <para>Ранее в базе данных часовых поясов IANA предоставлялись текстовые аббревиатуры для всех часовых поясов и иногда при этом указывались аббревиатуры, которые практически не употреблялись местным населением. Сейчас происходит процесс ухода от этой практики в пользу использования числовых смещений UTC в тех часовых поясах, где нет никаких свидетельств реального использования английской аббревиатуры. Как минимум на данном этапе, <productname>PostgreSQL</productname> продолжит принимать подобные удалённые аббревиатуры при вводе дат/времени. Но они не будут видны при просмотре представления <structname>pg_timezone_names</structname> и не будут выводиться с датами/временем.</para>

     <para>Начиная с этого выпуска, аббревиатура <literal>AMT</literal> более не считается занятой часовым поясом Армении. Поэтому мы изменили значение этой аббревиатуры по умолчанию, чтобы она обозначала Амазонское время (Amazon Time), так что теперь она означает UTC-4, а не UTC+4.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-4">
  <title>Выпуск 9.5.4</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-08-11</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.3. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.4</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы обновляете сервер с версии, более ранней, чем 9.5.2, см. <xref remap="4" linkend="release-9-5-2"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f0c7b789a] 2016-08-08 10:33:46 -0400
Branch: REL9_5_STABLE [98b0c6280] 2016-08-08 10:33:46 -0400
Branch: REL9_4_STABLE [f40618092] 2016-08-08 10:33:47 -0400
Branch: REL9_3_STABLE [6c954a6a5] 2016-08-08 10:33:47 -0400
Branch: REL9_2_STABLE [8b32516db] 2016-08-08 10:33:47 -0400
Branch: REL9_1_STABLE [5327b764a] 2016-08-08 10:33:47 -0400
-->
     <para>Исправление некорректного вычисления вложенных выражений <literal>CASE</literal>-<literal>WHEN</literal> (Хейкки Линнакангас, Мишель Пакье, Том Лейн)</para>

     <para>Выражение <literal>CASE</literal>, фигурирующее в подвыражении проверки другого выражения <literal>CASE</literal>, могло некорректно оценивать, отличается ли его собственное проверяемое значение от NULL. Кроме того, встраивание SQL-функции, реализующей оператор равенства, который используется выражением <literal>CASE</literal>, может привести к передаче неправильного проверяемого значения функциям, вызываемым в выражении <literal>CASE</literal> в теле функции SQL. Если же проверяемые значения оказываются разных типов, возможен сбой; более того, это может эксплуатироваться для несанкционированного чтения областей памяти сервера. (CVE-2016-5423)</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [fcd15f135] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [286c8bc64] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [254eb04f1] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [95a6855c5] 2016-08-08 10:07:52 -0400
Branch: REL9_2_STABLE [e8f4922c8] 2016-08-08 10:07:53 -0400
Branch: REL9_1_STABLE [a2385cac1] 2016-08-08 10:07:54 -0400
Branch: master [41f18f021] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [8adff3783] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [6df8ff49d] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [c1b048f49] 2016-08-08 10:07:52 -0400
Branch: REL9_2_STABLE [f1d0b09cf] 2016-08-08 10:07:53 -0400
Branch: REL9_1_STABLE [d2dd5df51] 2016-08-08 10:07:54 -0400
Branch: REL9_2_STABLE [a19edcd24] 2016-08-08 10:07:53 -0400
Branch: REL9_1_STABLE [c761c9fee] 2016-08-08 10:07:54 -0400
Branch: master [bd6537185] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [2e5e90d8d] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [18392ed4a] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [395d565ac] 2016-08-08 10:07:52 -0400
Branch: REL9_2_STABLE [483715529] 2016-08-08 10:07:53 -0400
Branch: REL9_1_STABLE [2d69f5b12] 2016-08-08 10:07:54 -0400
Branch: master [142c24c23] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [ec3aebdbd] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [6bec1a6c8] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [0f679d2c1] 2016-08-08 10:07:52 -0400
Branch: REL9_2_STABLE [ffbdab65d] 2016-08-08 10:07:53 -0400
Branch: REL9_1_STABLE [61c2cd88d] 2016-08-08 10:07:53 -0400
Branch: master [c40071717] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [640768ceb] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [aed038795] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [05abd3bcf] 2016-08-08 10:07:52 -0400
Branch: REL9_2_STABLE [a466ea33c] 2016-08-08 10:07:52 -0400
Branch: REL9_1_STABLE [ba8c4089d] 2016-08-08 10:07:53 -0400
Branch: master [9d924e9a6] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [6655c0757] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [afabfcc0e] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [dfb2d8039] 2016-08-08 10:07:51 -0400
Branch: REL9_2_STABLE [f744e8906] 2016-08-08 10:07:52 -0400
Branch: REL9_1_STABLE [cf7e5f55b] 2016-08-08 10:07:53 -0400
Branch: master [984e5beb3] 2016-08-08 10:07:46 -0400
Branch: REL9_5_STABLE [db951dd19] 2016-08-08 10:07:50 -0400
Branch: REL9_4_STABLE [fed83cdac] 2016-08-08 10:07:51 -0400
Branch: REL9_3_STABLE [a44d71351] 2016-08-08 10:07:51 -0400
Branch: REL9_2_STABLE [0cc3b12d2] 2016-08-08 10:07:52 -0400
Branch: REL9_1_STABLE [aed766ab5] 2016-08-08 10:07:53 -0400
-->
     <para>Корректировка в клиентских программах обработки специальных символов в именах ролей и баз данных (Ной Миш, Натан Боссарт, Мишель Пакье)</para>

     <para>Программа <application>vacuumdb</application> и другие клиентские утилиты во многих местах могли некорректно воспринимать имена ролей и баз данных, включающие кавычки или обратную косую черту. Теперь проверки ужесточены во избежание рисков. Также, когда этим программам вместо имени базы передаётся строка подключения, она обрабатывается должным образом.</para>

     <para>Приведение в соответствие с документацией правил обработки пар двойных кавычек в командах <application>psql</application> <command>\connect</command> и <command>\password</command>.</para>

     <para>Введение нового параметра <option>-reuse-previous</option> для команды <application>psql</application> <command>\connect</command>, позволяющего явно указывать, должны ли повторно использоваться параметры предыдущего подключения. (Без данного параметра это, как и раньше, зависит от того, похоже ли имя базы данных на строку подключения.) Это позволяет безопасно оперировать с именами баз данных, содержащими специальные символы, в скриптах <application>pg_dumpall</application>.</para>

     <para><application>pg_dumpall</application> теперь не будет принимать имена ролей или баз данных, содержащие символы перевода строки или возврата каретки, так как безопасно экранировать эти символы в Windows не представляется практичным. В будущем мы можем запретить такие имена и на стороне сервера, но пока это не сделано.</para>

     <para>Эти коррективы считаются исправлениями уязвимостей, так как, сконструировав имена объектов специальным образом (используя спецсимволы), можно было сформировать произвольные команды, которые выполнятся с правами суперпользователя, когда суперпользователь будет выполнять <application>pg_dumpall</application> или другие операции обслуживания базы. (CVE-2016-5424)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4452000f3] 2016-07-26 15:25:02 -0400
Branch: REL9_5_STABLE [d2ef7758d] 2016-07-26 15:25:02 -0400
Branch: REL9_4_STABLE [0733188cc] 2016-07-26 15:25:02 -0400
Branch: REL9_3_STABLE [c235d510e] 2016-07-26 15:25:02 -0400
Branch: REL9_2_STABLE [bcdd8a194] 2016-07-26 15:25:02 -0400
Branch: REL9_1_STABLE [d243bf77c] 2016-07-26 15:25:02 -0400
Branch: master [9492cf86e] 2016-07-28 16:09:15 -0400
Branch: REL9_5_STABLE [1e2f96f0a] 2016-07-28 16:09:15 -0400
Branch: REL9_4_STABLE [66f7e4081] 2016-07-28 16:09:15 -0400
Branch: REL9_3_STABLE [069714387] 2016-07-28 16:09:15 -0400
Branch: REL9_2_STABLE [7b8526e5d] 2016-07-28 16:09:15 -0400
Branch: REL9_1_STABLE [c0e5096fc] 2016-07-28 16:09:15 -0400
-->
     <para>Исправление некорректного в особых случаях поведения проверок <literal>IS NULL</literal>/<literal>IS NOT NULL</literal>, применяемых к вложенным составным значениям (Эндрю Гирт, Том Лейн)</para>

     <para>В стандарте SQL говорится, что проверка <literal>IS NULL</literal> должна возвращать TRUE для строки со всеми значениями NULL (то есть <literal>ROW(NULL,NULL) IS NULL</literal> выдаёт TRUE), но это не должно действовать рекурсивно (то есть, <literal>ROW(NULL, ROW(NULL,NULL)) IS NULL</literal> выдаёт FALSE). В основном исполнителе это реализовано правильно, но при некоторых оптимизациях планировщика эта проверка рассматривалась как рекурсивная (и TRUE выдавалось в обоих случаях), кроме того, обёртка <filename>contrib/postgres_fdw</filename> тоже могла выдавать удалённые запросы с подобным некорректным поведением.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [eae1ad9b6] 2016-05-23 19:23:36 -0400
Branch: REL9_5_STABLE [e504d915b] 2016-05-23 19:23:36 -0400
-->
     <para>Исправление ошибки <quote>unrecognized node type</quote> (нераспознанный тип узла) при <command>INSERT ... ON CONFLICT</command> в рекурсивном CTE (элементе <literal>WITH</literal>) (Питер Геохеган)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [26e66184d] 2016-05-11 16:20:23 -0400
Branch: REL9_5_STABLE [58d802410] 2016-05-11 16:20:03 -0400
-->
     <para>Исправление в <command>INSERT ... ON CONFLICT</command> сопоставления предикатов или выражений индексов, которые были упрощены планировщиком на стадии предобработки выражений (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9c810a2ed] 2016-07-04 16:09:11 -0400
Branch: REL9_5_STABLE [31ce32ade] 2016-07-04 16:09:11 -0400
-->
     <para>Правильная обработка нарушений ограничений-исключений, которые применяются к целевой таблице команды <literal>INSERT ... ON CONFLICT</literal>, но не являются решающими индексами (Том Лейн)</para>

     <para>В таких случаях должна выдаваться обычная ошибка нарушения ограничения, но вместо этого код попадал в бесконечный цикл.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8a13d5e6d] 2016-05-11 17:06:53 -0400
Branch: REL9_5_STABLE [428484ce1] 2016-05-11 17:06:53 -0400
-->
     <para>Исправление <command>INSERT ... ON CONFLICT</command>, чтобы при наличии в целевой таблице уникального индекса по OID не происходила ошибка (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4c56f3269] 2016-06-16 17:16:32 -0400
Branch: REL9_5_STABLE [a41b14f94] 2016-06-16 17:16:40 -0400
Branch: REL9_4_STABLE [2a8b5d210] 2016-06-16 17:16:44 -0400
Branch: REL9_3_STABLE [519445ba2] 2016-06-16 17:16:48 -0400
Branch: REL9_2_STABLE [f66e0fec3] 2016-06-16 17:16:53 -0400
Branch: REL9_1_STABLE [7b97dafa2] 2016-06-16 17:16:58 -0400
-->
     <para>Недопущение для типов данных <type>inet</type> и <type>cidr</type> входных адресов IPv6 со слишком большим количеством разделённых двоеточиями полей (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [278148907] 2016-07-16 14:42:37 -0400
Branch: REL9_5_STABLE [884bae143] 2016-07-16 14:42:37 -0400
Branch: REL9_4_STABLE [59fa0195c] 2016-07-16 14:42:37 -0400
Branch: REL9_3_STABLE [16e28fcec] 2016-07-16 14:42:37 -0400
Branch: REL9_2_STABLE [89b301104] 2016-07-16 14:42:37 -0400
Branch: REL9_1_STABLE [608cc0c41] 2016-07-16 14:42:37 -0400
-->
     <para>Предотвращение сбоя в <function>close_ps()</function> (операторе <type>point</type> <literal>##</literal> <type>lseg</type>) для входных координат NaN (Том Лейн)</para>

     <para>В таких случаях должен просто возвращаться NULL.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0daeba0e9] 2016-07-01 11:40:33 -0400
Branch: REL9_5_STABLE [40d0bd8d5] 2016-07-01 11:40:22 -0400
Branch: REL9_4_STABLE [b25d87f91] 2016-07-01 11:40:22 -0400
Branch: REL9_3_STABLE [b0f20c2ea] 2016-07-01 11:40:22 -0400
-->
     <para>Предотвращение сбоя в функции <function>pg_get_expr()</function>, когда ей передаются несогласованные значения (Мишель Пакье, Томас Мунро)</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [9a46324fd] 2016-08-08 11:12:59 -0400
Branch: REL9_5_STABLE [04cee8f83] 2016-08-08 11:13:25 -0400
Branch: REL9_4_STABLE [20f870fd7] 2016-08-08 11:13:34 -0400
Branch: REL9_3_STABLE [43d7a0af5] 2016-08-08 11:13:40 -0400
Branch: REL9_2_STABLE [b0134fe84] 2016-08-08 11:13:45 -0400
Branch: REL9_1_STABLE [d555d2642] 2016-08-08 11:13:51 -0400
-->
     <para>Исправление в нескольких местах выхода на один байт за границу буфера в <function>to_number()</function> (Питер Эйзентраут)</para>

     <para>В некоторых случаях функция <function>to_number()</function> могла читать из входной строки на один символ больше, чем нужно. Это создавало небольшой риск сбоя в случае расположения входной строки у края блока памяти.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [874fe3aea] 2016-06-27 15:57:50 -0400
Branch: REL9_5_STABLE [1651b9aa2] 2016-06-27 15:57:21 -0400
Branch: REL9_4_STABLE [dc9e03bf4] 2016-06-27 15:57:21 -0400
Branch: REL9_3_STABLE [17bfef80e] 2016-06-27 15:57:21 -0400
-->
     <para>Планировщик не должен запускаться для запроса, заданного в операторе <literal>CREATE MATERIALIZED VIEW</literal> или <literal>CREATE TABLE AS</literal> с указанием <literal>WITH NO DATA</literal> (Мишель Пакье, Том Лейн)</para>

     <para>Это предотвращает некоторые лишние условия ошибки, например, когда стабильная функция, вызываемая материализованным представлением, зависит от ещё не существующей таблицы.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [bfa2ab56b] 2016-07-15 17:49:48 -0700
Branch: REL9_5_STABLE [1f9534b49] 2016-07-15 17:49:48 -0700
Branch: REL9_4_STABLE [3d5b227ba] 2016-07-15 17:49:48 -0700
Branch: REL9_3_STABLE [2e51ae1f6] 2016-07-15 17:49:48 -0700
Branch: REL9_2_STABLE [941557f18] 2016-07-15 17:49:48 -0700
Branch: REL9_1_STABLE [37276017f] 2016-07-15 17:49:49 -0700
-->
     <para>Ликвидация небезопасного промежуточного состояния при выполнении <function>heap_update()</function> по сложному пути (Масахико Савада, Андрес Фройнд)</para>

     <para>Ранее в особых случаях целевой кортеж блокировался (путём изменения его XMAX), но это действие не отражалось в журнале, что могло угрожать целостности данных, если страница вымещалась на диск, а затем, до завершения изменения кортежа, происходил сбой базы.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [a4d357bfb] 2016-07-15 14:45:37 -0700
Branch: REL9_5_STABLE [b33e81cba] 2016-07-15 14:45:38 -0700
Branch: REL9_4_STABLE [f66828ba6] 2016-07-15 14:50:46 -0700
Branch: REL9_3_STABLE [46acbeb2f] 2016-07-15 14:51:03 -0700
-->
     <para>Исправление обновления вспомогательных битов при воспроизведении из WAL операций блокирования строк (Андрес Фройнд)</para>

     <para>Единственным известным последствием этой проблемы было то, что блокировки строк, удерживаемые подготовленной, но не зафиксированной транзакцией, могли теряться после сбоя и перезапуска сервера.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [533e9c6b0] 2016-07-15 14:17:20 -0400
Branch: REL9_5_STABLE [649dd1b58] 2016-07-15 14:17:20 -0400
Branch: REL9_4_STABLE [166873dd0] 2016-07-15 14:17:20 -0400
Branch: REL9_3_STABLE [6c243f90a] 2016-07-15 14:17:20 -0400
-->
     <para>Предотвращение неоправданных ошибок <quote>could not serialize access</quote> (не удалось сериализовать доступ) при получении блокировок строк <literal>FOR KEY SHARE</literal> в сериализуемом режиме (Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [69f526aa4] 2016-06-03 15:14:50 -0400
Branch: REL9_5_STABLE [a102f98e2] 2016-06-03 15:14:35 -0400
Branch: master [9eaf5be50] 2016-06-03 18:07:14 -0400
Branch: REL9_5_STABLE [8355897ff] 2016-06-03 18:07:14 -0400
-->
     <para><quote>Развёрнутые</quote> данные, возвращаемые узлом плана, должны быть доступны только для чтения (Том Лейн)</para>

     <para>Это предотвращает сбои в некоторых случаях, когда результат нижнего узла плана неоднократно задействуется в верхних узлах. Если говорить о ядре <productname>PostgreSQL</productname>, риску подвержены только значения массивов, возвращаемые функциями PL/pgSQL; но расширения могут использовать развёрнутые данные и для других целей.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0b0baf262] 2016-06-16 12:17:38 -0400
Branch: REL9_5_STABLE [4f5995dd9] 2016-06-16 12:17:11 -0400
Branch: REL9_4_STABLE [e542bfe61] 2016-06-16 12:17:16 -0400
Branch: REL9_3_STABLE [29987b2e1] 2016-06-16 12:17:20 -0400
Branch: REL9_2_STABLE [23ed284a5] 2016-06-16 12:17:25 -0400
Branch: master [e45e990e4] 2016-06-22 11:55:18 -0400
Branch: REL9_5_STABLE [f2c28bb1f] 2016-06-22 11:55:24 -0400
Branch: REL9_4_STABLE [f22a3e5ce] 2016-06-22 11:55:28 -0400
Branch: REL9_3_STABLE [dafdcbb6c] 2016-06-22 11:55:32 -0400
Branch: REL9_2_STABLE [dd41661d2] 2016-06-22 11:55:35 -0400
-->
     <para>Предупреждение сбоя в <literal>postgres -C</literal>, когда указанная переменная имеет пустое строковое значение (Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [80b346c20] 2016-07-29 12:52:57 -0400
Branch: REL9_5_STABLE [c8966a925] 2016-07-29 12:53:02 -0400
-->
     <para>Предотвращение незапланированного ожидания приёмника в процессах, передающих WAL (Киотаро Хоригучи)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f8c58554d] 2016-06-30 12:37:02 -0400
Branch: REL9_5_STABLE [8caf9fe62] 2016-06-30 12:37:02 -0400
Branch: REL9_4_STABLE [1843d88e0] 2016-06-30 12:37:02 -0400
-->
     <para>Исправление возможной потери больших подтранзакций при логическом декодировании (Петру-Флорин Миханча)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [bcbecbce2] 2016-08-07 13:15:55 -0400
Branch: REL9_5_STABLE [71dca408c] 2016-08-07 13:15:55 -0400
Branch: REL9_4_STABLE [c63588feb] 2016-08-07 13:15:55 -0400
-->
     <para>Исправление сбоя логического декодирования, когда подтранзакция не содержит фактических изменений (Марко Тииккая, Эндрю Гирт)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [52e8fc3e2] 2016-05-25 17:48:15 -0400
Branch: REL9_5_STABLE [b2355a29c] 2016-05-25 17:48:15 -0400
Branch: REL9_4_STABLE [4b612a78f] 2016-05-25 17:48:15 -0400
Branch: REL9_3_STABLE [463207630] 2016-05-25 17:48:15 -0400
-->
     <para>Предоставление обслуживающим процессам актуальной статистики по общим каталогам (Том Лейн)</para>

     <para>Ранее сборщик статистики не мог обновлять файл статистики для общих каталогов по запросу от обычного обслуживающего процесса. Эта проблема была частично скрыта, так как процесс запуска автоочистки регулярно выдавал запросы, в результате которых такие обновления производились: однако она проявлялась при отключении автоочистки.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [22b27b4c9] 2016-05-31 15:55:15 -0400
Branch: REL9_5_STABLE [47215c16f] 2016-05-31 15:54:46 -0400
Branch: REL9_4_STABLE [3ffff7257] 2016-05-31 15:54:46 -0400
Branch: REL9_3_STABLE [a84cad224] 2016-05-31 15:54:47 -0400
-->
     <para>Исключение ненужной записи в файлы статистики, когда несколько обслуживающих процессов запрашивают обновление один за другим (Том Лейн, Томас Вондра)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [996d27397] 2016-05-24 15:20:36 -0400
Branch: REL9_5_STABLE [a34c3dd50] 2016-05-24 15:20:12 -0400
Branch: REL9_4_STABLE [defe936ef] 2016-05-24 15:20:12 -0400
Branch: REL9_3_STABLE [9f3e4c813] 2016-05-24 15:20:12 -0400
Branch: REL9_2_STABLE [2e7f0c34a] 2016-05-24 15:20:12 -0400
Branch: REL9_1_STABLE [fe1731fca] 2016-05-24 15:20:12 -0400
Branch: master [2d2e40e3b] 2016-05-24 15:47:51 -0400
Branch: REL9_5_STABLE [bbbe2c97e] 2016-05-24 15:47:51 -0400
Branch: REL9_4_STABLE [edd8873ff] 2016-05-24 15:47:51 -0400
Branch: REL9_3_STABLE [ff98ae908] 2016-05-24 15:47:51 -0400
Branch: REL9_2_STABLE [4cf0978ea] 2016-05-24 15:47:51 -0400
Branch: REL9_1_STABLE [5551dac59] 2016-05-24 15:47:51 -0400
-->
     <para>Исключение потребления лишнего ID транзакции во время <command>VACUUM</command> (Александр Коротков)</para>

     <para>В некоторых случаях в процессе <command>VACUUM</command> текущей транзакции без необходимости присваивался XID. В обычных условиях это некритично, но если очистка выполняется для предотвращения зацикливания идентификаторов транзакций, потребление дополнительных идентификаторов может привести к очень плохим последствиям.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [e3ad3ffa6] 2016-06-24 18:29:28 -0400
Branch: REL9_5_STABLE [d372cb173] 2016-06-24 18:29:28 -0400
Branch: REL9_4_STABLE [61b24fef8] 2016-06-24 18:29:28 -0400
Branch: REL9_3_STABLE [28f294afd] 2016-06-24 18:29:28 -0400
-->
     <para>Предотвращение риска сбоя при очистке идентификаторов мультитранзакций в инсталляции, обновлённой (с помощью pg_upgrade) с версии старее 9.3 (Эндрю Гирт, Альваро Эррера)</para>

     <para>Обычно этот дефект проявлялся в ошибках типа <quote>MultiXactId <replaceable>NNN</replaceable> has not been created yet -- apparent wraparound</quote> (MultiXactId %u ещё не был создан: видимо, произошло наложение).</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f64340e74] 2016-06-06 17:44:17 -0400
Branch: REL9_5_STABLE [5acc58c5e] 2016-06-06 17:44:17 -0400
Branch: REL9_4_STABLE [a4400c251] 2016-06-06 17:44:17 -0400
Branch: REL9_3_STABLE [5f3e0e84b] 2016-06-06 17:44:17 -0400
Branch: REL9_2_STABLE [3201709de] 2016-06-06 17:44:18 -0400
Branch: REL9_1_STABLE [32ceb8dfb] 2016-06-06 17:44:18 -0400
-->
     <para>Когда в запускаемой вручную команде <command>ANALYZE</command> задаётся список столбцов, не нужно сбрасывать счётчик <literal>changes_since_analyze</literal> целевой таблицы (Том Лейн)</para>

     <para>Если мы анализируем только избранные столбцы, мы не должны предотвращать запуск процедуры автоанализа для других столбцов.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [95bee941b] 2016-08-07 18:52:02 -0400
Branch: REL9_5_STABLE [cb5c14984] 2016-08-07 18:52:02 -0400
Branch: REL9_4_STABLE [8f180a6cc] 2016-08-07 18:52:02 -0400
Branch: REL9_3_STABLE [20a859504] 2016-08-07 18:52:02 -0400
Branch: REL9_2_STABLE [127d73009] 2016-08-07 18:52:02 -0400
Branch: REL9_1_STABLE [a449ad095] 2016-08-07 18:52:02 -0400
-->
     <para>Исправление ошибки в <command>ANALYZE</command> с завышением показателя <literal>n_distinct</literal> для столбца, содержащего уникальные или почти уникальные значениями и вместе с тем множество NULL (Том Лейн)</para>

     <para>Значения NULL могли учитываться как будто они сами являются уникальными, что приводило к серьёзным просчётам планировщика с запросами некоторых типов.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [15739393e] 2016-05-10 16:23:54 -0300
Branch: REL9_5_STABLE [7516cdb76] 2016-05-10 16:23:54 -0300
Branch: REL9_4_STABLE [e9a273199] 2016-05-10 16:23:54 -0300
Branch: REL9_3_STABLE [92ebe509e] 2016-05-10 16:23:54 -0300
Branch: REL9_2_STABLE [ca4c6d043] 2016-05-10 16:23:54 -0300
Branch: REL9_1_STABLE [2152762c5] 2016-05-10 16:23:54 -0300
-->
     <para>Недопущение запуска при автоочистке нескольких рабочих процессов для одного общего каталога (Альваро Эррера)</para>

     <para>Обычно это не представляет большой проблемы, так как очистка выполняется быстро; но если каталог очень сильно замусорен, это может привести к тому, что все рабочие процессы, кроме одного, будут бессмысленно ждать, вместо того, чтобы делать что-то полезное с другими таблицами.</para>
    </listitem>

    <listitem>
<!--
Author: Kevin Grittner <kgrittn@postgresql.org>
Branch: master [7392eed7c] 2016-06-02 12:23:01 -0500
Branch: REL9_5_STABLE [236d569f9] 2016-06-02 12:23:19 -0500
-->
     <para>Исправление ошибки при обработке пометки/восстановления позиции в B-дереве (Кевин Гриттнер)</para>

     <para>Вследствие этой ошибки могли выдаваться некорректные результаты соединения или ошибочные утверждения при соединении слиянием, в котором внутренним узлом оказывалось сканирование индекса-B-дерева.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e89526d4f] 2016-08-06 14:28:37 -0400
Branch: REL9_5_STABLE [ee5d1de04] 2016-08-06 14:28:37 -0400
Branch: REL9_4_STABLE [98d5f366b] 2016-08-06 14:28:38 -0400
-->
     <para>Предупреждение двойного освобождения блокировки буфера при отказе от попытки удаления страницы индекса-B-дерева (Том Лейн)</para>

     <para>В результате этой ошибки процедура <command>VACUUM</command> не могла завершиться в некоторых случаях при наличии проблем с индексами-B-деревьями.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8cf739de8] 2016-06-24 16:57:36 -0400
Branch: REL9_5_STABLE [07f69137b] 2016-06-24 16:57:36 -0400
-->
     <para>Исправление ошибки при построении больших (больше <varname>shared_buffers</varname>) хеш-индексов (Том Лейн)</para>

     <para>В коде, работающем с большими индексами, обнаружилась ошибка, приводящая к добавлению в индекс некорректных хеш-значений, так что последующий поиск по индексу всегда был безуспешным, кроме случаев, когда кортежи вставлялись в индекс уже после его создания.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [1acf75725] 2016-07-14 18:45:59 -0400
Branch: REL9_5_STABLE [503546376] 2016-07-14 18:46:00 -0400
Branch: REL9_4_STABLE [054052b3a] 2016-07-14 18:46:00 -0400
Branch: REL9_3_STABLE [57dba87a7] 2016-07-14 18:46:00 -0400
Branch: REL9_2_STABLE [042009f24] 2016-07-14 18:46:00 -0400
-->
     <para>Предотвращение бесконечного цикла при построении индексов GiST для геометрических столбцов с составными значениями, содержащими NaN (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8a859691d] 2016-06-05 11:53:06 -0400
Branch: REL9_5_STABLE [a7aa61ffe] 2016-06-05 11:53:06 -0400
-->
     <para>Предупреждение сбоя при сканировании с поиском ближайших соседей (упорядоченного (<literal>ORDER BY</literal>) по расстоянию) по индексу <filename>contrib/btree_gist</filename>, построенному по столбцу <type>interval</type> (Питер Геохеган)</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [975ad4e60] 2016-05-30 14:47:22 -0400
Branch: REL9_5_STABLE [2973d7d02] 2016-05-30 14:47:22 -0400
-->
     <para>Исправление ошибки <quote>PANIC: failed to add BRIN tuple</quote> (ПАНИКА: не удалось добавить кортеж BRIN), возникавшей при попытке изменить элемент индекса BRIN (Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8d498a5c8] 2016-08-04 16:06:14 -0400
Branch: REL9_5_STABLE [c1d6ee879] 2016-08-04 16:06:14 -0400
-->
     <para>Предупреждение возможных сбоев при остановке фонового рабочего процесса (Дмитрий Иванов)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [baebab3ac] 2016-07-12 18:07:03 -0400
Branch: REL9_5_STABLE [a0943dbbe] 2016-07-12 18:06:50 -0400
-->
     <para>Исправление поведения в PL/pgSQL предложения <literal>INTO</literal> внутри команд <command>IMPORT FOREIGN SCHEMA</command> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [f36ca9af0] 2016-07-17 09:15:37 -0400
Branch: REL9_5_STABLE [fb279fc7a] 2016-07-17 09:24:06 -0400
Branch: REL9_4_STABLE [97d741650] 2016-07-17 09:37:33 -0400
Branch: REL9_3_STABLE [805f2bb53] 2016-07-17 09:38:23 -0400
Branch: REL9_2_STABLE [6c0be49b2] 2016-07-17 09:39:51 -0400
Branch: REL9_1_STABLE [84d679204] 2016-07-17 09:41:08 -0400
-->
     <para>Исправление кода <filename>contrib/btree_gin</filename>, чтобы он корректно выдавал наименьшее возможное значение <type>bigint</type> (Питер Эйзентраут)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [69dc5ae40] 2016-08-05 18:58:12 -0400
Branch: REL9_5_STABLE [cae0d4f9b] 2016-08-05 18:58:19 -0400
Branch: REL9_4_STABLE [a3cd60ebf] 2016-08-05 18:58:23 -0400
Branch: REL9_3_STABLE [c3107f18a] 2016-08-05 18:58:28 -0400
Branch: REL9_2_STABLE [3e40d9227] 2016-08-05 18:58:32 -0400
Branch: REL9_1_STABLE [1f63b0e09] 2016-08-05 18:58:36 -0400
-->
     <para>Наделение libpq способностью корректно декодировать версию сервера по схеме нумерации, которая вскоре будет принята (Питер Эйзентраут)</para>

     <para>Для выпусков после 9.6 планируется перейти на нумерацию версий по схеме с двумя, а не тремя компонентами. Поэтому нужно, чтобы <function>PQserverVersion()</function> возвращала правильное значение с такой нумерацией.</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [3ebc88e56] 2016-08-01 15:08:12 +0200
Branch: REL9_5_STABLE [dc6b20c6b] 2016-08-01 15:09:23 +0200
Branch: REL9_4_STABLE [057404854] 2016-08-01 15:09:12 +0200
Branch: REL9_3_STABLE [3ca359426] 2016-08-01 15:08:59 +0200
Branch: REL9_2_STABLE [295edbecf] 2016-08-01 15:08:48 +0200
Branch: REL9_1_STABLE [c15f502b6] 2016-08-01 15:08:36 +0200
-->
     <para>Исправление в <application>ecpg</application> кода обработки элементов массива <literal>unsigned long long</literal> (Михаэль Мескес)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e2e95f5ef] 2016-08-02 12:49:40 -0400
Branch: REL9_5_STABLE [89c30d113] 2016-08-02 12:49:41 -0400
Branch: REL9_4_STABLE [2ff8a2fc0] 2016-08-02 12:49:04 -0400
Branch: REL9_3_STABLE [6693c9d7b] 2016-08-02 12:49:09 -0400
Branch: REL9_2_STABLE [a5a7caaa1] 2016-08-02 12:49:15 -0400
-->
     <para>В <application>pg_dump</application> с одновременно заданными ключами <option>-c</option> и <option>-C</option> не должна выдаваться команда <literal>CREATE SCHEMA public</literal> (Дэвид Джонсон, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e652273e0] 2016-06-02 13:28:17 -0400
Branch: REL9_5_STABLE [404429038] 2016-06-02 13:28:18 -0400
Branch: REL9_4_STABLE [96aac0e6d] 2016-06-02 13:27:53 -0400
Branch: REL9_3_STABLE [5c9724305] 2016-06-02 13:27:53 -0400
Branch: master [6c72a28e5] 2016-06-03 11:29:38 -0400
Branch: REL9_5_STABLE [ec5622351] 2016-06-03 11:29:20 -0400
Branch: REL9_4_STABLE [53c2601a5] 2016-06-03 11:29:20 -0400
Branch: REL9_3_STABLE [4a21c6fd7] 2016-06-03 11:29:20 -0400
-->
     <para>Улучшение обработки <systemitem>SIGTERM</systemitem>/control-C в параллельном режиме <application>pg_dump</application> и <application>pg_restore</application> (Том Лейн)</para>

     <para>Обеспечение своевременного завершения рабочих процессов и передачи команд отмены запросов в подключённые рабочие процессы, в случае, если они выполняют какие-либо длительные операции, например <command>CREATE INDEX</command>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9abd64ec9] 2016-05-25 12:40:12 -0400
Branch: REL9_5_STABLE [af6555b80] 2016-05-25 12:39:57 -0400
Branch: REL9_4_STABLE [ea274b2f4] 2016-05-25 12:39:57 -0400
Branch: REL9_3_STABLE [1c8205159] 2016-05-25 12:39:57 -0400
-->
     <para>Корректировка выдачи ошибок в параллельном режиме <application>pg_dump</application> и <application>pg_restore</application> (Том Лейн)</para>

     <para>Ранее ошибки, выдаваемые рабочими процессами <application>pg_dump</application> или <application>pg_restore</application>, могли никогда не достигать консоли пользователя, так как они проходили через главный процесс, и были возможны различные сценарии взаимоблокировки, когда главный процесс не мог передавать сообщения. Теперь вместо этого всё будет просто выводиться в <literal>stderr</literal>. В некоторых случаях при этом возможны повторы сообщений (например, когда все рабочие процессы сообщают об отключении главного), но это представляется лучшим вариантом, чем терять сообщения.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [df8d2d8c4] 2016-05-26 10:50:30 -0400
Branch: REL9_5_STABLE [6479df137] 2016-05-26 10:50:38 -0400
Branch: REL9_4_STABLE [d32bc204c] 2016-05-26 10:50:42 -0400
Branch: REL9_3_STABLE [b9784e1f7] 2016-05-26 10:50:46 -0400
-->
     <para>Обеспечение корректного отключения параллельных процессов <application>pg_dump</application> и <application>pg_restore</application> в Windows в случае ошибки (Киотаро Хоригучи)</para>

     <para>Ранее процесс выдавал ошибку, но затем просто оставался в памяти, пока пользователь не останавливал его вручную.</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [d74048def] 2016-05-26 22:14:23 +0200
Branch: REL9_5_STABLE [47e596976] 2016-05-26 22:18:04 +0200
-->
     <para>Параллельный <application>pg_dump</application> должен завершаться штатно при попытке подключения к резервному серверу (Магнус Хагандер)</para>

     <para>Такое использование не поддерживается (если только не применяется <option>--no-synchronized-snapshots</option>), но эта ошибка не обрабатывалась должным образом.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [cae2bb198] 2016-05-26 11:51:04 -0400
Branch: REL9_5_STABLE [64b296976] 2016-05-26 11:51:11 -0400
Branch: REL9_4_STABLE [f2f18a37c] 2016-05-26 11:51:16 -0400
Branch: REL9_3_STABLE [99565a1ef] 2016-05-26 11:51:20 -0400
-->
     <para>Улучшение поведения <application>pg_dump</application> при сборке без поддержки zlib (Киотаро Хоригучи)</para>

     <para>С такой сборкой не работала корректно параллельная выгрузка, а в других случаях выдавались довольно бессмысленные предупреждения.</para>
    </listitem>

    <listitem>
<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [74d8c95b7] 2016-08-01 17:36:14 +0900
Branch: REL9_5_STABLE [928e92fda] 2016-08-01 17:37:18 +0900
Branch: REL9_4_STABLE [dbe56f2a1] 2016-08-01 17:37:41 +0900
Branch: REL9_3_STABLE [013f42372] 2016-08-01 17:37:53 +0900
Branch: REL9_2_STABLE [a21617759] 2016-08-01 17:38:00 +0900
Branch: REL9_1_STABLE [366f4a962] 2016-08-01 17:38:05 +0900
-->
     <para>Добавление для <application>pg_basebackup</application> параметра <literal>-Z 0</literal>, позволяющего отключить сжатие (Фудзии Масао)</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [e8564ef03] 2016-07-23 20:30:03 -0400
Branch: REL9_5_STABLE [cf35406f9] 2016-07-23 20:30:40 -0400
Branch: REL9_4_STABLE [f0c9e4697] 2016-07-23 20:30:44 -0400
Branch: REL9_3_STABLE [98b7a3cf2] 2016-07-23 20:30:48 -0400
Branch: REL9_2_STABLE [a4daf59ee] 2016-07-23 20:30:55 -0400
Branch: REL9_1_STABLE [b1fa6c0eb] 2016-07-23 20:30:59 -0400
-->
     <para>Корректировка в makefile правила для безопасной сборки разделяемых библиотек AIX в параллельном режиме (Ной Миш)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [30b2731bd] 2016-07-09 16:47:38 -0400
Branch: REL9_5_STABLE [f80395ca1] 2016-07-09 16:47:39 -0400
Branch: REL9_4_STABLE [02a898b00] 2016-07-09 16:47:39 -0400
Branch: REL9_3_STABLE [57e9ea2dd] 2016-07-11 11:24:04 -0400
Branch: REL9_2_STABLE [fdf2ee62e] 2016-07-11 11:24:04 -0400
Branch: REL9_1_STABLE [71af6c006] 2016-07-11 11:24:04 -0400
-->
     <para>Исправление тестов TAP и скриптов MSVC для работы с каталогом сборки, путь к которому содержит пробелы (Мишель Пакье, Киотаро Хоригучи)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9dd4178ce] 2016-05-27 10:40:20 -0400
Branch: REL9_5_STABLE [cea17ba07] 2016-05-27 10:40:20 -0400
Branch: REL9_4_STABLE [c2651cd24] 2016-05-27 10:40:20 -0400
Branch: REL9_3_STABLE [1f1e70a87] 2016-05-27 10:40:20 -0400
-->
     <para>Более предсказуемое поведение в выборе ошибки <quote>statement timeout</quote> (тайм-аут оператора) или <quote>lock timeout</quote> (тайм-аут блокировки) (Том Лейн)</para>

     <para>В сильно загруженных системах регрессионные тесты иногда выдавали ошибку <quote>lock timeout</quote> (тайм-аут блокировки), хотя прежде этого должен был случиться тайм-аут оператора.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b3399cb0f] 2016-07-21 13:11:00 -0400
Branch: REL9_5_STABLE [fd507d542] 2016-07-21 13:11:00 -0400
Branch: master [9d7abca90] 2016-07-22 15:41:39 -0400
Branch: REL9_5_STABLE [2aa2533f2] 2016-07-22 15:41:40 -0400
Branch: master [95810ed8e] 2016-07-21 14:24:07 -0400
Branch: REL9_5_STABLE [95e8b44f0] 2016-07-21 14:24:07 -0400
Branch: REL9_4_STABLE [dfddc452d] 2016-07-21 14:24:07 -0400
Branch: REL9_3_STABLE [0060638c8] 2016-07-21 14:24:07 -0400
Branch: REL9_2_STABLE [52502e7a5] 2016-07-21 14:24:07 -0400
Branch: REL9_1_STABLE [f61ecd01e] 2016-07-21 14:24:07 -0400
Branch: master [d70d11915] 2016-07-21 16:52:35 -0400
Branch: REL9_5_STABLE [d365dc3d1] 2016-07-21 16:52:36 -0400
Branch: REL9_4_STABLE [1156a9db8] 2016-07-21 16:52:36 -0400
Branch: REL9_3_STABLE [e15e7886e] 2016-07-21 16:52:36 -0400
Branch: REL9_2_STABLE [a1e750553] 2016-07-21 16:52:36 -0400
Branch: REL9_1_STABLE [ba64aed70] 2016-07-21 16:52:36 -0400
-->
     <para>Адаптация регрессионных тестов к датской и валлийской локалям (Джефф Джейнс, Том Лейн)</para>

     <para>Изменены некоторые тестовые данные, с которыми в этих локалях действовали необычные правила сортировки.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [19d477aa6] 2016-07-19 15:59:36 -0400
Branch: REL9_4_STABLE [590a7f82b] 2016-07-19 15:59:36 -0400
Branch: REL9_3_STABLE [3928132ea] 2016-07-19 15:59:36 -0400
Branch: REL9_2_STABLE [cd951aa61] 2016-07-19 15:59:36 -0400
Branch: REL9_1_STABLE [5db14fad0] 2016-07-19 15:59:36 -0400
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [0aabe80c6] 2016-07-19 17:53:31 -0400
Branch: REL9_4_STABLE [bdbcfba35] 2016-07-19 17:53:31 -0400
Branch: REL9_3_STABLE [f102bd868] 2016-07-19 17:53:31 -0400
Branch: REL9_2_STABLE [4d37b7cff] 2016-07-19 17:53:31 -0400
Branch: REL9_1_STABLE [d70df7867] 2016-07-19 17:53:31 -0400
-->
     <para>Приведение нашей копии кодов часовых поясов в соответствие с выпущенной IANA версией <application>tzcode</application> 2016c (Том Лейн)</para>

     <para>Это необходимо для принятия ожидаемых в будущем изменений в файлах данных часовых поясов. Также это решает некоторые редкие проблемы при работе с необычными часовыми поясами.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a629330b2] 2016-08-05 12:59:29 -0400
Branch: REL9_5_STABLE [3fddd6484] 2016-08-05 12:58:38 -0400
Branch: REL9_4_STABLE [8080337b0] 2016-08-05 12:58:46 -0400
Branch: REL9_3_STABLE [5630bd2ec] 2016-08-05 12:58:53 -0400
Branch: REL9_2_STABLE [7822792f7] 2016-08-05 12:58:58 -0400
Branch: REL9_1_STABLE [a44388ffe] 2016-08-05 12:59:02 -0400
-->
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016f, включающее новые правила перехода на летнее время в Кемерове и Новосибирске, а также корректировку исторических данных для Азербайджана, Белоруссии и Марокко.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-3">
  <title>Выпуск 9.5.3</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-05-12</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.2. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.3</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы обновляете сервер с версии, более ранней, чем 9.5.2, см. <xref remap="4" linkend="release-9-5-2"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [7c7d4fdda] 2016-04-08 14:11:56 -0400
Branch: REL9_5_STABLE [a3c17b2af] 2016-05-06 23:47:42 -0400
Branch: REL9_4_STABLE [e3b14de9f] 2016-05-07 00:10:31 -0400
Branch: REL9_3_STABLE [a9d8644de] 2016-05-07 00:10:17 -0400
Branch: REL9_2_STABLE [e3a493ac0] 2016-05-07 00:05:39 -0400
Branch: REL9_1_STABLE [9b676fd49] 2016-05-07 00:09:37 -0400
-->
     <para>Очередь ошибок OpenSSL должна очищаться перед вызовом функций OpenSSL (не следует полагать, что она уже очищена); мы также должны обязательно очищать её после вызова (Питер Геохеган, Дэйв Витек, Питер Эйзентраут)</para>

     <para>Это изменение предотвращает проблемы, возникающие, когда несколько подключений используют OpenSSL в одном процессе и не весь участвующий в этом код очищает очередь ошибок по одним правилам. В частности, возникали ошибки, когда клиентское приложение использовало SSL-подключения через <application>libpq</application> одновременно с SSL-подключениями, устанавливаемыми обёртками PHP, Python или Ruby для OpenSSL. Подобные проблемы могли иметь место и на сервере, если модуль расширения устанавливал исходящее SSL-подключение.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [80f66a9ad] 2016-04-21 20:05:58 -0400
Branch: REL9_5_STABLE [94c685a7c] 2016-04-21 20:05:58 -0400
Branch: REL9_4_STABLE [3232c2427] 2016-04-21 20:05:58 -0400
Branch: REL9_3_STABLE [d9742ac46] 2016-04-21 20:05:58 -0400
Branch: REL9_2_STABLE [ad2d32b57] 2016-04-21 20:05:58 -0400
Branch: REL9_1_STABLE [6882dbd34] 2016-04-21 20:05:58 -0400
-->
     <para>Исправление ошибки планировщика <quote>не удалось построить <replaceable>N</replaceable>-стороннее соединение</quote> с полным соединением, заключённым в правой части левого соединения (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [207d5a656] 2016-04-29 20:19:38 -0400
Branch: REL9_5_STABLE [f25d0619c] 2016-04-29 20:19:38 -0400
Branch: REL9_4_STABLE [72edc8ffe] 2016-04-29 20:19:38 -0400
Branch: REL9_3_STABLE [67349e5a8] 2016-04-29 20:19:38 -0400
Branch: REL9_2_STABLE [f02cb8c9a] 2016-04-29 20:19:38 -0400
-->
     <para>Исправление некорректной обработки проверок класса эквивалентности в планах с многоуровневыми вложенными циклами (Том Лейн)</para>

     <para>С классом эквивалентности переменных с тремя или более элементами, например <literal>X.X = Y.Y = Z.Z</literal>, планировщик мог опустить некоторые проверки, необходимые, чтобы удостовериться, что все переменные действительно равны, в результате чего выдавались строки соединения, не удовлетворяющие предложениям <literal>WHERE</literal>. По ряду причин некорректные планы редко выбирались на практике, поэтому эта ошибка оставалась необнаруженной долгое время.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [abb164655] 2016-04-21 23:17:36 -0400
Branch: REL9_5_STABLE [81deadd31] 2016-04-21 23:17:36 -0400
-->
     <para>Исправление ошибок анализатора запроса в особых случаях при включённом параметре <xref linkend="guc-operator-precedence-warning"/> (Том Лейн)</para>

     <para>Например, запрос <literal>SELECT (ARRAY[])::text[]</literal> давал ошибку, хотя без скобок он работал.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f0e766bd7] 2016-04-15 00:02:26 -0400
Branch: REL9_5_STABLE [edd57377f] 2016-04-15 00:02:26 -0400
Branch: REL9_4_STABLE [0479eccdc] 2016-04-15 00:02:26 -0400
-->
     <para>Ликвидирована утечка памяти на протяжении запроса при сканировании индекса GIN (Жульен Рохо)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [bde361fef] 2016-04-20 14:25:15 -0400
Branch: REL9_5_STABLE [be2754456] 2016-04-20 14:25:15 -0400
Branch: REL9_4_STABLE [ef35afa35] 2016-04-20 14:25:15 -0400
-->
     <para>Ликвидирована утечка памяти на протяжении запроса и угроза повреждения индекса при добавлении в индекс GIN (Том Лейн)</para>

     <para>Эта утечка памяти обычно ни на что не влияла в простых запросах, но могла быть очень существенной при построении большого индекса GIN с большим значением <varname>maintenance_work_mem</varname>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [d136d600f] 2016-05-06 12:09:20 -0400
Branch: REL9_5_STABLE [504af1fe0] 2016-05-06 12:09:20 -0400
Branch: REL9_4_STABLE [1180868d1] 2016-05-06 12:09:20 -0400
Branch: REL9_3_STABLE [462456d8d] 2016-05-06 12:09:20 -0400
Branch: REL9_2_STABLE [11247dd99] 2016-05-06 12:09:20 -0400
Branch: REL9_1_STABLE [7bad282c3] 2016-05-06 12:09:20 -0400
-->
     <para>Исправление возможного некорректного поведения кодов формата <literal>TH</literal>, <literal>th</literal> и <literal>Y,YYY</literal> в <function>to_timestamp()</function> (Том Лейн)</para>

     <para>С этими кодами был возможен выход за конец строки, в результате чего последующие коды формата читали мусор.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [1f7c85b82] 2016-04-21 14:20:30 -0400
Branch: REL9_5_STABLE [4b52cc289] 2016-04-21 14:20:18 -0400
Branch: REL9_4_STABLE [679c92238] 2016-04-21 14:20:18 -0400
Branch: REL9_3_STABLE [e5882f26b] 2016-04-21 14:20:18 -0400
Branch: REL9_2_STABLE [c7c145e4f] 2016-04-21 14:20:18 -0400
Branch: REL9_1_STABLE [663624e60] 2016-04-21 14:20:18 -0400
-->
     <para>Исправление вывода правил и представлений, в которых аргумент <replaceable>массив</replaceable> в конструкции <literal><replaceable>значение</replaceable> <replaceable>оператор</replaceable> ANY (<replaceable>массив</replaceable>)</literal> представляет собой вложенный SELECT (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [99f3b5613] 2016-04-04 18:05:23 -0400
Branch: REL9_5_STABLE [f3d17491c] 2016-04-04 18:05:23 -0400
Branch: REL9_4_STABLE [28148e258] 2016-04-04 18:05:24 -0400
-->
     <para>Запрет на использование символов новой строки в значениях параметров <command>ALTER SYSTEM</command> (Том Лейн)</para>

     <para>При разборе файла конфигурации строки, содержащие символы новой строки, не принимаются, поэтому мы не должны допускать их в значениях, вставляемых командой <command>ALTER SYSTEM</command>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8f1911d5e] 2016-04-15 12:11:40 -0400
Branch: REL9_5_STABLE [8f8e65d34] 2016-04-15 12:11:27 -0400
Branch: REL9_4_STABLE [8eed31ffb] 2016-04-15 12:11:27 -0400
-->
     <para>Исправление поведения <command>ALTER TABLE ... REPLICA IDENTITY USING INDEX</command> в случае, когда выбирается индекс по OID (Дэвид Роули)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [93c301fc4] 2016-04-08 12:31:53 -0400
Branch: REL9_5_STABLE [0da7cf6e8] 2016-04-08 12:31:42 -0400
-->
     <para>Исключение возможного некорректного поведения в случае неудачи при удалении символической ссылки табличного пространства (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6a3d3965d] 2016-04-14 19:42:21 -0400
Branch: REL9_5_STABLE [e7a456174] 2016-04-14 19:42:22 -0400
Branch: REL9_4_STABLE [00456911f] 2016-04-14 19:42:22 -0400
-->
     <para>Исправление сбоя при логическом декодировании на платформах, чувствительных к выравниванию (Том Лейн, Андрес Фройнд)</para>

     <para>Этот сбой происходил, когда транзакция была достаточно большой, чтобы оказаться на диске, и в ней происходило изменение первичного ключа.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [59455018a] 2016-04-28 22:11:18 -0700
Branch: REL9_5_STABLE [2e1b4adf3] 2016-04-28 22:11:18 -0700
Branch: REL9_4_STABLE [596f93605] 2016-04-28 22:11:18 -0700
-->
     <para>Исключение повторных обращений за ответом к приёмнику журнала при завершении процесса walsender (Ник Клитон)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [cbabb70f3] 2016-04-20 23:48:13 -0400
Branch: REL9_5_STABLE [0b8e0bf0a] 2016-04-20 23:48:13 -0400
Branch: REL9_4_STABLE [f05ac711b] 2016-04-20 23:48:13 -0400
Branch: REL9_3_STABLE [691073bd8] 2016-04-20 23:48:13 -0400
Branch: REL9_2_STABLE [1b22368ff] 2016-04-20 23:48:13 -0400
Branch: REL9_1_STABLE [4c1c9f80b] 2016-04-20 23:48:13 -0400
-->
     <para>Использование в <application>pg_regress</application> тайм-аута запуска из переменной окружения <envar>PGCTLTIMEOUT</envar>, если она задана (Том Лейн)</para>

     <para>Это поведение согласуется с тем, что было недавно введено в <application>pg_ctl</application>; возможность задать тайм-аут облегчает автоматизированное тестирование на медленных машинах.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6cead413b] 2016-04-13 18:58:14 -0400
Branch: REL9_5_STABLE [fb0f63933] 2016-04-13 18:57:52 -0400
Branch: REL9_4_STABLE [5daf1012a] 2016-04-13 18:57:52 -0400
Branch: REL9_3_STABLE [34bf6bc56] 2016-04-13 18:57:52 -0400
Branch: REL9_2_STABLE [6bb42d520] 2016-04-13 18:57:52 -0400
Branch: REL9_1_STABLE [3ef1f3a3e] 2016-04-13 18:57:52 -0400
-->
     <para>Исправление ошибки в <application>pg_upgrade</application>, из-за которой не восстанавливалось членство семейства операторов, содержащего всего один класс операторов, в расширении (Том Лейн)</para>

     <para>В таких случаях семейство операторов восстанавливалось в новую базу, но переставало быть частью расширения. Это не приводило немедленно к негативным эффектам, но с выводом, выдаваемым впоследствии утилитой <application>pg_dump</application>, при восстановлении возникали ошибки (безвредные).</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [1a2c17f8e] 2016-05-06 22:05:56 -0400
Branch: REL9_5_STABLE [196870f2f] 2016-05-06 22:05:51 -0400
Branch: REL9_4_STABLE [e1aecebc0] 2016-05-06 22:05:51 -0400
Branch: REL9_3_STABLE [e1d88f983] 2016-05-06 22:05:51 -0400
-->
     <para>Исправление ошибки в <application>pg_upgrade</application>, приводившей к сбою, когда правила TOAST в новом кластере отличались от старых (Том Лейн)</para>

     <para>В <application>pg_upgrade</application> был специальный код для обработки ситуации, когда новая версия <productname>PostgreSQL</productname> считала, что у таблицы должна быть дополнительная таблица TOAST, а старая версия считала по-другому. Этот код был нерабочим, поэтому его следует удалить и ничего не делать в таких случаях; похоже, что нет никаких причин полагать, что мы не сможем обойтись без таблицы TOAST, если это было возможно по правилам старой версии.</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [213c7df03] 2016-04-26 21:53:58 -0400
Branch: REL9_5_STABLE [f9989482d] 2016-04-26 21:54:07 -0400
-->
     <para>Исправление атомарных операций в коде для PPC, генерируемом компилятором IBM XLC (Ной Миш)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [75c24d0f7] 2016-04-18 13:33:06 -0400
Branch: REL9_5_STABLE [c6a5b6677] 2016-04-18 13:33:07 -0400
Branch: REL9_4_STABLE [21b7f49eb] 2016-04-18 13:33:07 -0400
Branch: REL9_3_STABLE [6ec1ff852] 2016-04-18 13:33:07 -0400
Branch: REL9_2_STABLE [b24f7e280] 2016-04-18 13:33:07 -0400
-->
     <para>Уменьшение числа семафоров SysV, задействуемых сборкой, полученной с ключом <option>--disable-spinlocks</option> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0ab3595e5] 2016-04-23 16:53:15 -0400
Branch: REL9_5_STABLE [bdf7744f7] 2016-04-23 16:53:15 -0400
Branch: REL9_4_STABLE [2a715371c] 2016-04-23 16:53:15 -0400
Branch: REL9_3_STABLE [252c35895] 2016-04-23 16:53:15 -0400
Branch: REL9_2_STABLE [0f5491283] 2016-04-23 16:53:15 -0400
Branch: REL9_1_STABLE [cbff4b708] 2016-04-23 16:53:15 -0400
-->
     <para>Переименование внутренней функции <function>strtoi()</function> в <function>strtoint()</function> во избежание конфликта с библиотечной функцией NetBSD (Томас Мунро)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [20d4428f0] 2016-04-21 15:44:18 -0400
Branch: REL9_4_STABLE [5e2fb8862] 2016-04-21 15:44:18 -0400
Branch: REL9_3_STABLE [8f9518414] 2016-04-21 15:44:18 -0400
Branch: REL9_2_STABLE [6848827b4] 2016-04-21 15:44:18 -0400
Branch: REL9_1_STABLE [b2bb59bd5] 2016-04-21 15:44:18 -0400
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [125ad539a] 2016-04-21 16:58:47 -0400
Branch: REL9_5_STABLE [d2e59cbc3] 2016-04-21 16:58:59 -0400
Branch: REL9_4_STABLE [56dee70d9] 2016-04-21 16:59:04 -0400
Branch: REL9_3_STABLE [82bf369ed] 2016-04-21 16:59:08 -0400
Branch: REL9_2_STABLE [b5ebc513d] 2016-04-21 16:59:13 -0400
Branch: REL9_1_STABLE [9028f404e] 2016-04-21 16:59:17 -0400
-->
     <para>Исправление кодов ошибок, получаемых из системных вызовов <function>bind()</function> и <function>listen()</function> в Windows (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [01a07e6c1] 2016-04-08 12:37:20 -0400
Branch: REL9_5_STABLE [849167943] 2016-04-08 12:36:59 -0400
Branch: REL9_4_STABLE [f79a7fa90] 2016-04-08 12:29:31 -0400
Branch: REL9_3_STABLE [ca5d6edbf] 2016-04-08 12:29:34 -0400
Branch: REL9_2_STABLE [9e77d0e3c] 2016-04-08 12:29:36 -0400
Branch: REL9_1_STABLE [d2189a802] 2016-04-08 12:33:29 -0400
-->
     <para>Уменьшение детализации вывода компилятора при сборке с Microsoft Visual Studio (Кристиан Ульрих)</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [0fb54de9a] 2016-04-29 08:09:07 -0400
Branch: REL9_5_STABLE [da52474f3] 2016-04-29 08:06:25 -0400
Branch: master [7dc549238] 2016-04-29 09:49:31 -0400
Branch: REL9_5_STABLE [b71b4d852] 2016-04-29 09:50:38 -0400
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [23b09e15b] 2016-04-28 11:50:58 -0400
Branch: REL9_5_STABLE [94a16531b] 2016-04-28 11:51:08 -0400
Branch: REL9_4_STABLE [65c2eeb00] 2016-04-28 11:51:13 -0400
Branch: REL9_3_STABLE [707c44fe2] 2016-04-28 11:51:17 -0400
Branch: REL9_2_STABLE [c563d97c6] 2016-04-28 11:51:22 -0400
Branch: REL9_1_STABLE [a6c6789c4] 2016-04-28 11:51:26 -0400
-->
     <para>Поддержка сборки с Visual Studio 2015 (Мишель Пакье, Петр Желинек)</para>

     <para>Учтите, что сборки, произведённые с VS2015, не будут работать в версиях Windows, более ранних чем Windows Vista.</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [9f633b404] 2016-04-22 05:18:59 -0400
Branch: REL9_5_STABLE [409c49c64] 2016-04-22 05:19:57 -0400
Branch: REL9_4_STABLE [c238a4101] 2016-04-22 05:20:07 -0400
Branch: REL9_3_STABLE [ab5c6d01f] 2016-04-22 05:20:18 -0400
-->
     <para>Исправление <function>putenv()</function> для корректной работы с Visual Studio 2013 (Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [7abc15716] 2016-03-29 11:55:19 -0400
Branch: REL9_5_STABLE [491e84738] 2016-03-29 11:54:57 -0400
Branch: REL9_4_STABLE [2fed676c9] 2016-03-29 11:54:57 -0400
Branch: REL9_3_STABLE [11cc7bb88] 2016-03-29 11:54:57 -0400
Branch: REL9_2_STABLE [b4b06931e] 2016-03-29 11:54:58 -0400
Branch: REL9_1_STABLE [6cd30292b] 2016-03-29 11:54:58 -0400
-->
     <para>Исключение потенциально небезопасного использования функции <function>FormatMessage()</function> в Windows (Кристиан Ульрих)</para>

     <para>Использование флага <literal>FORMAT_MESSAGE_IGNORE_INSERTS</literal>, где это уместно. Сообщений о конкретных связанных с этим ошибками не было, но проявить осторожность представляется хорошей идеей.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [98f158e41] 2016-05-05 20:08:58 -0400
Branch: REL9_5_STABLE [4edbb265c] 2016-05-05 20:09:10 -0400
Branch: REL9_4_STABLE [a5148e800] 2016-05-05 20:09:17 -0400
Branch: REL9_3_STABLE [d30c67af8] 2016-05-05 20:09:22 -0400
Branch: REL9_2_STABLE [29d154e36] 2016-05-05 20:09:27 -0400
Branch: REL9_1_STABLE [bfc39da64] 2016-05-05 20:09:32 -0400
-->
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016d, включающее изменения правил перехода на летнее время в России и Венесуэле. Появились новые названия часовых поясов <literal>Europe/Kirov</literal> и <literal>Asia/Tomsk</literal>, отражающие тот факт, что в этих регионах история изменения часовых поясов отличается от соседних.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-2">
  <title>Выпуск 9.5.2</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-03-31</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.1. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.2</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако вследствие изменения, идущего первым в следующем списке, для некоторых индексов может потребоваться выполнить <command>REINDEX</command>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [3df9c374e] 2016-03-23 16:03:13 -0400
Branch: REL9_5_STABLE [8aa6e9780] 2016-03-23 16:04:35 -0400
-->

    <listitem>
     <para>Отключены сокращённые ключи при сортировке строк в локалях, отличных от <literal>C</literal> (Роберт Хаас)</para>

     <para>В <productname>PostgreSQL</productname> 9.5 появилась логика ускорения сравнения строковых типов данных с применением стандартной функции библиотеки C <function>strxfrm()</function> вместо <function>strcoll()</function>. Сейчас обнаружилось, что в большинстве версий glibc (реализации библиотеки С для Linux) функция <function>strxfrm()</function> реализована с ошибками, то есть для некоторых локалей с ней получаются результаты сравнения строк, отличающиеся от <function>strcoll()</function>. Пока эта проблема не будет изучена глубже, такая оптимизация для всех локалей, отличных от <literal>C</literal>, отключается. (Локаль <literal>C</literal> от этого не зависит, так как она не использует ни <function>strcoll()</function>, ни <function>strxfrm()</function>.)</para>

     <para>К сожалению, данная проблема затрагивает не только сортировку, но и упорядочивание записей в B-деревьях, а значит, индексы-B-деревья по столбцам типов <type>text</type>, <type>varchar</type> или <type>char</type> могут оказаться испорченными, если они сортировались с проблемной локалью и были построены или модифицированы версией <productname>PostgreSQL</productname> 9.5.0 или 9.5.1. Индексы, которые могли пострадать вследствие этой проблемы, следует перестроить (выполнив <command>REINDEX</command>) .</para>

     <para>В данный момент невозможно определить исчерпывающий список проблемных локалей. Известно, что с локалью <literal>C</literal> всё в порядке, и с локалями английского языка, например, <literal>en_US</literal>, тоже не замечено никаких проблем, но с некоторыми другими популярными локалями, например <literal>de_DE</literal>, поведение некорректно в большинстве версий glibc.</para>
    </listitem>

<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [86ebf30fd] 2016-03-28 09:03:20 -0400
Branch: REL9_5_STABLE [db69e58a0] 2016-03-28 09:03:41 -0400
-->

    <listitem>
     <para>Корректное сохранение статуса защиты на уровне строк в кешируемых планах (Стивен Фрост)</para>

     <para>В сеансе, выполняющем запросы с разными ролями, из кеша планов может быть некорректно взят план, построенный для другой роли, что может привести к применению ошибочного набора политик, когда активна защита на уровне строк (RLS). (CVE-2016-2193)</para>
    </listitem>

<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [3e1338475] 2016-03-28 10:57:42 -0300
Branch: REL9_5_STABLE [bf78a6f10] 2016-03-28 10:57:46 -0300
-->

    <listitem>
     <para>В некоторые новые функции <filename>contrib/pageinspect</filename> добавлены проверки суперпользователя (Андреас Сельтенрейх)</para>

     <para>Большинство функций в расширении <filename>pageinspect</filename>, исследующие значения <type>bytea</type>, не допускают вызова обычными пользователями, но в <function>brin_page_type()</function> и <function>brin_metapage_info()</function> такие ограничения отсутствуют. Однако, передав им изощрённо сформированные значения <type>bytea</type>, можно вызвать крах сервера или прочитать несколько байт памяти сервера. Поэтому были добавлены недостающие проверки во избежание подобных злоупотреблений. (CVE-2016-3065)</para>
    </listitem>

<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [c7111d11b] 2016-03-03 09:53:43 +0000
Branch: REL9_5_STABLE [bf7ced5e2] 2016-03-03 09:50:38 +0000
-->

    <listitem>
     <para>Исправлено некорректное сравнение <literal>ROW()</literal> с применением индексов (Саймон Риггс)</para>

     <para>Ошибки в небольшой оптимизации, введённой в 9.5, приводили к некорректным результатам, если при сравнении <literal>ROW()</literal> имело место частичное соответствие индексу, но не точное (например, когда порядок столбцов другой или в индексе есть столбцы с сортировкой и <literal>ASC</literal>, и <literal>DESC</literal>). Пока лучшее решение не найдено, эта оптимизация отключена.</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a298a1e06] 2016-03-09 14:51:22 -0500
Branch: REL9_5_STABLE [b2ce9485b] 2016-03-09 14:51:01 -0500
Branch: REL9_4_STABLE [da936200d] 2016-03-09 14:51:01 -0500
Branch: REL9_3_STABLE [1ab7a160f] 2016-03-09 14:51:01 -0500
Branch: REL9_2_STABLE [c8e059724] 2016-03-09 14:51:01 -0500
Branch: REL9_1_STABLE [d485d9581] 2016-03-09 14:51:02 -0500
-->

    <listitem>
     <para>Исправлена некорректная обработка NULL в сравнениях <literal>ROW()</literal> с применением индексов (Том Лейн)</para>

     <para>Поиск по индексу со сравнением строк вида <literal>ROW(a, b) &gt; ROW('x', 'y')</literal> останавливался, доходя до элемента NULL в столбце <structfield>b</structfield>, игнорируя тот факт, что с последующими значениями <structfield>a</structfield> могут быть связаны значения <structfield>b</structfield>, отличные от NULL.</para>
    </listitem>

<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [1d4a0ab19] 2016-03-09 18:53:53 -0800
Branch: REL9_5_STABLE [301cc3549] 2016-03-09 18:53:53 -0800
Branch: REL9_4_STABLE [4f37d0916] 2016-03-09 18:53:54 -0800
Branch: REL9_3_STABLE [bfa282a02] 2016-03-09 18:53:54 -0800
Branch: REL9_2_STABLE [ce8f42919] 2016-03-09 18:53:54 -0800
Branch: REL9_1_STABLE [a62714fae] 2016-03-09 18:53:54 -0800
Branch: master [606e0f984] 2016-03-09 18:53:53 -0800
Branch: REL9_5_STABLE [63b06e8fa] 2016-03-09 18:53:53 -0800
Branch: REL9_4_STABLE [43b491a81] 2016-03-09 18:53:54 -0800
Branch: REL9_3_STABLE [e069848a3] 2016-03-09 18:53:54 -0800
Branch: REL9_2_STABLE [c224d44f7] 2016-03-09 18:53:54 -0800
Branch: REL9_1_STABLE [d0e47bcd4] 2016-03-09 18:53:54 -0800
-->

    <listitem>
     <para>Предотвращение маловероятных сценариев потери данных в случае переименования файлов без соответствующих вызовов <function>fsync()</function> до и после (Мишель Пакье, Томас Вондра, Андрес Фройнд)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [71404af2a] 2016-03-22 17:56:20 -0400
Branch: REL9_5_STABLE [d8d5a00b1] 2016-03-22 17:56:06 -0400
-->

    <listitem>
     <para>Исправлено некорректное поведение при перепроверке только что изменённой строки в запросе, выполняющем <command>SELECT FOR UPDATE/SHARE</command> и обращающемся к отношениям, которые не нужно блокировать (Том Лейн)</para>

     <para>Строки из незаблокированных отношений некорректно воспринимались во время перепроверки как полностью содержащие NULL, что могло привести к неправильному выводу о том, что изменённая строка больше не удовлетворяет условию <literal>WHERE</literal>, или к выдаче NULL в результате.</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a9d199f6d] 2016-03-02 23:31:39 -0500
Branch: REL9_5_STABLE [429d68465] 2016-03-02 23:31:39 -0500
Branch: REL9_4_STABLE [597e41e45] 2016-03-02 23:31:39 -0500
-->

    <listitem>
     <para>Исправлена ошибка в <function>json_to_record()</function>, возникавшая, когда поле входного объекта содержало вложенный объект с полем, имя которого совпадало с именем одного из запрошенных выходных столбцов (Том Лейн)</para>
    </listitem>

<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [94c745eb1] 2016-02-21 10:30:49 -0500
Branch: REL9_5_STABLE [68d68ff83] 2016-02-21 10:40:39 -0500
-->

    <listitem>
     <para>Исправлен бессмысленный результат функции <function>jsonb_object()</function> в форме с двумя аргументами при вызове с пустыми массивами (Мишель Пакье, Эндрю Дунстан)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [384dfbde1] 2016-03-23 10:43:13 -0400
Branch: REL9_5_STABLE [5f95521b3] 2016-03-23 10:43:24 -0400
-->

    <listitem>
     <para>Исправлено некорректное поведение в <function>jsonb_set()</function> при преобразовании элемента массива путей в целое значение для использования в качестве индекса массива (Мишель Пакье)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [55c3a04d6] 2016-03-17 15:50:33 -0400
Branch: REL9_5_STABLE [d0a585c69] 2016-03-17 15:50:33 -0400
Branch: REL9_4_STABLE [17a250b18] 2016-03-17 15:50:33 -0400
-->

    <listitem>
     <para>Исправлено некорректное форматирование отрицательных смещений часовых поясов в функции <function>to_char()</function> с применением кода формата <literal>OF</literal> (Томас Мунро, Том Лейн)</para>
    </listitem>

<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [fd658dbb3] 2016-03-15 18:04:39 -0400
Branch: REL9_5_STABLE [3f14d8d59] 2016-03-15 18:04:48 -0400
-->

    <listitem>
     <para>Исправлена некорректное протоколирование событий ожидания, имеющих место в <command>INSERT ... ON CONFLICT</command> (Питер Геохеган)</para>

     <para>В выводимых сообщениях иногда отмечалось, что ожидание было вызвано ограничением-исключением, хотя такое ограничение было не при чём.</para>
    </listitem>

<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [d34794f7d] 2016-03-06 02:29:04 +0900
Branch: REL9_5_STABLE [f95f1ce00] 2016-03-06 02:43:17 +0900
Branch: REL9_4_STABLE [a9613ee69] 2016-03-06 02:43:26 +0900
-->

    <listitem>
     <para>Параметр <xref linkend="recovery-min-apply-delay"/> игнорируется, пока восстановление не достигло согласованного состояния (Мишель Пакье)</para>

     <para>Ранее, резервные серверы откладывали применение записей WAL, учитывая <varname>recovery_min_apply_delay</varname>, даже при воспроизведении начальной порции WAL, необходимой для приведения базы данных в рабочее состояние. Так как резервный сервер бесполезен, пока он не достиг согласованного состояния базы данных, это кажется напрасным.</para>
    </listitem>

<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [481725c0b] 2016-02-19 08:31:12 +0000
Branch: REL9_5_STABLE [c479024d3] 2016-02-19 08:31:39 +0000
Branch: REL9_4_STABLE [6830cae5f] 2016-02-19 08:32:28 +0000
Branch: REL9_3_STABLE [71e3cff2e] 2016-02-19 08:33:33 +0000
Branch: REL9_2_STABLE [c063d3c43] 2016-02-19 08:33:52 +0000
Branch: REL9_1_STABLE [ca32f125b] 2016-02-19 08:35:02 +0000
-->

    <listitem>
     <para>Корректная обработка ситуаций, когда <literal>pg_subtrans</literal> на грани зацикливания XID при запуске сервера (Джефф Джейнс)</para>
    </listitem>

<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [c8f621c43] 2016-03-05 18:02:20 -0800
Branch: REL9_5_STABLE [5990a034a] 2016-03-05 18:02:20 -0800
Branch: REL9_4_STABLE [3b94b3a49] 2016-03-05 18:02:20 -0800
Branch: master [fd45d16f6] 2016-03-06 16:27:20 -0800
Branch: REL9_5_STABLE [5d1826fe7] 2016-03-06 16:27:20 -0800
Branch: REL9_4_STABLE [fb3ea0465] 2016-03-06 16:27:20 -0800
Branch: master [b63bea5fd] 2016-03-07 14:24:03 -0800
Branch: REL9_5_STABLE [250e5bd71] 2016-03-07 14:24:52 -0800
Branch: REL9_4_STABLE [e3e84fd35] 2016-03-07 14:24:58 -0800
Author: Andres Freund <andres@anarazel.de>
Branch: master [0bda14d54] 2016-03-05 18:02:20 -0800
Branch: REL9_5_STABLE [e76e365be] 2016-03-05 18:02:20 -0800
Branch: REL9_4_STABLE [a50f50a65] 2016-03-05 18:02:20 -0800
Author: Andres Freund <andres@anarazel.de>
Branch: master [d9e903f3c] 2016-03-05 18:02:20 -0800
Branch: REL9_5_STABLE [6e759cefe] 2016-03-05 18:02:20 -0800
Branch: REL9_4_STABLE [465dd92d9] 2016-03-05 18:02:20 -0800
Author: Andres Freund <andres@anarazel.de>
Branch: master [7c17aac69] 2016-03-02 23:42:21 -0800
Branch: REL9_5_STABLE [f8a75881f] 2016-03-02 23:43:42 -0800
-->

    <listitem>
     <para>Исправление разнообразных ошибок в логическом декодировании (Андрес Фройнд)</para>

     <para>Проблемы возникали с кортежами больше одной страницы с вариантом идентификации реплики <literal>FULL</literal>, при выполнении команд <command>UPDATE</command>, изменяющих первичный ключ в транзакции, достаточно большой для выгрузки на диск, а также с некорректными ошибками <quote>subxact logged without previous toplevel record</quote> (транзакция внесена в журнал без предыдущей записи верхнего уровня) и с некорректным выводом времени фиксирования транзакций.</para>
    </listitem>

<!--
Author: Dean Rasheed <dean.a.rasheed@gmail.com>
Branch: master [41fedc246] 2016-02-29 12:28:06 +0000
Branch: REL9_5_STABLE [f1dfcf63d] 2016-02-29 12:31:25 +0000
Branch: REL9_4_STABLE [9b69d5c1d] 2016-02-29 12:34:33 +0000
-->

    <listitem>
     <para>Исправлена ошибка планировщика, возникавшая с вложенными представлениями с барьерами безопасности, когда внешнее представление содержит предложение <literal>WHERE</literal> с коррелирующим подзапросом (Дин Рашид)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ab4ff2889] 2016-03-13 16:44:31 -0400
Branch: REL9_5_STABLE [aa9c4e71c] 2016-03-13 16:44:10 -0400
-->

    <listitem>
     <para>Ликвидирована утечка памяти при поиске по индексу GIN (Том Лейн)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [907e4dd2b] 2016-02-28 23:39:20 -0500
Branch: REL9_5_STABLE [2d43c45e9] 2016-02-28 23:40:04 -0500
Branch: REL9_4_STABLE [80c925c7b] 2016-02-28 23:40:13 -0500
Branch: REL9_3_STABLE [0c4457de8] 2016-02-28 23:40:21 -0500
Branch: REL9_2_STABLE [47792639c] 2016-02-28 23:40:28 -0500
Branch: REL9_1_STABLE [7d6c58aa1] 2016-02-28 23:40:35 -0500
-->

    <listitem>
     <para>Предотвращён крах в исключительной ситуации при попытке повторно освободить строки, выводимые <function>localeconv()</function> (Том Лейн)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b3e05097e] 2016-03-06 19:20:55 -0500
Branch: REL9_5_STABLE [c2d61adc3] 2016-03-06 19:21:03 -0500
Branch: REL9_4_STABLE [3fa4715c5] 2016-03-06 19:21:03 -0500
Branch: REL9_3_STABLE [a35f85a52] 2016-03-06 19:21:03 -0500
Branch: REL9_2_STABLE [8894c9f79] 2016-03-06 19:21:03 -0500
Branch: REL9_1_STABLE [fe747b741] 2016-03-06 19:21:03 -0500
-->

    <listitem>
     <para>Исправлен разбор файлов аффиксов для словарей <literal>ispell</literal> (Том Лейн)</para>

     <para>Код разбора мог работать неправильно, если файл аффиксов содержит символы, которые могут менять размер в байтах при преобразовании регистра, как например, символ <literal>I</literal> в турецких локалях UTF8.</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [51e78ab4f] 2016-02-10 19:30:11 -0500
Branch: REL9_5_STABLE [b10635bb5] 2016-02-10 19:30:11 -0500
Branch: REL9_4_STABLE [19e469410] 2016-02-10 19:30:12 -0500
Branch: REL9_3_STABLE [24ce5754a] 2016-02-10 19:30:12 -0500
Branch: REL9_2_STABLE [64f99a2ee] 2016-02-10 19:30:12 -0500
Branch: REL9_1_STABLE [e56acbe2a] 2016-02-10 19:30:12 -0500
-->

    <listitem>
     <para>Исключено использование <function>sscanf()</function> при разборе файлов словарей <literal>ispell</literal> (Артур Закиров)</para>

     <para>Это устраняет проблему переносимости на платформы на базе FreeBSD (включая macOS).</para>
    </listitem>

<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [5882ca668] 2016-02-19 22:47:50 -0500
Branch: REL9_5_STABLE [377a1af56] 2016-02-19 22:48:04 -0500
-->

    <listitem>
     <para>Исправление кода атомарных операций, генерируемого на PPC компилятором IBM xlc (Ной Миш)</para>

     <para>Эта ошибка приводила к редким сбоям при параллельных операциях на этой платформе.</para>
    </listitem>

<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [9d9038824] 2016-03-10 14:10:18 +0100
Branch: REL9_5_STABLE [ad9a15d3f] 2016-03-10 14:10:32 +0100
Branch: REL9_4_STABLE [8857488b6] 2016-03-10 14:10:41 +0100
Branch: REL9_3_STABLE [270d8a12e] 2016-03-10 14:10:48 +0100
Branch: REL9_2_STABLE [78b597808] 2016-03-10 14:10:54 +0100
Branch: REL9_1_STABLE [3e6385e27] 2016-03-10 14:11:01 +0100
-->

    <listitem>
     <para>Предотвращение сбоя на старых версиях Windows (до 7SP1/2008R2SP1) с процессором с поддержкой AVX2 и с Postgres, собранным компилятором Visual Studio 2013 (Кристиан Ульрих)</para>

     <para>Это обходное решение проблемы в библиотеки выполнения Visual Studio 2013, которая, как заявили в Microsoft, не будет исправляться в этой версии.</para>
    </listitem>

<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [9445db925] 2016-03-04 11:53:20 -0500
Branch: REL9_5_STABLE [0315dfa8f] 2016-03-04 11:57:22 -0500
Branch: REL9_4_STABLE [8de488d00] 2016-03-04 11:57:23 -0500
Branch: REL9_3_STABLE [54139ac22] 2016-03-04 11:57:31 -0500
Branch: REL9_2_STABLE [c658d5a9b] 2016-03-04 11:57:36 -0500
Branch: REL9_1_STABLE [b4895bf79] 2016-03-04 11:57:40 -0500
-->

    <listitem>
     <para>В <application>psql</application> исправлена логика завершения команд табуляцией с учётом особенностей многобайтных символов (Киотаро Хоригучи, Роберт Хаас)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [1bee54e51] 2016-03-14 11:31:22 -0400
Branch: REL9_4_STABLE [13108dd0e] 2016-03-14 11:31:34 -0400
Branch: REL9_3_STABLE [0576de5c7] 2016-03-14 11:31:39 -0400
Branch: REL9_2_STABLE [39b3ea714] 2016-03-14 11:31:44 -0400
Branch: REL9_1_STABLE [2d61d88d8] 2016-03-14 11:31:49 -0400
-->

    <listitem>
     <para>В <application>psql</application> исправлено завершение табуляцией команды <literal>SECURITY LABEL</literal> (Том Лейн)</para>

     <para>При нажатии TAB после ввода <literal>SECURITY LABEL</literal> мог произойти сбой или выдавались посторонние ключевые слова.</para>
    </listitem>

<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [2ffa86962] 2016-02-10 20:34:02 -0500
Branch: REL9_5_STABLE [725f0ce29] 2016-02-10 20:34:24 -0500
Branch: REL9_4_STABLE [4492ab53b] 2016-02-10 20:34:30 -0500
Branch: REL9_3_STABLE [198242ede] 2016-02-10 20:34:35 -0500
Branch: REL9_2_STABLE [4421b5253] 2016-02-10 20:34:41 -0500
Branch: REL9_1_STABLE [f97664cf5] 2016-02-10 20:34:48 -0500
-->

    <listitem>
     <para>Команда <application>pg_ctl</application> теперь принимает тайм-аут ожидания из переменной среды <envar>PGCTLTIMEOUT</envar>, если этот тайм-аут не задан в командной строке (Ной Миш)</para>

     <para>Это упрощает тестирование более медленных узлов на ферме сборки, позволяя индивидуально задавать время, превышающее обычное, для запуска и завершения главного процесса (postmaster).</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b642e50ae] 2016-03-07 10:40:44 -0500
Branch: REL9_5_STABLE [45b87cc57] 2016-03-07 10:40:53 -0500
Branch: REL9_4_STABLE [89f8372cb] 2016-03-07 10:40:57 -0500
Branch: REL9_3_STABLE [b73e81605] 2016-03-07 10:41:01 -0500
Branch: REL9_2_STABLE [15d43196c] 2016-03-07 10:41:07 -0500
Branch: REL9_1_STABLE [5a39c7395] 2016-03-07 10:41:11 -0500
-->

    <listitem>
     <para>Исправление ошибочной проверки состояния службы Windows в <application>pg_ctl</application> (Мануэль Матар)</para>

     <para>В предыдущих корректирующих выпусках были попытки исправить <application>pg_ctl</application>, чтобы он правильно определял, нужно ли отправлять сообщения в журнал событий Window, но в итоге проверка оказалась противоположной.</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [47211af17] 2016-03-16 23:18:07 -0400
Branch: REL9_5_STABLE [8ee2e5f78] 2016-03-16 23:18:07 -0400
Branch: REL9_4_STABLE [23cb32660] 2016-03-16 23:18:07 -0400
Branch: REL9_3_STABLE [c02aae418] 2016-03-16 23:18:07 -0400
Branch: REL9_2_STABLE [be6f9ea2e] 2016-03-16 23:18:08 -0400
Branch: REL9_1_STABLE [1965a8ce1] 2016-03-16 23:18:08 -0400
-->

    <listitem>
     <para>Исправлено поведение <application>pgbench</application>, чтобы сочетание параметров <literal>-C</literal> и <literal>-M prepared</literal> обрабатывалось корректно (Том Лейн)</para>
    </listitem>

<!--
Author: Bruce Momjian <bruce@momjian.us>
Branch: master [3386f34cd] 2016-02-18 18:32:27 -0500
Branch: REL9_5_STABLE [6f43c4d34] 2016-02-18 18:32:26 -0500
Branch: REL9_4_STABLE [bec4d0ffb] 2016-02-18 18:32:26 -0500
Branch: REL9_3_STABLE [bf26c4f44] 2016-02-18 18:32:26 -0500
-->

    <listitem>
     <para>В <application>pg_upgrade</application> теперь пропускается создание скрипта удаления, когда новый каталог данных находится внутри старого (Брюс Момджян)</para>

     <para>Выполнение этого скрипта «вслепую» в таких случаях приводило к потере нового каталога данных.</para>
    </listitem>

<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [e66197fa2] 2016-03-08 13:42:57 -0800
Branch: REL9_5_STABLE [68dababfe] 2016-03-08 13:42:58 -0800
Branch: REL9_4_STABLE [6041d388c] 2016-03-08 13:42:58 -0800
Branch: REL9_3_STABLE [44f9f1f2d] 2016-03-08 13:42:58 -0800
Branch: REL9_2_STABLE [ee06c97e4] 2016-03-08 13:42:58 -0800
Branch: REL9_1_STABLE [c5f1fbbfb] 2016-03-08 13:42:58 -0800
-->

    <listitem>
     <para>В PL/Perl пустые массивы Postgres стали корректно переводиться в пустые массивы Perl (Алекс Хансакер)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [66f503868] 2016-02-16 21:08:15 -0500
Branch: REL9_5_STABLE [2ce19f8a5] 2016-02-16 21:08:15 -0500
Branch: REL9_4_STABLE [f461fa7d0] 2016-02-16 21:08:15 -0500
Branch: REL9_3_STABLE [b3ec98c8b] 2016-02-16 21:08:15 -0500
Branch: REL9_2_STABLE [7d48349fd] 2016-02-16 21:08:15 -0500
Branch: REL9_1_STABLE [875973f5d] 2016-02-16 21:08:15 -0500
-->

    <listitem>
     <para>Код PL/Python адаптирован для работы с именами функций, не подходящими для идентификаторов Python (Джим Нэсби)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [48e6c943e] 2016-02-18 15:40:35 -0500
Branch: REL9_5_STABLE [0276bbd62] 2016-02-18 15:40:35 -0500
Branch: REL9_4_STABLE [b7547166f] 2016-02-18 15:40:35 -0500
Branch: REL9_3_STABLE [9dfb5b940] 2016-02-18 15:40:35 -0500
Branch: REL9_2_STABLE [29f299728] 2016-02-18 15:40:35 -0500
Branch: REL9_1_STABLE [0f359c7de] 2016-02-18 15:40:36 -0500
-->

    <listitem>
     <para>Исправление ряда ошибок в статистике, возвращаемой функцией <function>pgstatindex()</function> из <filename>contrib/pgstattuple</filename> (Том Лейн)</para>
    </listitem>

<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [5d0320105] 2016-03-19 18:36:35 -0400
Branch: REL9_5_STABLE [2f38b3e7d] 2016-03-19 18:44:04 -0400
Branch: REL9_4_STABLE [6336ca916] 2016-03-19 18:49:19 -0400
Branch: REL9_3_STABLE [a0adf3852] 2016-03-19 18:51:01 -0400
Branch: REL9_2_STABLE [89bf78a9b] 2016-03-19 18:51:01 -0400
Branch: REL9_1_STABLE [2aa9fd963] 2016-03-19 18:59:41 -0400
-->

    <listitem>
     <para>Ликвидация зависимости от <literal>psed</literal> в сборках с MSVC, так как ядро Perl больше не предоставляет её (Мишель Пакье, Эндрю Дунстан)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [676265eb7] 2016-03-25 19:03:08 -0400
Branch: REL9_5_STABLE [31d02ebf7] 2016-03-25 19:03:24 -0400
Branch: REL9_4_STABLE [de371e68a] 2016-03-25 19:03:32 -0400
Branch: REL9_3_STABLE [8e16592d4] 2016-03-25 19:03:39 -0400
Branch: REL9_2_STABLE [96fa37459] 2016-03-25 19:03:47 -0400
Branch: REL9_1_STABLE [e5fd35cc5] 2016-03-25 19:03:54 -0400
-->

    <listitem>
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016c, включающее изменения правил перехода на летнее время в Азербайджане, Чили, на Гаити, в Палестине и России (в Алтайском крае, Астраханской, Кировской и Ульяновской областях, а также на Сахалине), плюс корректировку исторических данных для Литвы, Молдавии и России (для Калининграда, Самары и Волгограда).</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5-1">
  <title>Выпуск 9.5.1</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-02-11</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.5.0. За информацией о нововведениях версии 9.5 обратитесь к <xref remap="3" linkend="release-9-5"/>.</para>

  <sect2>
   <title>Миграция на версию 9.5.1</title>

   <para>Если используется версия 9.5.X, выгрузка/восстановление базы не требуется.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3bb3f42f3] 2016-02-08 10:25:40 -0500
Branch: REL9_5_STABLE [a61de2bc1] 2016-02-08 10:25:40 -0500
Branch: REL9_4_STABLE [fdc3139e2] 2016-02-08 10:25:40 -0500
Branch: REL9_3_STABLE [6403a6b74] 2016-02-08 10:25:40 -0500
Branch: REL9_2_STABLE [e93516cf7] 2016-02-08 10:25:40 -0500
Branch: REL9_1_STABLE [98d6b7305] 2016-02-08 10:25:40 -0500
-->

    <listitem>
     <para>Исправлены проблемы с бесконечными циклами и переполнениями буфера в регулярных выражениях (Том Лейн)</para>

     <para>С очень большими диапазонами символов в некоторых случаях можно было добиться бесконечного цикла, а в других — переполнения памяти. (CVE-2016-0773)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f867ce551] 2016-02-07 12:29:32 -0500
Branch: REL9_5_STABLE [129db3cbe] 2016-02-07 12:29:17 -0500
-->

    <listitem>
     <para>Исправлено упущение, из-за которого в редких случаях при соединениях по хешу пропускалось соединение некоторых кортежей внутреннего отношения (Томас Вондра, Том Лейн)</para>
    </listitem>

<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [a6897efab] 2016-02-08 11:03:31 +0100
Branch: REL9_5_STABLE [87dbc72a7] 2016-02-08 11:03:37 +0100
-->

    <listitem>
     <para>Предотвращено проталкивание предложений <literal>HAVING</literal> в подзапросы, когда применяются наборы группирования (Эндрю Гирт)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [cc2ca9319] 2016-02-07 14:57:24 -0500
Branch: REL9_5_STABLE [82406d6ff] 2016-02-07 14:57:24 -0500
-->

    <listitem>
     <para>Исправление пересборки арбитра <literal>ON CONFLICT</literal> в предложении <literal>WHERE</literal> (Питер Геохеган)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b8682a715] 2016-01-26 15:38:33 -0500
Branch: REL9_5_STABLE [2acb682f6] 2016-01-26 15:38:33 -0500
Branch: REL9_4_STABLE [2b3983158] 2016-01-26 15:38:33 -0500
Branch: REL9_3_STABLE [9bbfca8fd] 2016-01-26 15:38:33 -0500
Branch: REL9_2_STABLE [3a7af9d73] 2016-01-26 15:38:33 -0500
Branch: REL9_1_STABLE [b043df093] 2016-01-26 15:38:33 -0500
-->

    <listitem>
     <para>Спецкоды <literal>%h</literal> и <literal>%r</literal> в <varname>log_line_prefix</varname> стали работать в сообщениях, выдаваемых в режиме <varname>log_connections</varname> (Том Лейн)</para>

     <para>Ранее <literal>%h</literal>/<literal>%r</literal> начинали работать только после того, как новый сеанс выдавал сообщение <quote>connection received</quote> (соединение получено); теперь они работают и для этого сообщения.</para>
    </listitem>

<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [6a61d1ff9] 2016-01-14 13:06:03 +0100
Branch: REL9_5_STABLE [3276ca303] 2016-01-14 13:07:20 +0100
Branch: REL9_4_STABLE [ab49f87d5] 2016-01-14 13:07:35 +0100
Branch: REL9_3_STABLE [77d8edcf5] 2016-01-14 13:07:45 +0100
Branch: REL9_2_STABLE [df0bd5a0f] 2016-01-14 13:07:55 +0100
Branch: REL9_1_STABLE [b1c0f92eb] 2016-01-14 13:08:10 +0100
-->

    <listitem>
     <para>Ликвидация утечки маркера в процессе аутентификации SSPI (Кристиан Ульрих)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [7e2247047] 2016-01-29 10:28:02 +0100
Branch: REL9_5_STABLE [56251f396] 2016-01-29 10:28:02 +0100
Branch: REL9_4_STABLE [5849b6e32] 2016-01-29 10:28:02 +0100
Branch: REL9_3_STABLE [db678ca16] 2016-01-29 10:28:03 +0100
Branch: REL9_2_STABLE [a362cc2e3] 2016-01-29 10:28:03 +0100
Branch: REL9_1_STABLE [ed5f57218] 2016-01-29 10:28:03 +0100
-->

    <listitem>
     <para>Исправлена команда <literal>\det</literal> в <application>psql</application>, чтобы она воспринимала шаблон, передаваемый ей в аргументе, так же, как другие команды <literal>\d</literal> с шаблонами, которые могут дополняться схемами (Рис Харт)</para>
    </listitem>

<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [a96761391] 2016-01-07 11:59:08 -0300
Branch: REL9_5_STABLE [744d01c9a] 2016-01-07 11:59:08 -0300
Branch: REL9_4_STABLE [c7aca3d45] 2016-01-07 11:59:08 -0300
Branch: REL9_3_STABLE [74d4009b8] 2016-01-07 11:59:08 -0300
Branch: REL9_2_STABLE [5c4cbd5d1] 2016-01-07 11:59:08 -0300
Branch: REL9_1_STABLE [b96f6f444] 2016-01-07 11:59:08 -0300
-->

    <listitem>
     <para>Программа <application>pg_ctl</application> в Windows должна выбирать, куда направлять вывод, проверяя состояние службы, а не то, что устройство стандартного вывода является терминалом (Мишель Пакье)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e72d7d853] 2016-01-13 18:55:27 -0500
Branch: REL9_5_STABLE [c42df2d46] 2016-01-13 18:55:27 -0500
Branch: REL9_4_STABLE [7393208b5] 2016-01-13 18:55:27 -0500
Branch: REL9_3_STABLE [b87403f70] 2016-01-13 18:55:27 -0500
Branch: REL9_2_STABLE [be2b27651] 2016-01-13 18:55:27 -0500
Branch: REL9_1_STABLE [5108013db] 2016-01-13 18:55:27 -0500
-->

    <listitem>
     <para>Исправление разнообразных ошибок в исключительных случаях при обработке объектов-членов расширений в <application>pg_dump</application> (Том Лейн)</para>
    </listitem>

<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [df43fcf45] 2016-01-22 20:04:35 -0300
Branch: REL9_5_STABLE [1e910cf5b] 2016-01-22 20:04:35 -0300
-->

    <listitem>
     <para>Исправлено некорректное заключение в кавычки имён ограничений доменов в <application>pg_dump</application> (Элвис Пранскевичус)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0ed707e9b] 2016-02-04 00:26:10 -0500
Branch: REL9_5_STABLE [b99dd7170] 2016-02-04 00:26:10 -0500
Branch: REL9_4_STABLE [411e2b0d5] 2016-02-04 00:26:10 -0500
Branch: REL9_3_STABLE [aefbc208b] 2016-02-04 00:26:10 -0500
Branch: REL9_2_STABLE [4f58a7003] 2016-02-04 00:26:10 -0500
Branch: REL9_1_STABLE [9c704632c] 2016-02-04 00:26:10 -0500
-->

    <listitem>
     <para>Теперь <application>pg_dump</application> помечает триггеры представления, чтобы они обрабатывались после правил, во избежание ошибок при параллельном <application>pg_restore</application> (Том Лейн)</para>
    </listitem>

<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [64f5edca2] 2016-02-01 08:23:41 -0500
Branch: REL9_5_STABLE [829757c8a] 2016-02-01 08:26:07 -0500
Branch: REL9_4_STABLE [c33d1a8d5] 2016-02-03 09:15:29 -0500
Branch: REL9_3_STABLE [014796aa3] 2016-02-03 09:19:58 -0500
Branch: REL9_2_STABLE [b63a4f418] 2016-02-03 09:21:44 -0500
Branch: REL9_1_STABLE [4c8b07d3c] 2016-02-03 09:25:34 -0500
-->

    <listitem>
     <para>Внедрение в <application>pgbench</application> защиты от переполнения в исключительных случаях при вычислении заданных в скрипте операторов деления или взятия остатка (Фабьен Коэльо, Мишель Пакье)</para>
    </listitem>

<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [4aecd22d3] 2016-01-05 17:25:12 -0300
Branch: REL9_5_STABLE [7ef311eb4] 2016-01-05 17:25:12 -0300
-->

    <listitem>
     <para>Подавление бесполезного предупреждения при подключении <application>pg_receivexlog</application> к серверу версии до 9.4 (Марко Ненчарини)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [866566a69] 2016-01-11 19:55:39 -0500
Branch: REL9_5_STABLE [db8fa56d6] 2016-01-11 19:55:39 -0500
Branch: REL9_4_STABLE [22815752e] 2016-01-11 19:55:40 -0500
Branch: REL9_3_STABLE [0ddeaba7e] 2016-01-11 19:55:40 -0500
Branch: REL9_2_STABLE [3843ba510] 2016-01-11 19:55:40 -0500
Branch: master [fb6fcbd33] 2016-01-11 20:06:36 -0500
Branch: REL9_5_STABLE [5ef26b8de] 2016-01-11 20:06:47 -0500
-->

    <listitem>
     <para>Решение проблем с выгрузкой/перезагрузкой данных при одновременном использовании <application>plpython2</application> и <application>plpython3</application> (Том Лейн)</para>

     <para>В принципе можно использовать обе версии <application>PL/Python</application> в одной базе данных, но не в одном сеансе (так как две версии <application>libpython</application> нельзя безопасно использовать одновременно). Однако и <application>pg_restore</application>, и <application>pg_upgrade</application> в своей работе нарушают это ограничение одного сеанса. В качестве обходного решения изменено время проверки версий.</para>
    </listitem>

<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: REL9_4_STABLE [f1b898759] 2015-11-14 13:43:43 -0500
Branch: REL9_3_STABLE [a37ab812c] 2015-11-14 13:44:09 -0500
Branch: REL9_2_STABLE [82076c1e4] 2015-11-14 13:53:26 -0500
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_5_STABLE [a66c1fcdd] 2016-01-08 11:39:28 -0500
-->

    <listitem>
     <para>Исправление регрессионных тестов <application>PL/Python</application> для совместимости с Python 3.5 (Питер Эйзентраут)</para>
    </listitem>

<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [f4aa3a18a] 2016-02-05 20:22:51 -0500
Branch: REL9_5_STABLE [0089dd34a] 2016-02-05 20:23:04 -0500
Branch: REL9_4_STABLE [ed6deeb7a] 2016-02-05 20:23:07 -0500
Branch: REL9_3_STABLE [34e91736b] 2016-02-05 20:23:11 -0500
Branch: REL9_2_STABLE [de9766d39] 2016-02-05 20:23:14 -0500
Branch: REL9_1_STABLE [b1f591c50] 2016-02-05 20:23:19 -0500
-->

    <listitem>
     <para>Недопущение установки определённых параметров <application>PL/Java</application> непривилегированными пользователями (Ной Миш)</para>

     <para>Это изменение ликвидирует угрозу, связанную с уязвимостью в <application>PL/Java</application> (CVE-2016-0766), исправленной в <application>PL/Java</application> (эти параметры теперь доступны только суперпользователю). Чтобы ликвидировать угрозу безопасности для тех серверов <productname>PostgreSQL</productname>, которые обновляются чаще, чем <application>PL/Java</application>, это изменение внесено также в код ядра сервера.</para>
    </listitem>

<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [7a58d19b0] 2016-02-01 13:21:00 +0100
Branch: REL9_5_STABLE [40482e606] 2016-02-01 13:20:37 +0100
Branch: REL9_3_STABLE [0b55fef39] 2016-02-01 13:19:10 +0100
Branch: REL9_2_STABLE [d9ce5d201] 2016-02-01 13:19:34 +0100
Branch: REL9_1_STABLE [79782b407] 2016-02-01 13:19:43 +0100
Author: Andres Freund <andres@anarazel.de>
Branch: REL9_4_STABLE [33b26426e] 2016-02-08 11:10:14 +0100
-->

    <listitem>
     <para>Исправление заголовочных файлов, поставляемых с <application>ecpg</application>: в директиву препроцессора не должен включаться комментарий, продолжающийся в следующей строке (Михаэль Мескес)</para>

     <para>Такой комментарий не принимается препроцессором <application>ecpg</application>. Пока не вполне ясно, следует ли скорректировать сам <application>ecpg</application>.</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e6ecc93a1] 2016-02-03 01:39:48 -0500
Branch: REL9_5_STABLE [1c291624b] 2016-02-03 01:39:08 -0500
Branch: REL9_4_STABLE [aa223a037] 2016-02-03 01:39:08 -0500
Branch: REL9_3_STABLE [1f2b195eb] 2016-02-03 01:39:08 -0500
-->

    <listitem>
     <para>Исправление в <function>hstore_to_json_loose()</function> проверки, можно ли преобразовать значение <type>hstore</type> в число JSON (Том Лейн)</para>

     <para>Ранее эту функцию можно было ввести в заблуждение не алфавитно-цифровыми замыкающими символами, что приводило к формированию синтаксически некорректного JSON.</para>
    </listitem>

<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [9418d79a7] 2016-02-04 21:17:53 -0500
Branch: REL9_5_STABLE [453d40817] 2016-02-04 21:17:46 -0500
Branch: REL9_4_STABLE [1f3294c22] 2016-02-04 21:15:57 -0500
Branch: master [37c84570b] 2016-02-04 22:27:13 -0500
Branch: REL9_5_STABLE [d160e2a34] 2016-02-04 22:27:38 -0500
Branch: REL9_4_STABLE [2099b911d] 2016-02-04 22:27:47 -0500
-->

    <listitem>
     <para>В <filename>contrib/postgres_fdw</filename> исправлены ошибки, вызванные использованием <literal>tableoid</literal> в командах, модифицирующих данные (Эцуро Фудзита, Роберт Хаас)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a396144ac] 2016-01-22 11:53:06 -0500
Branch: REL9_5_STABLE [47acf3add] 2016-01-22 11:53:06 -0500
-->

    <listitem>
     <para>Исправлено некорректно введённое ограничение <literal>NAMEDATALEN</literal> 256 байтами (Роберт Хаас, Том Лейн)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3343ea9e8] 2016-01-05 15:47:05 -0500
Branch: REL9_5_STABLE [8805af088] 2016-01-05 15:47:05 -0500
Branch: REL9_4_STABLE [8c558b2e9] 2016-01-05 15:47:05 -0500
Branch: REL9_3_STABLE [6d899f098] 2016-01-05 15:47:05 -0500
-->

    <listitem>
     <para>Улучшение воспроизводимости сборки путём обеспечения фиксированного порядка имён файлов, передаваемых компоновщику (Кристоф Берг)</para>

     <para>Это устраняет возможные двоичные различия создаваемых исполняемых файлов от сборки к сборке.</para>
    </listitem>

<!--
Author: Bruce Momjian <bruce@momjian.us>
Branch: master [216d56843] 2016-01-19 23:30:29 -0500
Branch: REL9_5_STABLE [34bda20ae] 2016-01-19 23:30:29 -0500
Branch: REL9_4_STABLE [8b3d52801] 2016-01-19 23:30:29 -0500
Branch: REL9_3_STABLE [7a47262ce] 2016-01-19 23:30:28 -0500
Branch: REL9_2_STABLE [49d65e857] 2016-01-19 23:30:28 -0500
Branch: REL9_1_STABLE [b1bc38144] 2016-01-19 23:30:28 -0500
-->

    <listitem>
     <para>Включение <filename>dynloader.h</filename> в список устанавливаемых заголовочных файлов при сборке с MSVC (Брюс Момджян, Мишель Пакье)</para>
    </listitem>

<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a73311e52] 2016-02-05 10:59:09 -0500
Branch: REL9_5_STABLE [37e694632] 2016-02-05 10:59:21 -0500
Branch: REL9_4_STABLE [31b792f61] 2016-02-05 10:59:26 -0500
Branch: REL9_3_STABLE [9a3475b84] 2016-02-05 10:59:31 -0500
Branch: REL9_2_STABLE [32f17a2e7] 2016-02-05 10:59:35 -0500
Branch: REL9_1_STABLE [6887d72d0] 2016-02-05 10:59:39 -0500
-->

    <listitem>
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016a, включающее изменения правил перехода на летнее время на Каймановых островах, в Метлакалте и Забайкальском крае, плюс корректировку исторических данных для Пакистана.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-5">
  <title>Выпуск 9.5</title>

  <formalpara>
   <title>Дата выпуска:</title>
   <para>2016-01-07</para>
  </formalpara>

  <sect2>
   <title>Обзор</title>

   <para>В число ключевых усовершенствований <productname>PostgreSQL</productname> 9.5 входят:</para>

   <!-- This list duplicates items below, but without authors or details-->

   <itemizedlist>

    <listitem>
     <para>Возможность превращать команды <link linkend="sql-on-conflict"><command>INSERT</command></link>, вызывающие конфликты ограничений, в команды <command>UPDATE</command>, либо игнорировать их</para>
    </listitem>

    <listitem>
     <para>Добавление в <literal>GROUP BY</literal> аналитической функциональности: <link linkend="queries-grouping-sets"><literal>GROUPING SETS</literal></link>, <link linkend="queries-grouping-sets"><literal>CUBE</literal></link> и <link linkend="queries-grouping-sets"><literal>ROLLUP</literal></link></para>
    </listitem>

    <listitem>
     <para>Добавление <link linkend="ddl-rowsecurity">механизма защиты на уровне строк</link></para>
    </listitem>

    <listitem>
     <para>Создание механизмов для отслеживания <link linkend="replication-origins">прогресса репликации</link>, включая средства идентификации источника отдельных изменений при логической репликации</para>
    </listitem>

    <listitem>
     <para>Добавление <link linkend="brin">блочно-зональных индексов</link> (<acronym>BRIN</acronym>)</para>
    </listitem>

    <listitem>
     <para>Существенное увеличение скорости сортировки</para>
    </listitem>

    <listitem>
     <para>Существенное увеличение производительности на многопроцессорных машинах</para>
    </listitem>

   </itemizedlist>

   <para>Предыдущие пункты более подробно описаны в следующих разделах.</para>

  </sect2>

  <sect2>

  <title>Миграция на версию 9.5</title>

   <para>Тем, кто хочет мигрировать данные из любой предыдущей версии, необходимо выполнить выгрузку/загрузку данных с помощью <xref linkend="app-pg-dumpall"/> или воспользоваться <xref linkend="pgupgrade"/>.</para>

   <para>В версии 9.5 реализован ряд изменений, которые могут повлиять на совместимость с предыдущими выпусками. Рассмотрите следующие несовместимые аспекты:</para>

   <itemizedlist>

    <listitem>
<!--
2015-03-11 [c6b3c93] Tom Lane: Make operator precedence follow the SQL standar..
-->
     <para>Изменение <link linkend="sql-precedence">приоритета операторов</link> в соответствии со стандартом <acronym>SQL</acronym> (Том Лейн)</para>

     <para>Приоритет операторов <literal>&lt;=</literal>, <literal>&gt;=</literal> и <literal>&lt;&gt;</literal> был понижен до приоритета операторов <literal>&lt;</literal>, <literal>&gt;</literal> и <literal>=</literal>. Приоритет проверок <literal>IS</literal> (например, <replaceable>x</replaceable> <literal>IS NULL</literal>) был понижен и стал непосредственно ниже приоритета этих шести операторов сравнения. Также операторы из нескольких слов, начинающиеся с <literal>NOT</literal>, теперь имеют приоритет своего базового оператора (например, <literal>NOT BETWEEN</literal> теперь имеет тот же приоритет, что и <literal>BETWEEN</literal>), тогда как раньше их приоритет был несогласованным; они воспринимались как <literal>NOT</literal> по отношению к левому операнду, но при этом как базовый оператор по отношению к правому. Новый параметр конфигурации <xref linkend="guc-operator-precedence-warning"/> даёт возможность получать предупреждения о запросах, в которых эти изменения приоритета приводят к другому результату разбора запроса.</para>
    </listitem>

    <listitem>
<!--
2015-03-31 [0badb06] Bruce ..: pg_ctl:  change default shutdown mode from 'sma..
-->
     <para>Смена в <xref linkend="app-pg-ctl"/> выбираемого по умолчанию режима отключения с <literal>smart</literal> на <literal>fast</literal> (Брюс Момджян)</para>

     <para>Это означает, что теперь по умолчанию сервер будет принудительно прерывать существующие сеансы, а не просто ждать их завершения.</para>
    </listitem>

    <listitem>
<!--
2015-03-04 [1345cc6] Tom Lane: Use standard casting mechanism to convert type..
-->
     <para>Использование приведения присваивания для преобразований типов данных в присваиваниях <application>PL/pgSQL</application>, вместо перевода в текстовый вид и обратно (Том Лейн)</para>

     <para>Вследствие этого изменения при преобразовании булевых значений в строковые получаются значения <literal>true</literal> и <literal>false</literal>, а не <literal>t</literal> и <literal>f</literal>. Другие преобразования типов могут быть успешны в большем числе случаев, чем раньше; например, при присвоении числового значения <literal>3.9</literal> целочисленной переменной, ей будет присвоено 4, а не произойдёт ошибка, как раньше. Если для некоторых исходного и целевого типов приведение присваивания не определено, <application>PL/pgSQL</application> вернётся к старому поведению с преобразованием через вывод/ввод.</para>
    </listitem>

    <listitem>
<!--
2014-08-28 [11a020e] Andres..: Allow escaping of option values for options pas..
-->
     <para>Возможность использования экранирования обратной косой чертой символов в <link linkend="libpq-connect-options">параметрах командной строки сервера</link> (Андрес Фройнд)</para>

     <para>Ранее, пробелы в строке параметров всегда служили разделителями параметров, так что не было никакой возможности включить пробел в значение параметра. Чтобы указать обратную косую черту в значении параметра, теперь нужно написать <literal>\\</literal>.</para>
    </listitem>

    <listitem>
<!--
2015-05-08 [9a08841] Stephe..: Change default for include_realm to 1
-->
     <para>Изменение значения по умолчанию параметра GSSAPI <link linkend="gssapi-auth"><varname>include_realm</varname></link> на 1, чтобы по умолчанию имя области клиента не удалялось из имени принципала <acronym>GSS</acronym> или <acronym>SSPI</acronym> (Стивен Фрост)</para>
    </listitem>

    <listitem>
<!--
2015-02-23 [88e9823] Heikki..: Replace checkpoint_segments with min_wal_size a..
2015-03-15 [a0f5954] Andres..: Increase max_wal_size's default from 128MB to 1..
2015-06-29 [d661532] Heikki..: Also trigger restartpoints based on max_wal_siz..
-->
     <para>Замена параметра конфигурации <varname>checkpoint_segments</varname> параметрами <xref linkend="guc-min-wal-size"/> и <xref linkend="guc-max-wal-size"/> (Хейкки Линнакангас)</para>

     <para>Если вы ранее настраивали <varname>checkpoint_segments</varname>, следующая формула даст вам приблизительно эквивалентное значение: <programlisting>max_wal_size = (3 * checkpoint_segments) * 16MB</programlisting> Заметьте, что значение по умолчанию параметра <varname>max_wal_size</varname> стало гораздо больше, чем раньше имел параметр <varname>checkpoint_segments</varname>, так что возможно, что корректировать этот параметр больше не потребуется.</para>
    </listitem>

      <listitem>
<!--
2014-06-18 [df8b7bc] Tom Lane: Improve our mechanism for controlling the Linux..
-->
       <para>Регулирование снятия процессов при нехватке памяти в Linux через новые переменные окружения <link linkend="linux-memory-overcommit"><envar>PG_OOM_ADJUST_FILE</envar></link> и <link linkend="linux-memory-overcommit"><envar>PG_OOM_ADJUST_VALUE</envar></link>, вместо параметров времени компиляции <literal>LINUX_OOM_SCORE_ADJ</literal> и <literal>LINUX_OOM_ADJ</literal> (Гуржит Сингх)</para>
      </listitem>

    <listitem>
<!--
2015-10-20 [b06f1f2] Robert..: Put back ssl_renegotiation_limit parameter, bu..
2015-07-28 [6087d95] Andres..: Remove ssl renegotiation support.
-->
     <para>Списание параметра конфигурации сервера <varname>ssl_renegotiation_limit</varname>, который стал устаревшим в предыдущих выпусках (Андрес Фройнд)</para>

     <para>Хотя возможность повторного согласования SSL — хорошая вещь в теории, с ней связано достаточно ошибок, чтобы считать её скорее отрицательной на практике, и поэтому она будет исключена в будущих версиях соответствующих стандартов. Учитывая это, мы убрали поддержку этой возможности из <productname>PostgreSQL</productname>. Параметр <varname>ssl_renegotiation_limit</varname> сохранился, но ему нельзя присвоить ничего, кроме нуля (то есть он всегда отключён). Также он больше не описывается в документации.</para>
    </listitem>

    <listitem>
<!--
2014-11-05 [525a489] Tom Lane: Remove the last vestige of server-side autocomm..
-->
     <para>Удаление параметра конфигурации сервера <varname>autocommit</varname>, который уже был устаревшим и не работал (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
2015-03-06 [bb8582a] Peter ..: Remove rolcatupdate
-->
     <para>Удаление из каталога <link linkend="catalog-pg-authid"><structname>pg_authid</structname></link> поля <structfield>rolcatupdate</structfield>, так как оно было бесполезным (Адам Брайтвелл)</para>
    </listitem>

    <listitem>
<!--
2015-12-13 [28c3667] Magnus..: Consistently set all fields in pg_stat_replica..
-->
     <para>В системном представлении <link linkend="monitoring-stats-views-table"><structname>pg_stat_replication</structname></link> в поле <structfield>sent</structfield> теперь NULL, а не 0, представляет недействительное значение (Магнус Хагандер)</para>
    </listitem>

    <listitem>
<!--
2015-07-17 [89ddd29] Andrew..: Support JSON negative array subscripts everywh..
-->
     <para>Операторы извлечения элементов массивов <type>json</type> и <type>jsonb</type> теперь могут принимать отрицательные позиции, которые отсчитываются от конца массивов JSON (Питер Геохеган, Эндрю Дунстан)</para>

     <para>Ранее эти операторы возвращали <literal>NULL</literal> для отрицательных позиций.</para>
    </listitem>

   </itemizedlist>

  </sect2>

  <sect2>
   <title>Изменения</title>

   <para>Ниже вы найдёте подробный список изменений, произошедших между предыдущим основным выпуском и выпуском <productname>PostgreSQL</productname> 9.5.</para>

   <sect3>
    <title>Сервер</title>

    <sect4>
     <title>Индексы</title>

     <itemizedlist>

      <listitem>
<!--
2014-11-07 [7516f52] Alvaro..: BRIN: Block Range Indexes
2015-05-05 [3b6db1f] Alvaro..: Add geometry/range functions to support BRIN in..
2015-05-15 [b0b7be6] Alvaro..: Add BRIN infrastructure for "inclusion" opclasses
-->
       <para>Добавление <link linkend="brin">блочно-зональных индексов</link> (<acronym>BRIN</acronym>) (Альваро Эррера)</para>

       <para>Индексы <acronym>BRIN</acronym> хранят только сводные данные (например, минимальные и максимальные значения) по зонам блоков в куче. Поэтому они очень компактны и легко обновляются; при этом, если данные кластеризованы натуральным образом, такие индексы позволяют очень существенно ускорить операции поиска.</para>
      </listitem>

      <listitem>
<!--
2015-05-15 [35fcb1b] Heikki..: Allow GiST distance function to return merely ..
-->
       <para>Реализация возможности выполнять в запросах точную фильтрацию по дистанции для объектов (многоугольников, кругов), индексируемых по описанным прямоугольникам с использованием <link linkend="gist">GiST</link> (Александр Коротков, Хейкки Линнакангас)</para>

       <para>Ранее, для использования такого индекса требовалось применять подзапрос, выбирающий большое количество строк, упорядоченных по дистанции до окружающего прямоугольника, а затем дополнительно отфильтровывать результат, рассчитывая расстояние точнее.</para>
      </listitem>

      <listitem>
<!--
2015-03-26 [d04c8ed] Heikki..: Add support for index-only scans in GiST.
2015-03-27 [e09b483] Heikki..: Add index-only scan support to btree_gist.
2015-03-28 [3a20b0e] Heikki..: Add index-only scan support to inet GiST opclass.
2015-03-30 [0633a60] Heikki..: Add index-only scan support to range type GiST ..
-->
       <para>Возможность использования индексов <link linkend="gist">GiST</link> в сканировании только по индексу (Анастасия Лубенникова, Хейкки Линнакангас, Андреас Карлсон)</para>
      </listitem>

      <listitem>
<!--
Add GUC and storage parameter to set the maximum size of GIN pending list.
-->
       <para>Добавление параметра конфигурации <xref linkend="guc-gin-pending-list-limit"/>, управляющего размером очередей <acronym>GIN</acronym> (Фудзии Масао)</para>

       <para>Это значение можно также задать на уровне индекса как параметр хранения индекса. Ранее размер очереди зависел от параметра <xref linkend="guc-work-mem"/>, что было неудобно, так как подходящие значения <varname>work_mem</varname> обычно оказывались слишком большими для данной цели.</para>
      </listitem>

      <listitem>
<!--
2014-09-10 [84aa8ba] Bruce ..: Issue a warning during the creation of hash in..
-->
       <para>Выдача при создании <link linkend="indexes-types">хеш-индексов</link> предупреждения о том, что они не защищены от сбоев (Брюс Момджян)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Общая производительность</title>

     <itemizedlist>

      <listitem>
<!--
2015-01-19 [4ea51cd] Robert..: Use abbreviated keys for faster sorting of text..
2014-09-19 [e246b3d] Robert..: Add a fast pre-check for equality of equal-leng..
2015-05-13 [78efd5c] Robert..: Extend abbreviated key infrastructure to datum ..
-->
       <para>Ускорение сортировки полей <type>varchar</type>, <type>text</type> и <type>numeric</type> за счёт использования <quote>сокращённых</quote> ключей (Питер Геохеган, Эндрю Гирт, Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2014-11-07 [5ea86e6] Robert..: Use the sortsupport infrastructure in more cas..
-->
       <para>Расширение инфраструктуры, позволяющее производить сортировку, вызывая встроенные, не вызываемые из <acronym>SQL</acronym> функции сравнения, для выполнения команд <command>CREATE INDEX</command>, <command>REINDEX</command> и <command>CLUSTER</command> (Питер Геохеган)</para>
      </listitem>

      <listitem>
<!--
2014-09-10 [45f6240] Heikki..: Pack tuples in a hash join batch densely, to sa..
2014-09-12 [8cce08f] Robert..: Change NTUP_PER_BUCKET to 1 to improve hash joi..
2014-10-13 [30d7ae3] Kevin ..: Increase number of hash join buckets for undere..
-->
       <para>Улучшение производительности соединений по хешу (Томас Вондра, Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2014-09-25 [5d7962c] Robert..: Change locking regimen around buffer replacement.
2014-12-25 [d72731a] Andres..: Lockless StrategyGetBuffer clock sweep hot path.
-->
       <para>Улучшение параллелизма операции замены разделяемого буфера (Роберт Хаас, Амит Капила, Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2015-03-25 [2ed5b87f] Kevin ..: Reduce pinning and buffer content locking for b..
-->
       <para>Уменьшение количества блокировок и закреплений страниц при сканировании индексов (Кевин Гриттнер)</para>

       <para>Прежде всего это полезно тем, что позволяет реже блокировать процедуру очистки индексов.</para>
      </listitem>

      <listitem>
<!--
2014-08-30 [4b4b680] Andres..: Make backend local tracking of buffer pins memo..
2015-01-19 [2d115e4] Andres..: Fix various shortcomings of the new PrivateRefC..
-->
       <para>Оптимизация использования памяти при отслеживании закреплений буферов в серверных процессах (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2014-12-25 [ab5194e] Andres..: Improve LWLock scalability.
-->
       <para>Улучшение масштабируемости блокировок (Андрес Фройнд)</para>

       <para>В особенности это снимает проблемы масштабируемости в системах с несколькими раздельными процессорами.</para>
      </listitem>

      <listitem>
<!--
2014-07-15 [f15821e] Tom Lane: Allow join removal in some cases involving a le..
-->
       <para>Оптимизатор теперь может удалить ненужные ссылки на соединяемые слева подзапросы (Дэвид Роули)</para>
      </listitem>

      <listitem>
<!--
2014-06-27 [d222585] Tom Lane: Allow pushdown of WHERE quals into subqueries w..
-->
       <para>Возможность вынесения ограничений запроса в подзапросы с <link linkend="tutorial-window">оконными функциями</link>, где это уместно (Дэвид Роули)</para>
      </listitem>

      <listitem>
<!--
2015-04-27 [dcbf594]  Stephe..: Improve qual pushdown for RLS and SB views
-->
       <para>Возможность вынесения вызова негерметичной функции за представление с барьером безопасности, если функция не получает никакие выходные столбцы представления (Дин Рашид)</para>
      </listitem>

      <listitem>
<!--
2015-09-24 [45d256c] Tom Lane: Allow planner to use expression-index stats fo..
-->
       <para>Доработка планировщика, чтобы он использовал статистику, полученную из индекса по выражению с булевской функцией, когда соответствующий вызов функции присутствует в <literal>WHERE</literal> (Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-09-23 [cfb2024] Tom Lane: Make ANALYZE compute basic statistics even for..
-->
       <para><command>ANALYZE</command> теперь вычисляет основную статистику (процент значений NULL и среднюю ширину столбцов) даже для столбцов, тип данных которых лишён функции равенства (Олександр Шульгин)</para>
      </listitem>

      <listitem>
<!--
2014-11-04 [5028f22] Heikki..: Switch to CRC-32C in WAL and other places.
2015-02-10 [025c024] Heikki..: Speed up CRC calculation using slicing-by-8 alg..
2015-04-14 [3dc2d62] Heikki..: Use Intel SSE 4.2 CRC instructions where availa..

-->
       <para>Ускорение расчёта <acronym>CRC</acronym> (циклического избыточного кода) и переход к CRC-32C (Абхиджит Менон-Сен, Хейкки Линнакангас)</para>
      </listitem>

      <listitem>
<!--
2015-01-16 [f5ae3ba] Andres..: Make tbm_add_tuples more efficient by caching t..
2015-01-16 [779fdcd] Tom Lane: Improve new caching logic in tbm_add_tuples().
-->
       <para>Улучшение производительности сканирования индексов по битовой карте (Фёдор Сигаев, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2014-07-01 [9f03ca9] Robert..: Avoid copying index tuples when building an ind..
-->
       <para>Ускорение команды <command>CREATE INDEX</command> за счёт исключения лишнего копирования в памяти (Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2014-10-02 [3acc10c9] Robert..: Increase the number of buffer mapping partitio..
-->
       <para>Увеличение числа разделов отображений буферов (Амит Капила, Андрес Фройнд, Роберт Хаас)</para>

       <para>Это увеличивает производительность при многопоточной нагрузке.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Наблюдение</title>

     <itemizedlist>

      <listitem>
<!--
2015-04-03 [4ff695b1] Alvaro..: Add log_min_autovacuum_duration per-table option
-->
       <para>Добавление параметра хранения <varname>log_autovacuum_min_duration</varname> для управления протоколированием автоочистки на уровне таблиц (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2014-06-29 [51adcaa] Andres..: Add cluster_name GUC which is included in proce..
-->
       <para>Добавление нового параметра конфигурации <xref linkend="guc-cluster-name"/> (Томас Мунро)</para>

       <para>Эта строка, обычно задаваемая в <link linkend="config-setting-configuration-file"><filename>postgresql.conf</filename></link>, позволяет клиентам идентифицировать кластер. Это имя также выводится в заголовке всех серверных процессов, что упрощает выделение всех процессов, принадлежащих одному кластеру.</para>
      </listitem>

      <listitem>
<!--
2014-09-13 [fe550b2] Tom Lane: Invent PGC_SU_BACKEND and mark log_connections..
-->
       <para>Недопущение изменения <xref linkend="guc-log-disconnections"/> простыми пользователями при установлении соединения (Фудзии Масао)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><acronym>SSL</acronym></title>

     <itemizedlist>

      <listitem>
<!--
2014-09-12 [acd08d7] Heikki..: Support Subject Alternative Names in SSL server..
-->
       <para>Проверка <link linkend="libpq-ssl"><quote>Альтернативных имён субъекта</quote></link> (Subject Alternative Names) (при наличии) в <acronym>SSL</acronym>-сертификатах серверов (Алексей Клюкин)</para>

       <para>Когда такое поле присутствует, оно проверяется вместо поля <quote>Общее имя</quote> (Common Name) в сертификате.</para>
      </listitem>

      <listitem>
<!--
2015-04-12 [9029f4b] Magnus..: Add system view pg_stat_ssl
-->
       <para>Добавление системного представления <link linkend="pg-stat-ssl-view"><structname>pg_stat_ssl</structname></link>, выдающего информацию о <acronym>SSL</acronym>-подключениях (Магнус Хагандер)</para>
      </listitem>

      <listitem>
<!--
2015-02-03 [91fa7b4] Heikki..: Add API functions to libpq to interrogate SSL ..
-->
       <para>Добавление в <application>libpq</application> функций, возвращающих информацию об <acronym>SSL</acronym> независящим от реализации способом (Хейкки Линнакангас)</para>

       <para>Хотя <link linkend="libpq-pqgetssl"><function>PQgetssl()</function></link> по-прежнему можно применять для обращений к функциям <productname>OpenSSL</productname>, теперь это считается устаревшим вариантом, так как будущие версии <application>libpq</application> могут поддерживать и другие реализации <acronym>SSL</acronym>. По возможности используйте новые функции <link linkend="libpq-pqsslattribute"><function>PQsslAttribute()</function></link>, <link linkend="libpq-pqsslattributenames"><function>PQsslAttributeNames()</function></link> и <link linkend="libpq-pqsslinuse"><function>PQsslInUse()</function></link>, чтобы получать информацию об <acronym>SSL</acronym> независящим от реализации <acronym>SSL</acronym> способом.</para>
      </listitem>

      <listitem>
<!--
2015-04-09 [8a0d34e4] Peter ..: libpq: Don't overwrite existing OpenSSL thread..
-->
       <para>В <application>libpq</application> должны сохраняться установленные многопоточные обработчики вызовов <productname>OpenSSL</productname> (Ян Урбански)</para>

       <para>Ранее они перезаписывались.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Параметры сервера</title>

     <itemizedlist>

      <listitem>
<!--
2015-02-23 [88e9823] Heikki..: Replace checkpoint_segments with min_wal_size a..
2015-03-15 [a0f5954] Andres..: Increase max_wal_size's default from 128MB to 1..
2015-06-29 [d661532] Heikki..: Also trigger restartpoints based on max_wal_siz..
-->
       <para>Замена параметра конфигурации <varname>checkpoint_segments</varname> параметрами <xref linkend="guc-min-wal-size"/> и <xref linkend="guc-max-wal-size"/> (Хейкки Линнакангас)</para>

       <para>Это изменение позволяет разместить большое количество файлов <acronym>WAL</acronym>, но при этом не сохранять их, когда они будут уже не нужны. Как следствие, значение <varname>max_wal_size</varname> по умолчанию увеличено до <literal>1GB</literal>, что намного больше старой величины по умолчанию, устанавливаемой параметром <varname>checkpoint_segments</varname>. Также заметьте, что резервные серверы теперь производят точки перезапуска, стараясь ограничить использование пространства WAL значением <varname>max_wal_size</varname>; ранее они не учитывали параметр <varname>checkpoint_segments</varname>.</para>
      </listitem>

      <listitem>
<!--
2014-06-18 [df8b7bc] Tom Lane: Improve our mechanism for controlling the Linux..
-->
       <para>Регулирование снятия процессов при нехватке памяти в Linux через новые переменные окружения <link linkend="linux-memory-overcommit"><envar>PG_OOM_ADJUST_FILE</envar></link> и <link linkend="linux-memory-overcommit"><envar>PG_OOM_ADJUST_VALUE</envar></link> (Гуржит Сингх)</para>

       <para>Предыдущая инфраструктура управления механизмом <acronym>OOM</acronym> зависела от параметров времени компиляции <literal>LINUX_OOM_SCORE_ADJ</literal> и <literal>LINUX_OOM_ADJ</literal>, которые теперь не поддерживаются. Новое поведение распространяется на все сборки.</para>
      </listitem>

      <listitem>
<!--
2014-12-03 [73c986a] Alvaro..: Keep track of transaction commit timestamps
-->
       <para>Осуществление записи времени фиксации транзакции, когда включён параметр <xref linkend="guc-track-commit-timestamp"/> (Альваро Эррера, Петр Желинек)</para>

       <para>Прочитать записанное время можно, воспользовавшись функциями <link linkend="functions-commit-timestamp"><function>pg_xact_commit_timestamp()</function></link> и <function>pg_last_committed_xact()</function>.</para>
      </listitem>

      <listitem>
<!--
2014-12-22 [584e35d] Peter ..: Change local_preload_libraries to PGC_USERSET
-->
       <para>Возможность устанавливать <xref linkend="guc-local-preload-libraries"/> в команде <command>ALTER ROLE SET</command> (Питер Эйзентраут, Киотаро Хоригучи)</para>
      </listitem>

      <listitem>
<!--
2015-04-03 [a75fb9b] Alvaro..: Have autovacuum workers listen to SIGHUP, too
-->
       <para><link linkend="autovacuum">Рабочие процессы автоочистки</link> теперь реагируют на изменения параметров конфигурации в процессе работы (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2014-06-20 [3bdcf6a] Andres..: Don't allow to disable backend assertions via t..
-->
       <para>Параметр конфигурации <xref linkend="guc-debug-assertions"/> стал доступен только для чтения (Андрес Фройнд)</para>

       <para>Это значит, что утверждения теперь нельзя выключить, если они были включены на этапе компиляции, что позволяет дополнительно оптимизировать код. При этом изменении также был удалён ключ <link linkend="app-postgres-options">postgres</link> <option>-A</option>.</para>
      </listitem>

      <listitem>
<!--
2014-10-18 [7feaccc] Peter ..: Allow setting effective_io_concurrency even on..
-->
       <para>Возможность установления параметра <xref linkend="guc-effective-io-concurrency"/> в системах, где он не играет роли (Питер Эйзентраут)</para>
      </listitem>

      <listitem>
<!--
2015-05-08 [a97e0c3] Stephe..: Add pg_file_settings view and function
2015-06-28 [62d16c7] Tom Lane: Improve design and implementation of pg_file_se..
-->
       <para>Добавление системного представления <link linkend="view-pg-file-settings"><structname>pg_file_settings</structname></link>, показывающего содержимое файлов конфигурации сервера (Савада Масахико)</para>
      </listitem>

      <listitem>
<!--
2015-05-14 [a486e35] Peter ..: Add pg_settings.pending_restart column
-->
       <para>Добавление поля <structname>pending_restart</structname> в системное представление <link linkend="view-pg-settings"><structname>pg_settings</structname></link>, показывающего, что изменение было внесено, но не вступит в силу до перезапуска базы данных (Питер Эйзентраут)</para>
      </listitem>

      <listitem>
<!--
2014-09-02 [bd3b7a9] Fujii ..: Support ALTER SYSTEM RESET command.
-->
       <para>Возможность сбросить значения <link linkend="sql-altersystem"><command>ALTER SYSTEM</command></link> командой <command>ALTER SYSTEM RESET</command> (Вик Фиринг)</para>

       <para>Эта команда удаляет заданный параметр из <filename>postgresql.auto.conf</filename>.</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Репликация и восстановление</title>

     <itemizedlist>

      <listitem>
<!--
2015-04-29 [5aa2350] Andres..: Introduce replication progress tracking infrast..
-->
       <para>Создание механизмов для отслеживания <link linkend="replication-origins">прогресса репликации</link>, включая средства идентификации источника отдельных изменений при логической репликации (Андрес Фройнд)</para>

       <para>Эти механизмы полезны при создании решений репликации.</para>
      </listitem>

      <listitem>
<!--
2015-09-26 [bd7c348] Andres..: Rework the way multixact truncations work.
2015-09-26 [6e8af37] Andres..: Remove legacy multixact truncation support.
-->
       <para>Переработка операции усечения мультитранзакций, чтобы она корректно фиксировалась в журнале (Андрес Фройнд)</para>

       <para>В результате этот механизм становится проще и надёжнее.</para>
      </listitem>

      <listitem>
<!--
2014-11-25 [aedccb1] Simon ..: action_at_recovery_target recovery config option
2014-12-07 [b8e33a8] Simon ..: Tweaks for recovery_target_action
2015-03-15 [51c11a7] Andres..: Remove pause_at_recovery_target recovery.conf s..
-->
       <para>Добавление в <link linkend="recovery-config"><filename>recovery.conf</filename></link> параметра <link linkend="recovery-target-action"><varname>recovery_target_action</varname></link>, управляющего действиями после восстановления (Петр Желинек)</para>

       <para>Этот параметр пришёл на замену <varname>pause_at_recovery_target</varname>.</para>
      </listitem>

      <listitem>
<!--
2015-05-15 [ffd3774] Heikki..: Add archive_mode='always' option.
-->
       <para>Добавление для <xref linkend="guc-archive-mode"/> нового значения <literal>always</literal>, позволяющего архивировать получаемые файлы <acronym>WAL</acronym> (Фудзии Масао)</para>
      </listitem>

      <listitem>
<!--
2015-02-23 [5d2b45e] Fujii ..: Add GUC to control the time to wait before retr..
-->
       <para>Добавление параметра конфигурации <xref linkend="guc-wal-retrieve-retry-interval"/> для управления повторными попытками чтения <acronym>WAL</acronym> после сбоя (Алексей Васильев, Мишель Пакье)</para>

       <para>Это особенно полезно для тёплого резерва.</para>
      </listitem>

      <listitem>
<!--
2015-03-11 [57aa5b2] Fujii ..: Add GUC to enable compression of full page imag..
-->
       <para>Возможность сжатия образов полных страниц в <acronym>WAL</acronym> (Рахила Сьед, Мишель Пакье)</para>

       <para>Это позволяет сократить объём WAL, за счёт дополнительной нагрузки на процессор при записи и воспроизведении WAL. Эта возможность управляется новым параметром конфигурации <xref linkend="guc-wal-compression"/> (по умолчанию он отключён).</para>
      </listitem>

      <listitem>
<!--
2015-05-08 [de76884] Heikki..: At promotion, archive last segment from old tim..
-->
       <para>Архивация файлов <acronym>WAL</acronym> с расширением <literal>.partial</literal> при повышении резервного сервера (Хейкки Линнакангас)</para>
      </listitem>

      <listitem>
<!--
2014-09-13 [4ad2a54] Fujii ..: Add GUC to enable logging of replication comman..
-->
       <para>Добавление параметра конфигурации <xref linkend="guc-log-replication-commands"/> для протоколирования команд репликации (Фудзии Масао)</para>

       <para>По умолчанию команды репликации, в частности <link linkend="protocol-replication"><literal>IDENTIFY_SYSTEM</literal></link>, не записываются в протокол, даже когда <xref linkend="guc-log-statement"/> имеет значение <literal>all</literal>.</para>
      </listitem>

      <listitem>
<!--
2015-04-21 [d811c03] Andres..: Add 'active_in' column to pg_replication_slots.
-->
       <para>Добавление в <link linkend="view-pg-replication-slots"><structname>pg_replication_slots</structname></link> отображения процессов, занимающих слоты репликации (Крейг Рингер)</para>

       <para>Эта информация выводится в новом столбце <structname>active_pid</structname>.</para>
      </listitem>

      <listitem>
<!--
2014-11-25 [b3fc672] Heikki..: Allow using connection URI in primary_conninfo.
-->
       <para>Возможность использовать в задаваемом в <filename>recovery.conf</filename> параметре <link linkend="primary-conninfo"><varname>primary_conninfo</varname></link> идентификаторы соединений в формате <acronym>URI</acronym>, например, <literal>postgres://</literal> (Александр Шульгин)</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Запросы</title>

     <itemizedlist>

      <listitem>
<!--
2015-05-08 [168d580] Andres..: Add support for INSERT ... ON CONFLICT DO NOTHI..
2015-05-08 [2c8f483] Andres..: Represent columns requiring insert and update p..
-->
       <para>Возможность превращать команды <link linkend="sql-on-conflict"><command>INSERT</command></link>, вызывающие конфликты ограничений, в команды <command>UPDATE</command>, либо игнорировать их (Питер Геохеган, Хейкки Линнакангас, Андрес Фройнд)</para>

       <para>Для этого введён синтаксис <command>INSERT ... ON CONFLICT DO NOTHING/UPDATE</command>. Таким образом в Postgres реализована популярная команда <command>UPSERT</command>.</para>
      </listitem>

      <listitem>
<!--
2015-05-16 [f3d3118] Andres..: Support GROUPING SETS, CUBE and ROLLUP.
-->
       <para>Добавление в <literal>GROUP BY</literal> аналитической функциональности: <link linkend="queries-grouping-sets"><literal>GROUPING SETS</literal></link>, <link linkend="queries-grouping-sets"><literal>CUBE</literal></link> и <link linkend="queries-grouping-sets"><literal>ROLLUP</literal></link> (Эндрю Гирт, Атри Шарма)</para>
      </listitem>

      <listitem>
<!--
2014-06-18 [8f889b1] Tom Lane: Implement UPDATE tab SET (col1,col2,...) = (SEL..
-->
       <para>Возможность присвоения результатов одного вложенного SELECT нескольким целевым столбцам в <link linkend="sql-update"><command>UPDATE</command></link> (Том Лейн)</para>

       <para>Для этого применяется синтаксис <command>UPDATE tab SET (col1, col2, ...) = (SELECT ...)</command>.</para>
      </listitem>

      <listitem>
<!--
2014-10-07 [df630b0] Alvaro..: Implement SKIP LOCKED for row-level locks
-->
       <para>Добавление в <link linkend="sql-select"><command>SELECT</command></link> указания <literal>SKIP LOCKED</literal> для пропуска заблокированных строк (Томас Мунро)</para>

       <para>При этом не выдаётся ошибка, как в случае с <literal>NOWAIT</literal>.</para>
      </listitem>

      <listitem>
<!--
2015-05-15 [f6d208d] Simon ..: TABLESAMPLE, SQL Standard and extensible
-->
       <para>Добавление в <link linkend="sql-select"><command>SELECT</command></link> указания <literal>TABLESAMPLE</literal>, что позволяет получать подмножество строк таблицы (Петр Желинек)</para>

       <para>Благодаря этому теперь поддерживаются описанные в стандарте SQL методы извлечения выборки. Кроме того, представлены средства для создания <link linkend="tablesample-method">пользовательских методов извлечения выборки</link>.</para>
      </listitem>

      <listitem>
<!--
2015-03-11 [e529cd4] Robert..: Suggest to the user the column they may have m..
-->
       <para>Предложение возможных исправлений при опечатках в именах столбцов (Питер Геохеган, Роберт Хаас)</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Служебные команды</title>

     <itemizedlist>

      <listitem>
<!--
2015-01-16 [20af53d] Tom Lane: Show sort ordering options in EXPLAIN output.
-->
       <para>Добавление более подробной информации о порядке сортировки в вывод <link linkend="sql-explain"><command>EXPLAIN</command></link> (Мариус Тиммер, Лукас Крефт, Арне Шеффер)</para>

       <para>Эта информация включает свойства <literal>COLLATE</literal>, <literal>DESC</literal>, <literal>USING</literal> и <literal>NULLS FIRST</literal><literal>/LAST</literal>.</para>
      </listitem>

      <listitem>
<!--
2014-12-18 [35192f0] Alvaro..: Have VACUUM log number of skipped pages due to ..
-->
       <para>Добавление в вывод <link linkend="sql-vacuum"><command>VACUUM</command></link> количества страниц, пропущенных из-за закреплений (Джим Нэсби)</para>
      </listitem>

      <listitem>
<!--
2015-02-20 [d42358e] Alvaro..: Have TRUNCATE update pgstat tuple counters
-->
       <para>Команда <link linkend="sql-truncate"><command>TRUNCATE</command></link> теперь корректно обновляет счётчики кортежей в <literal>pg_stat</literal> (Александр Шульгин)</para>
      </listitem>

       </itemizedlist>

       <sect4>
        <title><xref linkend="sql-reindex"/></title>

        <itemizedlist>

      <listitem>
<!--
2014-12-09 [fe263d1] Simon ..: REINDEX SCHEMA
-->
       <para>Добавление в <command>REINDEX</command> возможности переиндексировать всю схему с новым указанием <literal>SCHEMA</literal> (Савада Масахико)</para>
      </listitem>

      <listitem>
<!--
2015-05-15 [ecd222e] Fujii ..: Support VERBOSE option in REINDEX command.
-->
       <para>Добавление в <command>REINDEX</command> указания <literal>VERBOSE</literal> (Савада Масахико)</para>
      </listitem>

      <listitem>
<!--
2014-12-09 [ae4e688] Simon ..: Silence REINDEX
-->
       <para>Исключение из вывода <command>REINDEX DATABASE</command> и <command>SCHEMA</command> имён столбцов в случае отсутствия указания <literal>VERBOSE</literal> (Саймон Риггс)</para>
      </listitem>

      <listitem>
<!--
2015-04-09 [17d436d] Fujii ..: Remove obsolete FORCE option from REINDEX.
-->
       <para>Удаление устаревшего указания <literal>FORCE</literal> команды <command>REINDEX</command> (Фудзии Масао)</para>
      </listitem>

      </itemizedlist>

     </sect4>
   </sect3>

   <sect3>
    <title>Манипуляции с объектами</title>

     <itemizedlist>

      <listitem>
<!--
2014-09-19 [491c029] Stephe..: Row-Level Security Policies (RLS)
-->
       <para>Добавление <link linkend="ddl-rowsecurity">механизма защиты на уровне строк</link> (Крейг Рингер, КайГай Кохей, Адам Брайтвелл, Дин Рашид, Стивен Фрост)</para>

       <para>Этот механизм позволяет на уровне строк определять, какие строки пользователи смогут добавлять, изменять и даже видеть в таблице. Для управления им введены новые команды <link linkend="sql-createpolicy"><command>CREATE</command></link>/<link linkend="sql-alterpolicy"><command>ALTER</command></link>/<link linkend="sql-droppolicy"><command>DROP POLICY</command></link> и <link linkend="sql-altertable"><command>ALTER TABLE ... ENABLE/DISABLE ROW SECURITY</command></link>.</para>
      </listitem>

      <listitem>
<!--
2014-08-22 [f41872d] Alvaro..: Implement ALTER TABLE .. SET LOGGED / UNLOGGED
-->
       <para>Возможность изменения режима журналирования таблицы в <acronym>WAL</acronym> с применением команды <link linkend="sql-altertable"><command>ALTER TABLE ... SET LOGGED / UNLOGGED</command></link> (Фабрицио де Ройес Мелло)</para>
      </listitem>

      <listitem>
<!--
2014-08-26 [0076f26] Heikki..: Implement IF NOT EXISTS for CREATE SEQUENCE.
2014-11-06 [08309aa] Fujii ..: Implement IF NOT EXIST for CREATE INDEX.
2014-12-13 [e39b6f9] Andrew..: Add CINE option for CREATE TABLE AS and CREATE ..
-->
       <para>Добавление предложения <literal>IF NOT EXISTS</literal> в <link linkend="sql-createtableas"><command>CREATE TABLE AS</command></link>, <link linkend="sql-createindex"><command>CREATE INDEX</command></link>, <link linkend="sql-createsequence"><command>CREATE SEQUENCE</command></link> и <link linkend="sql-creatematerializedview"><command>CREATE MATERIALIZED VIEW</command></link> (Фабрицио де Ройес Мелло)</para>
      </listitem>

      <listitem>
<!--
2015-03-24 [1d8198b] Bruce ..: Add support for ALTER TABLE IF EXISTS ... RENAM..
-->
       <para>Добавление поддержки <literal>IF EXISTS</literal> в <link linkend="sql-altertable"><command>ALTER TABLE ... RENAME CONSTRAINT</command></link> (Брюс Момджян)</para>
      </listitem>

      <listitem>
<!--
2015-03-09 [31eae60] Alvaro..: Allow CURRENT/SESSION_USER to be used in certai..
-->
       <para>Возможность передать некоторым командам DDL вместо имени конкретного пользователя идентификаторы <literal>CURRENT_USER</literal> и <literal>SESSION_USER</literal>, обозначающие текущего пользователя и пользователя сеанса (Киотаро Хоригучи, Альваро Эррера)</para>

       <para>Это поддерживают команды <xref linkend="sql-alteruser"/>, <xref linkend="sql-altergroup"/>, <xref linkend="sql-alterrole"/>, <xref linkend="sql-grant"/> и <command>ALTER <replaceable>объект</replaceable> OWNER TO</command>.</para>
      </listitem>

      <listitem>
<!--
2014-12-23 [7eca575] Alvaro..: get_object_address: separate domain constraints..
-->
       <para>Поддержка комментариев в <link linkend="sql-createdomain">ограничениях домена</link> (Альваро Эррера)</para>
      </listitem>

      <listitem>
<!--
2015-04-05 [0ef0396] Simon ..: Reduce lock levels of some trigger DDL and add ..
-->
       <para>Снижение уровней блокировки для некоторых команд, управляющих триггерами и сторонними ключами (Саймон Риггс, Андреас Карлсон)</para>
      </listitem>

      <listitem>
<!--
2015-05-11 [fa26424] Stephe..: Allow LOCK TABLE .. ROW EXCLUSIVE MODE with IN..
-->
       <para>Разрешение использовать <link linkend="sql-lock"><command>LOCK TABLE ... ROW EXCLUSIVE MODE</command></link> тем, кто имеет право <command>INSERT</command> в целевой таблице (Стивен Фрост)</para>

       <para>Ранее для этой команды требовалось право <command>UPDATE</command>, <command>DELETE</command> или <command>TRUNCATE</command>.</para>
      </listitem>

      <listitem>
<!--
2015-03-23 [e5f455f] Tom Lane: Apply table and domain CHECK constraints in nam.
-->
       <para>Применение ограничений <literal>CHECK</literal> для таблицы и домена в алфавитном порядке имён (Том Лейн)</para>

       <para>Ранее порядок был недетерминированным.</para>
      </listitem>

      <listitem>
<!--
2014-07-01 [15c82ef] Tom Lane: Refactor CREATE/ALTER DATABASE syntax so option..
2014-07-01 [fbb1d7d] Tom Lane: Allow CREATE/ALTER DATABASE to manipulate datis..
-->
       <para>Добавление в <link linkend="sql-createdatabase"><command>CREATE</command></link>/<link linkend="sql-alterdatabase"><command>ALTER DATABASE</command></link> возможности управлять свойствами <structname>datistemplate</structname> и <structname>datallowconn</structname> (Вик Фиринг)</para>

       <para>Это позволяет задавать/изменять эти параметры, не модифицируя вручную системный каталог <link linkend="catalog-pg-database"><structname>pg_database</structname></link>.</para>
      </listitem>

     </itemizedlist>

     <sect4>
      <title><link linkend="ddl-foreign-data">Сторонние таблицы</link></title>

      <itemizedlist>

      <listitem>
<!--
2014-07-10 [59efda3] Tom Lane: Implement IMPORT FOREIGN SCHEMA.
-->
       <para>Добавление поддержки <xref linkend="sql-importforeignschema"/> (Ронан Данклау, Мишель Пакье, Том Лейн)</para>

       <para>Эта команда позволяет автоматически создать локальные сторонние таблицы с той же структурой, что имеют таблицы на удалённом сервере.</para>
      </listitem>

      <listitem>
<!--
2014-12-17 [fc2ac1f] Tom Lane: Allow CHECK constraints to be placed on foreign..
-->
       <para>Возможность определения ограничений <literal>CHECK</literal> для сторонних таблиц (Шигеру Ханада, Эцуро Фудзита)</para>

       <para>Такие ограничения считаются контролируемыми на удалённом сервере, а не локально. Однако для оптимизации запросов предполагается, что они удовлетворяются, как например при <link linkend="ddl-partitioning-constraint-exclusion">исключении по ограничению</link>.</para>
      </listitem>

      <listitem>
<!--
2015-03-22 [cb1ca4d] Tom Lane: Allow foreign tables to participate in inherita..
-->
       <para>Возможность включать сторонние таблицы в иерархии наследования (Шигеру Ханада, Эцуро Фудзита)</para>

       <para>Чтобы это работало естественным образом, в сторонних таблицах теперь допускаются ограничения-проверки, помечаемые как недействительные, и могут задаваться характеристики хранения и <type>OID</type>, хотя по сути это никак не влияет на стороннюю таблицу.</para>
      </listitem>

      <listitem>
<!--
2015-05-01 [e7cb7ee] Robert..: Allow FDWs and custom scan providers to replace..
2015-05-10 [1a8a4e5] Tom Lane: Code review for foreign/custom join pushdown pa..
-->
       <para>Обёртки сторонних данных и методы нестандартного сканирования обрели возможность выносить соединения наружу (КайГай Кохей)</para>
      </listitem>

     </itemizedlist>

     </sect4>

     <sect4>
      <title><link linkend="event-triggers">Событийные триггеры</link></title>

      <itemizedlist>

       <listitem>
<!--
2015-05-11 [b488c58] Alvaro..: Allow on-the-fly capture of DDL event details
-->
        <para>Для устанавливаемого событийного триггера <literal>ddl_command_end</literal> собираются сведения об активности <acronym>DDL</acronym>, которые могут быть ему полезны (Альваро Эррера)</para>

        <para>Эти сведения можно получить через возвращающую множество функцию <link linkend="pg-event-trigger-ddl-command-end-functions"><function>pg_event_trigger_ddl_commands()</function></link> или через структуры данных C, если результат этой функции недостаточно детализирован.</para>
       </listitem>

       <listitem>
<!--
2014-12-08 [618c943] Simon ..: Event Trigger for table_rewrite
-->
        <para>Возможность реагирования в событийных триггерах на перезапись таблицы, вызываемую операцией <link linkend="sql-altertable"><command>ALTER TABLE</command></link> (Димитри Фонтейн)</para>
       </listitem>

       <listitem>
<!--
2015-02-23 [296f3a6] Alvaro..: Support more commands in event triggers
-->
        <para>Добавление поддержки событийных триггеров для команд <link linkend="sql-comment"><command>COMMENT</command></link>, <link linkend="sql-security-label"><command>SECURITY LABEL</command></link> и <link linkend="sql-grant"><command>GRANT</command></link>/<link linkend="sql-revoke"><command>REVOKE</command></link> уровня базы данных (Альваро Эррера)</para>
       </listitem>

       <listitem>
<!--
2014-12-30 [72dd233] Alvaro..: pg_event_trigger_dropped_objects: Add name/args..
2015-04-06 [e9a077c] Alvaro..: pg_event_trigger_dropped_objects: add is_temp c..
-->
        <para>Добавление столбцов в вывод <link linkend="pg-event-trigger-sql-drop-functions"><function>pg_event_trigger_dropped_objects</function></link> (Альваро Эррера)</para>

        <para>Это позволяет упростить обработку операций удаления.</para>
       </listitem>

      </itemizedlist>

     </sect4>

   </sect3>

   <sect3>
    <title>Типы данных</title>

    <itemizedlist>

     <listitem>
<!--
2014-09-09 [57b1085] Peter ..: Allow empty content in xml type
-->
      <para>Возможность записать в тип <link linkend="datatype-xml"><type>xml</type></link> пустое или состоящее только из пробельных символов значение (Питер Эйзентраут)</para>

      <para>Это требуется стандартом <acronym>SQL</acronym>/<acronym>XML</acronym>.</para>
     </listitem>

     <listitem>
<!--
2014-10-21 [6f04368] Peter ..: Allow input format xxxx-xxxx-xxxx for macaddr ..
-->
      <para>Возможность ввода в <link linkend="datatype-macaddr"><type>macaddr</type></link> значений в формате <literal>xxxx-xxxx-xxxx</literal> (Хервин Вестстрате)</para>
     </listitem>

     <listitem>
<!--
2014-10-18 [417f924] Bruce ..: interval:  tighten precision specification
-->
      <para>Запрещение несоответствующего стандарту SQL синтаксиса <link linkend="datatype-interval-input"><type>interval</type></link> с указанием одновременно полей и точности (Брюс Момджян)</para>

      <para>Пр стандарту такие значения этого типа должны записываться, например, как <literal>INTERVAL MINUTE TO SECOND(2)</literal>. В <productname>PostgreSQL</productname> ранее допускалась запись <literal>INTERVAL(2) MINUTE TO SECOND</literal>, но теперь принимается только стандартный способ.</para>
     </listitem>

     <listitem>
<!--
2015-04-01 [89840d7] Tom Lane: Provide real selectivity estimators for inet/ci..
-->
      <para>Добавление оценки избирательности для операторов <link linkend="datatype-inet"><type>inet</type></link>/<link linkend="datatype-cidr"><type>cidr</type></link> и улучшение оценки для функций текстового поиска (Эмре Хасегели, Том Лейн)</para>
     </listitem>

     <listitem>
<!--
2015-05-09 [0c90f67] Andrew..: Add new OID alias type regrole
2015-05-09 [cb9fa80] Andrew..: Add new OID alias type regnamespace
-->
      <para>Добавление типов данных <link linkend="datatype-oid-table"><type>regrole</type></link> и <link linkend="datatype-oid-table"><type>regnamespace</type></link> для упрощения ввода и улучшенного вывода <type>OID</type> ролей и пространств имён (Киотаро Хоригучи)</para>
     </listitem>

    </itemizedlist>

    <sect4>
     <title><link linkend="datatype-json"><acronym>JSON</acronym></link></title>

     <itemizedlist>

      <listitem>
<!--
2015-05-12 [c694701] Andrew..: Additional functions and operators for jsonb
2015-05-31 [37def42] Andrew..: Rename jsonb_replace to jsonb_set and allow it ..
-->
       <para>Добавление для типа <type>jsonb</type> функций <link linkend="functions-json-processing-table"><function>jsonb_set()</function></link> и <link linkend="functions-json-processing-table"><function>jsonb_pretty()</function></link> (Дмитрий Долгов, Эндрю Дунстан, Петр Желинек)</para>
      </listitem>

      <listitem>
<!--
2014-12-12 [7e354ab] Andrew..: Add several generator functions for jsonb that ..
-->
       <para>Добавление функций, формирующих <type>jsonb</type>: <link linkend="functions-json-creation-table"><function>to_jsonb()</function></link>, <link linkend="functions-json-creation-table"><function>jsonb_object()</function></link>, <link linkend="functions-json-creation-table"><function>jsonb_build_object()</function></link>, <link linkend="functions-json-creation-table"><function>jsonb_build_array()</function></link>, <link linkend="functions-aggregate-table"><function>jsonb_agg()</function></link> и <link linkend="functions-aggregate-table"><function>jsonb_object_agg()</function></link> (Эндрю Дунстан)</para>

       <para>Аналогичные функции уже имелись для типа <type>json</type>.</para>
      </listitem>

      <listitem>
<!--
2015-03-03 [b67f1ce] Tom Lane: Reduce json &lt;=> jsonb casts from explicit-only..
-->
       <para>Снижение требований для преобразований в/из <link linkend="datatype-json"><type>json</type></link> и <link linkend="datatype-json"><type>jsonb</type></link> (Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-06-11 [908e234] Andrew..: Rename jsonb - text[] operator to #- to avoid a..
-->
       <para>Возможность <link linkend="functions-jsonb-op-table">вычитать</link> из документов <type>jsonb</type> значения типов <type>integer</type>, <type>text</type> и массивы <type>text</type> (Дмитрий Долгов, Эндрю Дунстан)</para>
      </listitem>

      <listitem>
<!--
2015-05-12 [c694701] Andrew..: Additional functions and operators for jsonb
-->
       <para>Добавление для типа <type>jsonb</type> оператора <link linkend="functions-jsonb-op-table"><literal>||</literal></link> (Дмитрий Долгов, Эндрю Дунстан)</para>
      </listitem>

      <listitem>
<!--
2014-12-12 [237a882] Andrew..: Add json_strip_nulls and jsonb_strip_nulls fun..
-->
       <para>Добавление функций <link linkend="functions-json-processing-table"><function>json_strip_nulls()</function></link> и <link linkend="functions-json-processing-table"><function>jsonb_strip_nulls()</function></link> для удаления значений null из документов JSON (Эндрю Дунстан)</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Функции</title>

     <itemizedlist>

      <listitem>
<!--
2014-11-11 [1871c89] Fujii ..: Add generate_series(numeric, numeric).
-->
       <para>Добавление <link linkend="functions-srf"><function>generate_series()</function></link> для значений <type>numeric</type> (Плато Малугин)</para>
      </listitem>

      <listitem>
<!--
2014-11-25 [bac2739] Tom Lane: Support arrays as input to array_agg() and ARRA..
-->
       <para>Возможность передавать массив на вход <link linkend="functions-aggregate-table"><function>array_agg()</function></link> и <function>ARRAY()</function> (Али Акбар, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-03-18 [13dbc7a] Alvaro..: array_offset() and array_offsets()
2015-03-30 [97690ea] Alvaro..: Change array_offset to return subscripts, not o..
-->
       <para>Добавление функций <link linkend="array-functions-table"><function>array_position()</function></link> и <link linkend="array-functions-table"><function>array_positions()</function></link>, возвращающих позиции значений в массиве (Павел Стехуле)</para>
      </listitem>

      <listitem>
<!--
2014-12-15 [4520ba6] Heikki..: Add point &lt;-&gt; polygon distance operator.
-->
       <para>Добавление оператора дистанции от точки до многоугольника (<type>point</type>-<type>polygon</type>) <link linkend="functions-geometry-op-table">&lt;-&gt;</link> (Александр Коротков)</para>
      </listitem>

      <listitem>
<!--
2014-08-27 [8167a38] Jeff D..: Allow multibyte characters as escape in SIMILA..
-->
       <para>Возможность использовать в качестве спецсимволов в <link linkend="functions-similarto-regexp"><literal>SIMILAR TO</literal></link> и <link linkend="functions-string-sql"><literal>SUBSTRING</literal></link> многобайтовых символов (Джефф Девис)</para>

       <para>Ранее в качестве спецсимвола можно было выбрать только однобайтовый символ.</para>
      </listitem>

      <listitem>
<!--
2014-09-09 [e80252d] Tom Lane: Add width_bucket(anyelement, anyarray).
-->
       <para>Добавление вариации <link linkend="functions-math-func-table"><function>width_bucket()</function></link>, поддерживающей любой упорядочиваемый тип данных и группы неодинаковой ширины (Петр Желинек)</para>
      </listitem>

      <listitem>
<!--
2015-06-28 [cb2acb1] Heikki..: Add missing_ok option to the SQL functions for..
-->
       <para>Добавление необязательного аргумента <replaceable>missing_ok</replaceable> в <link linkend="functions-admin-genfile-table"><function>pg_read_file()</function></link> и связанные функции (Мишель Пакье, Хейкки Линнакангас)</para>
      </listitem>

      <listitem>
<!--
2015-03-10 [865f14a] Robert..: Allow named parameters to be specified using =>..
-->
       <para>Введение конструкции <link linkend="sql-syntax-calling-funcs"><literal>=&gt;</literal></link>, позволяющей задать значения именованных параметров в вызовах функций (Павел Стехуле)</para>

       <para>Ранее присвоение значения записывалось только с конструкцией <literal>:=</literal>. Это потребовало запретить создание пользовательского оператора <literal>=&gt;</literal>. При создании пользовательских операторов <literal>=&gt;</literal> до этого выдавались предупреждения (начиная с PostgreSQL 9.0).</para>
      </listitem>

      <listitem>
<!--
2015-03-25 [06bf0dd] Tom Lane: Upgrade src/port/rint.c to be POSIX-compliant.
-->
       <para>Добавление <acronym>POSIX</acronym>-совместимого округления для платформ, где используются функции округления, предоставляемые PostgreSQL (Педро Химено Фортеа)</para>
      </listitem>

     </itemizedlist>

    <sect4>
     <title>Системные информационные функции и представления</title>

     <itemizedlist>

      <listitem>
<!--
2014-12-23 [d7ee82e] Alvaro..: Add SQL-callable pg_get_object_address
2014-12-30 [a676201] Alvaro..: Add pg_identify_object_as_address
-->
       <para>Добавление функции <link linkend="functions-info-object-table"><function>pg_get_object_address()</function></link>, возвращающей набор <type>OID</type>, однозначно идентифицирующих объект, и функции <link linkend="functions-info-object-table"><function>pg_identify_object_as_address()</function></link>, возвращающей информацию об объекте по этим <type>OID</type> (Альваро Эррера)</para>
      </listitem>

      <listitem>
<!--
2015-03-19 [bf03889] Stephe..: GetUserId() changes to has_privs_of_role()
-->
       <para>Ослабление ограничений безопасности при просмотре запросов в <link linkend="pg-stat-activity-view"><structname>pg_stat_activity</structname></link> и вызове функций <link linkend="functions-admin-signal-table"><function>pg_cancel_backend()</function></link> и <link linkend="functions-admin-signal-table"><function>pg_terminate_backend()</function></link> (Стивен Фрост)</para>

       <para>Ранее эти операции могли выполнять только роли, которым непосредственно принадлежит целевой сеанс; теперь достаточно быть членом такой роли.</para>
      </listitem>

      <listitem>
<!--
2015-02-19 [2fb7a75] Tom Lane: Add pg_stat_get_snapshot_timestamp() to show s..
-->
       <para>Добавление функции <link linkend="monitoring-stats-funcs-table"><function>pg_stat_get_snapshot_timestamp()</function></link>, выдающей время снимка статистики (Мэтт Келли)</para>

       <para>Это время показывает, когда в последний раз файл снимка записывался в файловую систему.</para>
      </listitem>

      <listitem>
<!--
2014-09-10 [36ad1a8] Bruce ..: Implement mxid_age() to compute multi-xid age
-->
       <para>Добавление функции <link linkend="vacuum-for-multixact-wraparound"><function>mxid_age()</function></link>, вычисляющей возраст мультитранзакций (Брюс Момджян)</para>
      </listitem>
     </itemizedlist>

    </sect4>

    <sect4>
     <title>Агрегатные функции</title>

     <itemizedlist>

      <listitem>
<!--
2014-08-28 [6c40f83] Tom Lane: Add min and max aggregates for inet/cidr data t..
-->
       <para>Добавление агрегатных функций <function>min()</function>/<function>max()</function> для типов данных <link linkend="datatype-inet"><type>inet</type></link>/<link linkend="datatype-cidr"><type>cidr</type></link> (Харибабу Комми)</para>
      </listitem>

      <listitem>
<!--
2015-03-20 [8122e14] Andres..: Add, optional, support for 128bit integers.
2015-03-20 [959277a] Andres..: Use 128-bit math to accelerate some aggregation..
-->
       <para>Использование 128-битных целых, где они поддерживаются, для накопления значений в некоторых агрегатных функциях (Андреас Карлсон)</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Языки программирования на стороне сервера</title>

    <itemizedlist>

     <listitem>
<!--
2014-07-03 [8b6010b] Tom Lane: Improve support for composite types in PL/Python.
-->
      <para>Улучшение поддержки составных типов в <link linkend="plpython"><application>PL/Python</application></link> (Эд Бен, Ронан Данклау)</para>

      <para>Это позволяет возвращать из функций на <application>PL/Python</application> массивы составных типов.</para>
     </listitem>

     <listitem>
<!--
2015-03-11 [1ce7a57] Peter ..: PL/Python: Avoid lossiness in float conversion
-->
      <para>Уменьшение неточности при преобразовании значений с плавающей точкой в <link linkend="plpython"><application>PL/Python</application></link> (Марко Крин)</para>
     </listitem>

     <listitem>
<!--
2015-04-26 [cac7658] Peter ..: Add transforms feature
-->
      <para>Возможность определения функций преобразования между типами данных <acronym>SQL</acronym> и типами данных процедурных языков (Питер Эйзентраут)</para>

      <para>Это изменение привносит команды <link linkend="sql-createtransform"><command>CREATE</command></link>/<link linkend="sql-droptransform"><command>DROP TRANSFORM</command></link>. Также с ним добавлены дополнительные трансформации типов <link linkend="hstore"><application>hstore</application></link> и <link linkend="ltree"><application>ltree</application></link> из/в типы языков <link linkend="plperl"><application>PL/Perl</application></link> и <link linkend="plpython"><application>PL/Python</application></link>.</para>
     </listitem>

     </itemizedlist>

     <sect4>
      <title>Серверный язык <link linkend="plpgsql">PL/pgSQL</link></title>

      <itemizedlist>

     <listitem>
<!--
2015-05-14 [1dc5ebc] Tom Lane: Support "expanded" objects, particularly arrays..
2015-02-16 [e983c4d] Tom Lane: Rationalize the APIs of array element/slice acc..
2015-02-18 [56a79a8] Tom Lane: Split array_push into separate array_append and..
2015-02-16 [9e3ad1a] Tom Lane: Use fast path in plpgsql's RETURN/RETURN NEXT i..
-->
      <para>Улучшение производительности массивов <link linkend="plpgsql"><application>PL/pgSQL</application></link> (Том Лейн)</para>
     </listitem>

     <listitem>
<!--
2015-03-25 [a4847fc] Tom Lane: Add an ASSERT statement in plpgsql.
-->
      <para>Добавление оператора <link linkend="plpgsql-statements-assert"><command>ASSERT</command></link> в <application>PL/pgSQL</application> (Павел Стехуле)</para>
     </listitem>

     <listitem>
<!--
2014-11-25 [bb1b8f6] Tom Lane: De-reserve most statement-introducing keywords ..
-->
      <para>Допущение использования в качестве идентификаторов большего количества ключевых слов <link linkend="plpgsql"><application>PL/pgSQL</application></link> (Том Лейн)</para>
     </listitem>

    </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Клиентские приложения</title>

    <itemizedlist>

     <listitem>
<!--
2015-04-11 [83aca89] Peter ..: Move pg_archivecleanup from contrib/ to src/bin/
2015-04-19 [00882d9] Peter ..: Move pg_test_fsync from contrib/ to src/bin/
2015-04-20 [528c2e4] Peter ..: Move pg_test_timing from contrib/ to src/bin/
2015-04-21 [b0a738f] Peter ..: Move pg_xlogdump from contrib/ to src/bin/
-->
      <para>Перемещение <link linkend="pgarchivecleanup"><application>pg_archivecleanup</application></link>, <link linkend="pgtestfsync"><application>pg_test_fsync</application></link>, <link linkend="pgtesttiming"><application>pg_test_timing</application></link> и <link linkend="pgxlogdump"><application>pg_xlogdump</application></link> из <filename>contrib</filename> в <filename>src/bin</filename> (Питер Эйзентраут)</para>

      <para>В результате эти программы должны по умолчанию устанавливаться в большем числе инсталляций.</para>
     </listitem>

     <listitem>
<!--
2015-03-23 [61081e7] Heikki..: Add pg_rewind, for re-synchronizing a master se..
-->
      <para>Добавление программы <link linkend="app-pgrewind"><application>pg_rewind</application></link>, позволяющей восстановить синхронизированное состояние главного сервера после отработки отказа (Хейкки Линнакангас)</para>
     </listitem>

     <listitem>
<!--
2014-10-06 [d9f38c7] Andres..: Add support for managing physical replication s..
-->
      <para>Возможность управления слотами физической репликации с помощью <link linkend="app-pgreceivexlog"><application>pg_receivexlog</application></link> (Мишель Пакье)</para>

      <para>Для этого введены новые параметры <option>--create-slot</option> и <option>--drop-slot</option>.</para>
     </listitem>

     <listitem>
<!--
2014-11-18 [c4f99d2] Fujii ..: Add &#8211;&#8211;synchronous option to pg_receivexlog, for..
-->
      <para>В <link linkend="app-pgreceivexlog"><application>pg_receivexlog</application></link> появилась возможность синхронно сбрасывать <acronym>WAL</acronym> на диск с нововведённым параметром <option>--synchronous</option> (Фуруя Осаму, Фудзии Масао)</para>

      <para>Без него файлы <acronym>WAL</acronym> сохраняются на диске только при закрытии.</para>
     </listitem>

     <listitem>
<!--
2015-01-23 [a179232] Alvaro..: vacuumdb: enable parallel mode
-->
      <para>В <link linkend="app-vacuumdb"><application>vacuumdb</application></link> появилась возможность очистки в параллельном режиме с нововведённым параметром <option>--jobs</option> (Дилип Кумар)</para>
     </listitem>

     <listitem>
<!--
2015-11-12 [5094da9] Alvaro..: vacuumdb: don't prompt for passwords over and ..
-->
      <para>Программа <link linkend="app-vacuumdb"><application>vacuumdb</application></link> теперь не запрашивает один и тот же пароль многократно, когда устанавливает несколько подключений (Харибабу Комми, Мишель Пакье)</para>
     </listitem>

     <listitem>
<!--
2015-05-15 [458a077] Fujii ..: Support &#8211;&#8211;verbose option in reindexdb.
-->
      <para>Добавление ключа <option>--verbose</option> для <link linkend="app-reindexdb"><application>reindexdb</application></link> (Савада Масахико)</para>
     </listitem>

     <listitem>
<!--
2015-05-12 [72d422a] Andrew..: Map basebackup tablespaces using a tablespace_..
-->
      <para>Использование в <link linkend="app-pgbasebackup"><application>pg_basebackup</application></link> файла отображений табличных пространств при выборе формата <application>tar</application>, что позволяет поддерживать символические ссылки и пути длиннее 100 символов в <systemitem class="osname">MS Windows</systemitem> (Амит Капила)</para>
     </listitem>

     <listitem>
<!--
2014-09-19 [728f152] Andres..: Add rmgr callback to name xlog record types for..
2014-09-19 [bdd5726] Andres..: Add the capability to display summary statistic..
-->
      <para>Добавление в <link linkend="pgxlogdump"><application>pg_xlogdump</application></link> ключа <option>--stats</option> для получения сводной статистики (Абхиджит Менон-Сен)</para>
     </listitem>

    </itemizedlist>

     <sect4>
      <title><xref linkend="app-psql"/></title>

      <itemizedlist>

       <listitem>
<!--
2015-03-31 [9d9991c] Bruce ..: psql:  add asciidoc output format
-->
        <para>Возможность получить вывод <application>psql</application> в формате AsciiDoc (Шимон Гуз)</para>
       </listitem>

       <listitem>
<!--
2014-07-10 [5b214c5] Fujii ..: Add new ECHO mode 'errors' that displays only ..
-->
        <para>Добавление режима <literal>errors</literal> в переменной <varname>ECHO</varname>, в котором <application>psql</application> выводит только команды с ошибками (Павел Стехуле)</para>

        <para>Этот режим также можно включить, передав <application>psql</application> ключ <option>-b</option>.</para>
       </listitem>

       <listitem>
<!--
2014-09-12 [a2dabf0] Stephe..: Add unicode_{column|header|border}_style to psql
-->
        <para>Разделение в <application>psql</application> параметров, управляющих стилем линий в Юникоде, на параметры для колонок, заголовка и границ (Павел Стехуле)</para>

        <para>Поддерживаются одинарные и двойные линии; вариант по умолчанию — <literal>single</literal> (одинарные).</para>
       </listitem>

       <listitem>
<!--
2014-09-02 [51bb795] Andres..: Add psql PROMPT variable showing which line of ..
-->
        <para>Поддержка нового параметра <literal>%l</literal> в переменных окружения <link linkend="app-psql-variables"><envar>PROMPT</envar></link> в <application>psql</application>, позволяющего увидеть текущий номер строки в многострочном операторе (Савада Масахико)</para>
       </listitem>

       <listitem>
<!--
2015-03-28 [7655f4c] Andrew..: Add a pager_min_lines setting to psql
-->
        <para>Добавление в <literal>\pset</literal> параметра <link linkend="app-psql-meta-commands"><varname>pager_min_lines</varname></link>, управляющего вызовом постраничника (Эндрю Дунстан)</para>
       </listitem>

       <listitem>
<!--
2014-11-21 [4077fb4] Andrew..: Fix an error in psql that overcounted output l..
-->
        <para>Улучшение подсчёта строк в <application>psql</application>, по результатам которого принимается решения о вызове постраничника (Эндрю Дунстан)</para>
       </listitem>

       <listitem>
<!--
2015-12-03 [07338cb] Tom Lane: Clean up some psql issues around handling of t..
2015-12-08 [e90371d] Tom Lane: Make failure to open psql log-file fatal.
-->
        <para>Теперь <application>psql</application> не запускается, если не может записать в файл, заданный ключом <option>--output</option> или <option>--log-file</option> (Том Лейн, Даниэль Верите)</para>

        <para>Ранее <application>psql</application> по сути игнорировал этот ключ в таких случаях.</para>
       </listitem>

       <listitem>
<!--
2014-07-12 [bd40951] Andres..: Minimal psql tab completion support for SET se..
-->
        <para>Добавление в <application>psql</application> дополнения табуляцией, когда устанавливается переменная <xref linkend="guc-search-path"/> (Джефф Джейнс)</para>

        <para>В настоящее время дополнение табуляцией возможно только для первой схемы.</para>
       </listitem>

       <listitem>
<!--
2014-06-23 [631e7f6] Heikki..: Improve tab-completion of DROP and ALTER ENABLE..
-->
        <para>Улучшение в <application>psql</application> дополнения табуляцией для триггеров и правил (Андреас Карлсон)</para>
       </listitem>

      </itemizedlist>

     <sect5>
      <title><link linkend="app-psql-meta-commands">Команды с обратной косой чертой</link></title>

      <itemizedlist>

       <listitem>
<!--
2014-09-10 [07c8651] Andres..: Add new psql help topics, accessible to both..
-->
        <para>Добавление для команды <application>psql</application> <command>\?</command> разделов справки <literal>variables</literal> и <literal>options</literal> (Павел Стехуле)</para>

        <para>Команда <literal>\? variables</literal> показывает справку по специальным переменным <application>psql</application>, а <literal>\? options</literal> — по параметрам командной строки. Команда <command>\? commands</command> выводит метакоманды, которые выводились раньше, и это остаётся вариантом по умолчанию. Эти разделы справки также можно получить, передав в командной строке аргумент <literal>--help=<replaceable>раздел</replaceable></literal>.</para>
       </listitem>

       <listitem>
<!--
2014-07-14 [ee80f04] Alvaro..: psql: Show tablespace size in \db+
-->
        <para>В команде <application>psql</application> <literal>\db+</literal> добавлен вывод размера табличного пространства (Фабрицио де Ройес Мелло)</para>
       </listitem>

       <listitem>
<!--
2015-04-09 [a6f3c1f] Magnus..: Show owner of types in psql \dT+
-->
        <para>В <application>psql</application> <literal>\dT+</literal> добавлено отображение владельцев типов данных (Магнус Хагандер)</para>
       </listitem>

       <listitem>
<!--
2014-09-04 [f6f654f] Fujii ..: Allow \watch to display query execution time if..
-->
        <para>В <application>psql</application> <command>\watch</command> добавлен вывод информации <command>\timing</command> (Фудзии Масао)</para>

        <para>Отключение вывода запросов <command>\watch</command> при запуске с ключом <option>--echo-hidden</option>, так как обычно они не нужны.</para>
       </listitem>

       <listitem>
<!--
2014-11-22 [eca2b9b] Andrew..: Rework echo_hidden for \sf and \ef from commit ..
-->
        <para>Команды <application>psql</application> <literal>\sf</literal> и <literal>\ef</literal> должны учитывать переменную <envar>ECHO_HIDDEN</envar> (Эндрю Дунстан)</para>
       </listitem>

       <listitem>
<!--
2014-08-12 [e15c4ab] Fujii ..: Add tab-completion for \unset and valid setting..
-->
        <para>Улучшение в <application>psql</application> дополнения табуляцией для <command>\set</command>, <command>\unset</command> и имён <literal>:variable</literal> (Павел Стехуле)</para>
       </listitem>

       <listitem>
<!--
2014-11-10 [095d401] Robert..: Tab complete second argument to \c with role n..
-->
        <para>Возможность дополнения табуляцией имён ролей в командах <application>psql</application> <literal>\c</literal> (Иэн Барвик)</para>
       </listitem>

      </itemizedlist>

     </sect5>

    </sect4>

    <sect4>
     <title><xref linkend="app-pgdump"/></title>

     <itemizedlist>

      <listitem>
<!--
2014-11-17 [be1cc8f] Simon ..: Add pg_dump &#8211;&#8211;snapshot option
-->
       <para>Возможность использовать в <application>pg_dump</application> снимок данных, полученный в другом сеансе, с параметром <option>--snapshot</option> (Саймон Риггс, Мишель Пакье)</para>

       <para>Этот снимок должен быть экспортирован функцией <function>pg_export_snapshot()</function> или при создании слота логической репликации. Это может применяться для совместного использования согласованного снимка несколькими процессами <application>pg_dump</application>.</para>
      </listitem>

      <listitem>
<!--
2015-11-21 [5f5e68b] Tom Lane: Adopt the GNU convention for handling tar-arch..
-->
       <para>Поддержка в архивном формате tar таблиц размером больше 8 ГБ (Том Лейн)</para>

       <para>Стандарт POSIX формата tar не позволяет включать в архив элементы размером больше 8 ГБ, но большинство современных реализаций tar поддерживают расширение, допускающие это. Поэтому нужно использовать расширенный формат, когда это необходимо, а не выдавать ошибку.</para>
      </listitem>

      <listitem>
<!--
2014-07-07 [7700597] Tom Lane: In pg_dump, show server and pg_dump versions w..
-->
       <para>Включение в <application>pg_dump</application> вывода версий сервера и <application>pg_dump</application> во всех режимах (Цзин Ван)</para>

       <para>До этого информация о версии выводилась только в режиме <option>--verbose</option>.</para>
      </listitem>

      <listitem>
<!--
2015-06-04 [232cd63] Fujii ..: Remove -i/-ignore-version option from pg_dump..
-->
       <para>Исключение давно забытого параметра <option>-i</option>/<option>--ignore-version</option> из <application>pg_dump</application>, <application>pg_dumpall</application> и <application>pg_restore</application> (Фудзии Масао)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><xref linkend="app-pg-ctl"/></title>

     <itemizedlist>

      <listitem>
<!--
2014-08-25 [ebe30ad] Bruce ..: pg_ctl, pg_upgrade:  allow multiple -o/-O opti..
-->
       <para>Поддержка нескольких параметров <application>pg_ctl</application> <option>-o</option>, так что их значения соединяются вместе (Брюс Момджян)</para>
      </listitem>

      <listitem>
<!--
2014-07-17 [c0e4520] Magnus..: Add option to pg_ctl to choose event source for..
-->
       <para>Возможность определения для <application>pg_ctl</application> источника событий, записываемых в журнал событий <systemitem class="osname">MS Windows</systemitem> (МауМау)</para>

       <para>Это влияет только на события <application>pg_ctl</application>, а не сервера — для него источник событий задаётся отдельно, в <filename>postgresql.conf</filename>.</para>
      </listitem>

      <listitem>
<!--
2015-11-08 [bdb42ba] Noah M..: Don't connect() to a wildcard address in test_..
-->
       <para>Если в качестве принимающего адреса сервера задаётся всёохватывающее значение (<literal>0.0.0.0</literal> в IPv4 или <literal>::</literal> в IPv6), нужно подключаться через адрес локального замыкания, а не использовать заданный адрес буквально (Кондо Юта)</para>

       <para>Это исправление в первую очередь затрагивает Windows, так как на других платформах <application>pg_ctl</application> предпочитает использовать доменный сокет Unix.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><xref linkend="pgupgrade"/></title>

     <itemizedlist>

      <listitem>
<!--
2015-04-14 [9fa8b0e] Peter ..: Move pg_upgrade from contrib/ to src/bin/
-->
       <para>Перемещение <application>pg_upgrade</application> из <filename>contrib</filename> в <filename>src/bin</filename> (Питер Эйзентраут)</para>

       <para>В связи с этим изменением, функциональность, ранее предоставляемая модулем <application>pg_upgrade_support</application>, была включена в ядро сервера.</para>
      </listitem>

      <listitem>
<!--
2014-08-25 [ebe30ad] Bruce ..: pg_ctl, pg_upgrade:  allow multiple -o/-O optio..
-->
       <para>Поддержка нескольких параметров <application>pg_upgrade</application> <option>-o</option>/<option>-O</option>, так что их значения соединяются вместе (Брюс Момджян)</para>
      </listitem>

      <listitem>
<!--
2014-10-10 [33755e8] Heikki..: Change the way encoding and locale checks are d..
-->
       <para>Улучшение сравнений правил сортировки для баз данных в <application>pg_upgrade</application> (Хейкки Линнакангас)</para>
      </listitem>

      <listitem>
<!--
2014-08-25 [2209b39] Bruce ..: pg_upgrade:  remove support for 8.3 old clusters
-->
       <para>Ликвидация поддержки обновления с версии 8.3 (Брюс Момджян)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><xref linkend="pgbench"/></title>

     <itemizedlist>

      <listitem>
<!--
2015-04-13 [81134af] Peter ..: Move pgbench from contrib/ to src/bin/
-->
       <para>Перемещение pgbench из <filename>contrib</filename> в <filename>src/bin</filename> (Питер Эйзентраут)</para>
      </listitem>

      <listitem>
<!--
2015-09-30 [3c4c5ac] Tatsuo..: Fix incorrect tps number calculation in "exclu..
-->
       <para>Исправлено вычисление TPS <quote>за исключением установленных соединений</quote> (Тацуо Исии, Фабьен Коэльо)</para>

       <para>Накладные расходы на установление соединения подсчитывались неправильно, когда число потоков pgbench было меньше числа клиентских подключений. Хотя это определённо ошибка, мы не будем переносить её исправление в версии до 9.5, так как при этом значения TPS окажутся несравнимыми с предыдущими результатами.</para>
      </listitem>

      <listitem>
<!--
2014-10-13 [98aed6c] Heikki..: Add &#8211;&#8211;latency-limit option to pgbench.
-->
       <para>Подсчёт транзакций, выполнявшихся дольше заданного времени (Фабьен Коэльо)</para>

       <para>Этим подсчётом управляет нововведённый параметр <option>--latency-limit</option>.</para>
      </listitem>

      <listitem>
<!--
2014-07-30 [ed802e7] Robert..: pgbench: Allow \setrandom to generate Gaussian..
-->
       <para>Возможность получить в pgbench случайное распределение Гаусса или экспоненциальное распределение <command>\setrandom</command> (Мицумаса Кондо, Фабьен Коэльо)</para>
      </listitem>

      <listitem>
<!--
2015-03-02 [878fdcb] Robert..: pgbench: Add a real expression syntax to \set
-->
       <para>Реализация в команде <application>pgbench</application> <command>\set</command> обработки арифметических выражений с несколькими операторами и включение <literal>%</literal> (деления по модулю) в список поддерживаемых операторов (Роберт Хаас, Фабьен Коэльо)</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Исходный код</title>

     <itemizedlist>

      <listitem>
<!--
2014-11-20 [2c03216] Heikki..: Revamp the WAL record format.
-->
       <para>Упрощение формата записи <link linkend="wal"><acronym>WAL</acronym></link> (Хейкки Линнакангас)</para>

       <para>Благодаря этому изменению, внешним средствам будет легче отслеживать, какие блоки изменяются.</para>
      </listitem>

      <listitem>
<!--
2015-03-15 [4f1b890] Andres..: Merge the various forms of transaction commit &..
-->
       <para>Улучшение представления записей фиксации и прерывания транзакций в WAL (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2014-09-25 [b64d92f] Andres..: Add a basic atomic ops API abstracting away pla..
-->
       <para>Добавление <acronym>API</acronym> атомарных операций с памятью (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2014-11-07 [0b03e59] Robert..: Introduce custom path and scan providers.
2014-11-20 [a34fa8e] Tom Lane: Initial code review for CustomScan patch.
2014-11-21 [c2ea228] Tom Lane: Simplify API for initially hooking custom-path ..
2014-11-21 [4477704] Tom Lane: Rearrange CustomScan API.
-->
       <para>Возможность реализации нестандартных методов сканирования и путей (КайГай Кохей, Том Лейн)</para>

       <para>Это даёт расширениям дополнительные рычаги управления оптимизатором и исполнителем.</para>
      </listitem>

      <listitem>
<!--
2015-05-12 [afb9249] Tom Lane: Add support for doing late row locking in FDWs.
-->
       <para>Возможность устанавливать блокировки после фильтрации в обёртках сторонних данных (Эцуро Фудзита)</para>
      </listitem>

      <listitem>
<!--
2015-05-08 [168d580] Andres..: Add support for INSERT ... ON CONFLICT DO NOTHI..
2015-05-08 [2c8f483] Andres..: Represent columns requiring insert and update p..
-->
       <para>Сторонние таблицы теперь могут участвовать в запросах <command>INSERT ... ON CONFLICT DO NOTHING</command> (Питер Геохеган, Хейкки Линнакангас, Андрес Фройнд)</para>

       <para>Обёртки сторонних данных не нужно модифицировать, чтобы это поддерживалось. Однако команда <command>INSERT ... ON CONFLICT DO UPDATE</command> со сторонними таблицами не поддерживается.</para>
      </listitem>

      <listitem>
<!--
2014-12-18 [4a14f13] Tom Lane: Improve hash_create's API for selecting simple-..
-->
       <para>Улучшение интерфейса <function>hash_create()</function>, позволяющее выбирать хеш-функции с простым двоичным ключом (Фёдор Сигаев, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-04-30 [924bcf4] Robert..: Create an infrastructure for parallel computati..
2014-10-31 [2bd9e41] Robert..: Support frontend-backend protocol communication..
-->
       <para>Улучшение инфраструктуры параллельного выполнения (Роберт Хаас, Амит Капила, Ной Миш, Рушаб Латиа, Дживан Чок)</para>
      </listitem>

      <listitem>
<!--
2014-06-28 [a6d488c] Andres..: Remove Alpha and Tru64 support.
-->
       <para>Ликвидация портов для <productname>Alpha</productname> (<acronym>CPU</acronym>) и <systemitem class="osname">Tru64</systemitem> (ОС) (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2014-07-06 [4893ccd] Robert..: Remove swpb-based spinlock implementation for A..
-->
       <para>Ликвидация реализации циклических блокировок (spinlock) на основе перестановки байт для <acronym>ARM</acronym>v5 и предыдущих процессоров (Роберт Хаас)</para>

       <para>Особенность слабого упорядочивания доступа к памяти в <acronym>ARM</acronym> v5 делает такую реализацию блокировки ненадёжной. Однако использование циклических блокировок всё же возможно с новыми версиями gcc, поддерживающими атомарные операции.</para>
      </listitem>

      <listitem>
<!--
2015-02-24 [23a7835] Peter ..: Error when creating names too long for tar for..
-->
       <para>Выдача ошибки при попытке записать в файлы tar чрезмерно длинный (больше 100 символов) путь (Питер Эйзентраут)</para>

       <para>Tar не поддерживает такие длинные пути.</para>
      </listitem>

      <listitem>
<!--
2015-05-19 [0b28ea7] Tom Lane: Avoid collation dependence in indexes of syste..
-->
       <para>Смена индексируемого класса операторов для столбцов <link linkend="catalog-pg-seclabel"><structname>pg_seclabel</structname></link>.<structname>provider</structname> и <link linkend="catalog-pg-shseclabel"><structname>pg_shseclabel</structname></link>.<structname>provider</structname> на <literal>text_pattern_ops</literal> (Том Лейн)</para>

       <para>Это позволяет избежать возможных проблем с этими индексами, когда в разных базах данных кластера используются разные правила сортировки.</para>
      </listitem>

      <listitem>
<!--
2014-09-09 [0709b7e] Robert..: Change the spinlock primitives to function as c..
-->
       <para>Изменение примитивов spinlock, чтобы они действовали как барьеры для оптимизаций компилятора (Роберт Хаас)</para>
      </listitem>

     </itemizedlist>

    <sect4>
     <title>MS Windows</title>

     <itemizedlist>

      <listitem>
<!--
2014-12-08 [519b075] Simon ..: Use GetSystemTimeAsFileTime directly in win32
2014-12-08 [8001fe6] Simon ..: Windows: use GetSystemTimePreciseAsFileTime if ..
-->
       <para>Получение системного времени с большей точностью в <systemitem class="osname">Windows 8</systemitem>, <systemitem class="osname">Windows Server 2012</systemitem> и более новых системах Windows (Крейг Рингер)</para>
      </listitem>

      <listitem>
<!--
2015-03-18 [f9dead5] Alvaro..: Install shared libraries to bin/ in Windows un..
-->
       <para>Установка разделяемых библиотек в <filename>bin</filename> в <systemitem class="osname">MS Windows</systemitem> (Питер Эйзентраут, Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2015-04-16 [22d0053] Alvaro..: MSVC: install src/test/modules together with c..
-->
       <para>Установка <filename>src/test/modules</filename> вместе с <filename>contrib</filename> в сборках с <productname>MSVC</productname> (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2014-07-12 [8d9a0e8] Magnus..: Support &#8211;&#8211;with-extra-version equivalent functi..
-->
       <para>В сборке с <productname>MSVC</productname> теперь может учитываться задаваемый для configure параметр <option>--with-extra-version</option> (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2014-07-14 [91f03ba] Noah M..: MSVC: Recognize PGFILEDESC in contrib and conv..
-->
       <para>Передача <envar>PGFILEDESC</envar> в сборки contrib с <productname>MSVC</productname> (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2014-07-14 [c4a448e] Noah M..: MSVC: Apply icons to all binaries having them ..
-->
       <para>Добавление значков во все собираемые с <productname>MSVC</productname> двоичные файлы и информации о версии во все двоичные файлы, собираемые для <systemitem class="osname">MS Windows</systemitem> (Ной Миш)</para>

       <para>При сборке с MinGW такие значки уже добавлялись ранее.</para>
      </listitem>

      <listitem>
<!--
2014-09-10 [311da16] Andres..: Add support for optional_argument to our own ge..
-->
       <para>Добавление поддержки необязательных аргументов во внутреннюю реализацию <function>getopt_long()</function> (Мишель Пакье, Андрес Фройнд)</para>

       <para>Это используется при сборке с <productname>MSVC</productname>.</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Дополнительные модули</title>

    <itemizedlist>

     <listitem>
<!--
2015-03-27 [717f709] Andrew..: Add stats for min, max, mean, stddev times to p..
-->
      <para>Добавление статистики для получения минимального, максимального, среднего времени и стандартного отклонения в <link linkend="pgstatstatements-columns"><application>pg_stat_statements</application></link> (Мицумаса Кондо, Эндрю Дунстан)</para>
     </listitem>

     <listitem>
<!--
2014-10-01 [32984d8] Heikki..: Add functions for dealing with PGP armor heade..
-->
      <para>Добавление в <link linkend="pgcrypto"><application>pgcrypto</application></link> функции <function>pgp_armor_headers()</function> для извлечения заголовков <productname>PGP</productname> Armor (Марко Тииккая, Хейкки Линнакангас)</para>
     </listitem>

     <listitem>
<!--
2014-06-30 [97c40ce] Tom Lane: Allow empty replacement strings in contrib/unac..
-->
      <para>Возможность задавать пустые строки замены в <link linkend="unaccent"><application>unaccent</application></link> (Мохаммед Альхашаш)</para>

      <para>Это полезно для языков, в которых диакритические знаки представляются как отдельные символы.</para>
     </listitem>

     <listitem>
<!--
2014-06-30 [1b24887] Tom Lane: Allow multi-character source strings in contrib..
-->
      <para>Возможность задавать многосимвольные исходные строки в <link linkend="unaccent"><application>unaccent</application></link> (Том Лейн)</para>

      <para>Это может быть полезно для языков, в которых диакритические знаки представляются как отдельные символы. Это также позволяет создавать более сложные словари удаления диакритики.</para>
     </listitem>

     <listitem>
<!--
2015-05-15 [9689290] Simon ..: TABLESAMPLE system_rows(limit)
2015-05-15 [149f6f1] Simon ..: TABLESAMPLE system_time(limit)
-->
      <para>Добавление в <filename>contrib</filename> модулей <link linkend="tsm-system-rows"><application>tsm_system_rows</application></link> и <link linkend="tsm-system-time"><application>tsm_system_time</application></link>, реализующих дополнительные методы извлечения выборки (Петр Желинек)</para>
     </listitem>

     <listitem>
<!--
2014-11-21 [3a82bc6] Heikki..: Add pageinspect functions for inspecting GIN in..
-->
      <para>Добавление функций исследования индекса <link linkend="gin"><acronym>GIN</acronym></link> в <link linkend="pageinspect"><application>pageinspect</application></link> (Хейкки Линнакангас, Питер Геохеган, Мишель Пакье)</para>
     </listitem>

     <listitem>
<!--
2014-08-22 [f577919] Andres..: Add pinning_backends column to the pg_buffercac..
-->
      <para>Добавление информации о закреплении буфера в вывод <link linkend="pgbuffercache"><application>pg_buffercache</application></link> (Андрес Фройнд)</para>
     </listitem>

     <listitem>
<!--
2015-05-13 [5850b20] Andres..: Add pgstattuple_approx() to the pgstattuple ext..
-->
      <para>Возможность получать от <link linkend="pgstattuple"><application>pgstattuple</application></link> приблизительных ответов с меньшими издержками, используя <function>pgstattuple_approx()</function> (Абхиджит Менон-Сен)</para>
     </listitem>

     <listitem>
<!--
2014-11-29 [22dfd11] Alvaro..: Move test modules from contrib to src/test/modu..
2014-12-01 [df761e3] Alvaro..: Move security_label test
-->
      <para>Перемещение <application>dummy_seclabel</application>, <application>test_shm_mq</application>, <application>test_parser</application> и <application>worker_spi</application> из <filename>contrib</filename> в <filename>src/test/modules</filename> (Альваро Эррера)</para>

      <para>Этим модули предназначаются только для тестирования сервера, поэтому их нет смысла собирать или устанавливать в составе пакета <productname>PostgreSQL</productname>.</para>
     </listitem>

    </itemizedlist>

   </sect3>

  </sect2>

 </sect1>
