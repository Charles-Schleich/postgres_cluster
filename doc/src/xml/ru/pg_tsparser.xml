<sect1 id="pg-tsparser">
  <title>pg_tsparser</title>
  <para><filename>pg_tsparser</filename> — это расширение <productname>&productname;</productname> для текстового поиска. Это расширение меняет стандартную стратегию разбора текста для слов, включающих:</para>
  <itemizedlist spacing="compact">
    <listitem>
      <para>подчёркивания</para>
    </listitem>
    <listitem>
      <para>цифры и буквы, разделённые знаком минуса</para>
    </listitem>
  </itemizedlist>
  <para>В дополнение к отдельным частям слова, возвращаемых по умолчанию, <filename>pg_tsparser</filename> также возвращает всё слово.</para>
  <sect2 id="pg-tsparser-install">
    <title>Установка и настройка</title>
    <para>Расширение <filename>pg_tsparser</filename> входит в состав <productname>&productname;</productname>. Чтобы задействовать <filename>pg_tsparser</filename>, установив <productname>&productname;</productname>, создайте расширение <filename>pg_tsparser</filename> в каждой базе данных, где вы планируете его использовать:</para>
    <programlisting>CREATE EXTENSION pg_tsparser;</programlisting>
    <para>Активировав <filename>pg_tsparser</filename>, вы можете создавать собственные конфигурации текстового поиска. Вместе с <filename>pg_tsparser</filename> можно использовать любой имеющийся словарь.</para>
    <para>Например, так можно создать конфигурацию <literal>english_ts</literal> для английского языка:</para>
    <programlisting>CREATE TEXT SEARCH CONFIGURATION english_ts (
    PARSER = tsparser
);

COMMENT ON TEXT SEARCH CONFIGURATION english_ts IS 'text search configuration for english language';

ALTER TEXT SEARCH CONFIGURATION english_ts
    ADD MAPPING FOR email, file, float, host, hword_numpart, int,
    numhword, numword, sfloat, uint, url, url_path, version
    WITH simple;

ALTER TEXT SEARCH CONFIGURATION english_ts
    ADD MAPPING FOR asciiword, asciihword, hword_asciipart,
    word, hword, hword_part
    WITH english_stem;</programlisting>
  </sect2>
  <sect2 id="pg-tsparser-examples">
    <title>Примеры</title>
    <para>Следующие примеры иллюстрируют различия в результатах поиска, возвращаемых анализатором текста <filename>pg_tsparser</filename> и стандартным анализатором:</para>
    <programlisting>SELECT to_tsvector('english', 'pg_trgm') as def_parser,
       to_tsvector('english_ts', 'pg_trgm')  as new_parser;
   def_parser    |         new_parser
-----------------+-----------------------------
 'pg':1 'trgm':2 | 'pg':2 'pg_trgm':1 'trgm':3
(1 row)

SELECT to_tsvector('english', '123-abc') as def_parser,
       to_tsvector('english_ts', '123-abc')  as new_parser;
   def_parser    |         new_parser
-----------------+-----------------------------
 '123':1 'abc':2 | '123':2 '123-abc':1 'abc':3
(1 row)

SELECT to_tsvector('english', 'rel-3.2-A') as def_parser,
       to_tsvector('english_ts', 'rel-3.2-A')  as new_parser;
    def_parser    |          new_parser
------------------+-------------------------------
 '-3.2':2 'rel':1 | '3.2':3 'rel':2 'rel-3.2-a':1
(1 row)</programlisting>
  <para><emphasis role="strong">См. также</emphasis></para>
  <para><xref linkend="sql-createtsconfig"/></para>
  <para><xref linkend="sql-altertsconfig"/></para>
  </sect2>
  <sect2 id="pg-tsparser-authors">
    <title>Авторы</title>
    <para>Postgres Professional, Москва, Россия</para>
  </sect2>
</sect1>
