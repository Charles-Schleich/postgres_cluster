<!-- doc/src/xml/release-9.6.xml -->
<!-- See header comment in release.xml about typical markup -->

 <sect1 id="release-9-6-5">
  <title>Выпуск 9.6.5</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-08-31</para>
  </formalpara>

  <para>В этот выпуск вошло несколько исправлений, внесённых после версии 9.6.4. За информацией о нововведениях версии 9.6 обратитесь к <xref remap="3" linkend="release-9-6"/>.</para>

  <sect2>
   <title>Миграция на версию 9.6.5</title>

   <para>Если используется версия 9.6.X, выгрузка/восстановление базы не требуется.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.6.4, см. <xref remap="4" linkend="release-9-6-4"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [0659465ca] 2017-08-15 19:27:22 -0400
Branch: REL_10_STABLE [3ea58216d] 2017-08-15 19:30:35 -0400
Branch: REL9_6_STABLE [dce90c7c8] 2017-08-15 19:31:06 -0400
Branch: REL9_5_STABLE [dbeefe64f] 2017-08-15 19:32:00 -0400
Branch: REL9_4_STABLE [52427015a] 2017-08-15 19:32:41 -0400
Branch: REL9_3_STABLE [9f0f4efc2] 2017-08-15 19:32:52 -0400
Branch: REL9_2_STABLE [98e6784aa] 2017-08-15 19:33:04 -0400
-->
     <para>Отображение сторонних таблиц в представлении <structname>information_schema</structname>.<structname>table_privileges</structname> (Питер Эйзентраут)</para>

     <para>Раньше сторонние таблицы отображались в остальных связанных представлениях <structname>information_schema</structname>, но отсутствовали в этом.</para>

     <para>Так как определение этого представления устанавливается программой <application>initdb</application>, для решения проблемы будет недостаточно обычного обновления. Если вы хотите исправить существующую инсталляцию, вы можете от имени суперпользователя выполнить в <application>psql</application>: <programlisting>BEGIN;
DROP SCHEMA information_schema CASCADE;
\i <replaceable>SHAREDIR</replaceable>/information_schema.sql
COMMIT;</programlisting> (Запустите <literal>pg_config --sharedir</literal>, если вы не знаете, что задать в качестве <replaceable>SHAREDIR</replaceable>.) Это потребуется повторить для каждой базы данных, требующей исправления.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [5b6289c1e] 2017-08-14 15:43:20 -0400
Branch: REL9_6_STABLE [624b6f328] 2017-08-14 15:43:20 -0400
Branch: REL9_5_STABLE [51684bad9] 2017-08-14 15:43:20 -0400
Branch: REL9_4_STABLE [daafb11ff] 2017-08-14 15:43:20 -0400
Branch: REL9_3_STABLE [cd184273b] 2017-08-14 15:43:20 -0400
Branch: REL9_2_STABLE [8ae41ceae] 2017-08-14 15:43:20 -0400
-->
     <para>Исправление обработки аварийного выхода (например, при получении <systemitem>SIGTERM</systemitem>) при попытке выполнить <command>ROLLBACK</command> для прерванной транзакции (Том Лейн)</para>

     <para>В таких ситуациях мог происходить сбой проверочного утверждения. В выпускаемых сборках выход всё равно производился, но в журнал выводилось неуместное сообщение <quote>cannot drop active portal</quote> (удалить активный портал нельзя).</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [004a9702e] 2017-08-13 16:15:14 -0400
Branch: REL9_6_STABLE [a64b5a992] 2017-08-13 16:15:14 -0400
Branch: REL9_5_STABLE [425be3ac9] 2017-08-13 16:15:14 -0400
Branch: REL9_4_STABLE [5a3688dc8] 2017-08-13 16:15:14 -0400
Branch: REL9_3_STABLE [bb11ff2bc] 2017-08-13 16:15:14 -0400
Branch: REL9_2_STABLE [5069017fe] 2017-08-13 16:15:14 -0400
-->
     <para>Удаление проверочного утверждения, которое могло нарушаться при аварийном выходе (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [749c7c417] 2017-08-09 17:03:09 -0400
Branch: REL9_6_STABLE [e2e398473] 2017-08-09 17:03:09 -0400
Branch: REL9_5_STABLE [d1c1d90e1] 2017-08-09 17:03:09 -0400
Branch: REL9_4_STABLE [95a0a8d2a] 2017-08-09 17:03:09 -0400
Branch: REL9_3_STABLE [06931a9c0] 2017-08-09 17:03:10 -0400
Branch: REL9_2_STABLE [4e704aac1] 2017-08-09 17:03:10 -0400
-->
     <para>Правильное обнаружение столбцов, имеющих тип диапазона или домена, который определён поверх искомого составного или доменного типа (Том Лейн)</para>

     <para>Определённые команды <command>ALTER</command>, меняющие определение составного или доменного типа, должны проверять, нет ли в базе данных значений этого типа, и прерываться, если они есть, так как для изменения или обновления таких значений нет необходимой инфраструктуры. Ранее эти проверки могли пропустить значения, обёрнутые в типы диапазонов или вложенные домены, что могло нарушить целостность в базе данных.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [9bf4068cc] 2017-08-08 19:18:22 -0400
Branch: REL9_6_STABLE [fe578cbd4] 2017-08-08 19:18:23 -0400
-->
     <para>Предотвращение сбоя при передаче по ссылке типов данных фиксированной длины параллельным рабочим процессам (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b1c2d76a2] 2017-08-19 13:39:51 -0400
Branch: REL_10_STABLE [1c3869c0b] 2017-08-19 13:39:52 -0400
Branch: REL9_6_STABLE [41803d55a] 2017-08-19 13:39:38 -0400
Branch: REL9_5_STABLE [258aac0b2] 2017-08-19 13:39:38 -0400
Branch: REL9_4_STABLE [59dde9fed] 2017-08-19 13:39:38 -0400
Branch: REL9_3_STABLE [ece4bd901] 2017-08-19 13:39:38 -0400
-->
     <para>Устранение сбоя в <application>pg_restore</application> при работе в параллельном режиме и использовании файла-списка объектов, подлежащих восстановлению (Фабрицио де Ройес Мелло)</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master Release: REL_10_STABLE [ea0ca75d5] 2017-08-14 11:29:34 +0200
Branch: REL9_6_STABLE [3d7a1e2b9] 2017-08-16 13:28:14 +0200
Branch: REL9_5_STABLE [f2ed2d0a1] 2017-08-16 13:28:37 +0200
Branch: REL9_4_STABLE [bd502753a] 2017-08-16 13:29:00 +0200
Branch: REL9_3_STABLE [f8bc6b2f6] 2017-08-16 13:30:09 +0200
Branch: REL9_2_STABLE [60b135c82] 2017-08-16 13:30:20 +0200
-->
     <para>Исправление лексического анализатора <application>ecpg</application>, чтобы он принимал предложения <literal>RETURNING</literal> без связанных переменных C (Михаэль Мескес)</para>

     <para>Благодаря этому программы <application>ecpg</application> могут содержать SQL-конструкции, использующие <literal>RETURNING</literal> внутри (например, внутри CTE), не определяя значения, которые будут возвращены клиенту.</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [a4619b26a] 2017-08-15 17:14:52 +0200
Branch: REL_10_STABLE [a6b174f55] 2017-08-16 13:27:21 +0200
Branch: REL9_6_STABLE [954490fec] 2017-08-16 13:28:10 +0200
-->
     <para>Доработка лексического анализатора <application>ecpg</application>, чтобы он распознавал продолжения строк команд C-препроцессора с обратной косой чертой (Михаэль Мескес)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [5a5c2feca] 2017-08-14 11:48:59 -0400
Branch: REL9_6_STABLE [3883be3ea] 2017-08-14 11:48:59 -0400
Branch: REL9_5_STABLE [1621a7553] 2017-08-14 11:48:59 -0400
Branch: REL9_4_STABLE [01de7ea85] 2017-08-14 11:48:59 -0400
Branch: REL9_3_STABLE [25169b948] 2017-08-14 11:48:59 -0400
Branch: REL9_2_STABLE [e3335ec0b] 2017-08-14 11:48:59 -0400
Branch: master [b5178c5d0] 2017-08-17 13:13:47 -0400
Branch: REL_10_STABLE [1d7a479d2] 2017-08-17 13:13:56 -0400
Branch: REL9_6_STABLE [c34331488] 2017-08-17 13:14:06 -0400
Branch: REL9_5_STABLE [bff216d87] 2017-08-17 13:14:11 -0400
Branch: REL9_4_STABLE [4f862351d] 2017-08-17 13:15:15 -0400
Branch: REL9_3_STABLE [bc4404405] 2017-08-17 13:15:36 -0400
Branch: REL9_2_STABLE [f7e4783dd] 2017-08-17 13:15:46 -0400
-->
     <para>Улучшение выбора флагов компилятора для PL/Perl в Windows (Том Лейн)</para>

     <para>В результате этого исправления предотвращаются сбои PL/Perl, возможные из-за некорректных предположений о ширине значений <type>time_t</type>. Побочным эффектом, который могут заметить разработчики расширений, стала ликвидация глобального определения <literal>_USE_32BIT_TIME_T</literal> в сборках <productname>PostgreSQL</productname> для Windows. Это не должно приводить к проблемам, так как тип <type>time_t</type> не используется ни в каких определениях API <productname>PostgreSQL</productname>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master Release: REL_10_STABLE [a76200de8] 2017-08-09 12:05:53 -0400
Branch: REL9_6_STABLE [fc2aafe4a] 2017-08-09 12:06:08 -0400
Branch: REL9_5_STABLE [a784d5f21] 2017-08-09 12:06:14 -0400
-->
     <para>Исправление поведения <literal>make check</literal> при использовании альтернативной (не GNU) программы make (Томас Мунро)</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-6-4">
  <title>Выпуск 9.6.4</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-08-10</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.6.3. За информацией о нововведениях версии 9.6 обратитесь к <xref remap="3" linkend="release-9-6"/>.</para>

  <sect2>
   <title>Миграция на версию 9.6.4</title>

   <para>Если используется версия 9.6.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы используете сторонние серверы данных, на которых для проверки подлинности применяются пароли, прочитайте ниже первую запись в списке изменений.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.6.3, см. <xref remap="4" linkend="release-9-6-3"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [e568e1eee] 2017-08-07 07:09:28 -0700
Branch: REL9_6_STABLE [156099630] 2017-08-07 07:09:31 -0700
Branch: REL9_5_STABLE [36f9f6095] 2017-08-07 07:09:31 -0700
Branch: REL9_4_STABLE [b6e39ca92] 2017-08-07 07:09:31 -0700
Branch: REL9_3_STABLE [5e8e00914] 2017-08-07 07:09:31 -0700
Branch: REL9_2_STABLE [e255e97a2] 2017-08-07 07:09:32 -0700
-->
     <para>Дальнейшее ограничение видимости <structname>pg_user_mappings</structname>.<structfield>umoptions</structfield> для защиты паролей, сохранённых в свойствах сопоставлений пользователей (Ной Миш)</para>

     <para>Исправление дефекта CVE-2017-7486 оказалось некорректным: в результате пользователь мог видеть свойства своего собственного сопоставления, даже когда он не имел права <literal>USAGE</literal> для соответствующего стороннего сервера. В таких свойствах мог содержаться пароль, который должен задавать владелец сервера, а не сам пользователь. Так как представление <structname>information_schema.user_mapping_options</structname> не показывает свойства в таких случаях, и <structname>pg_user_mappings</structname> не должно. (CVE-2017-7547)</para>

     <para>Само по себе это исправление корректирует поведение только в новых базах данных, создаваемых initdb. Если вы хотите применить это исправление к существующей базе данных, вам нужно будет проделать следующие действия:</para>

     <procedure>
      <step>
       <para>Добавьте <literal>allow_system_table_mods = true</literal> в <filename>postgresql.conf</filename> и перезапустите сервер. (В версиях, поддерживающих <command>ALTER SYSTEM</command>, вы можете воспользоваться этой командой для изменения конфигурации, но перезапустить сервер потребуется всё равно.)</para>
      </step>

      <step>
       <para>В <emphasis>каждой</emphasis> базе данных кластера выполните от имени суперпользователя следующие команды: <programlisting>SET search_path = pg_catalog;
CREATE OR REPLACE VIEW pg_user_mappings AS
    SELECT
        U.oid       AS umid,
        S.oid       AS srvid,
        S.srvname   AS srvname,
        U.umuser    AS umuser,
        CASE WHEN U.umuser = 0 THEN
            'public'
        ELSE
            A.rolname
        END AS usename,
        CASE WHEN (U.umuser &lt;&gt; 0 AND A.rolname = current_user
                     AND (pg_has_role(S.srvowner, 'USAGE')
                          OR has_server_privilege(S.oid, 'USAGE')))
                    OR (U.umuser = 0 AND pg_has_role(S.srvowner, 'USAGE'))
                    OR (SELECT rolsuper FROM pg_authid WHERE rolname = current_user)
                    THEN U.umoptions
                 ELSE NULL END AS umoptions
    FROM pg_user_mapping U
         LEFT JOIN pg_authid A ON (A.oid = U.umuser) JOIN
        pg_foreign_server S ON (U.umserver = S.oid);</programlisting></para>
      </step>

      <step>
       <para>Не забудьте внести коррективы в базах данных <literal>template0</literal> и <literal>template1</literal>, в противном случае уязвимость сохранится в базах, которые будут создаваться впоследствии. Чтобы поправить <literal>template0</literal>, вам потребуется временно разрешить подключения к ней. В <productname>PostgreSQL</productname> 9.5 и новее вы можете выполнить <programlisting>ALTER DATABASE template0 WITH ALLOW_CONNECTIONS true;</programlisting>, а внеся поправку в <literal>template0</literal>, восстановить прежнее состояние командой <programlisting>ALTER DATABASE template0 WITH ALLOW_CONNECTIONS false;</programlisting> В более ранних версиях вместо этого используйте пару команд <programlisting>UPDATE pg_database SET datallowconn = true WHERE datname = 'template0';
UPDATE pg_database SET datallowconn = false WHERE datname = 'template0';</programlisting></para>
      </step>

      <step>
       <para>В заключение удалите параметр конфигурации <literal>allow_system_table_mods</literal> и ещё раз перезапустите postmaster.</para>
      </step>
     </procedure>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [bf6b9e944] 2017-08-07 17:03:42 +0300
Branch: REL9_6_STABLE [f6fc72cb6] 2017-08-07 17:03:49 +0300
Branch: REL9_5_STABLE [127835ddf] 2017-08-07 17:04:00 +0300
Branch: REL9_4_STABLE [d5d46d99b] 2017-08-07 17:04:07 +0300
Branch: REL9_3_STABLE [b2f833ea7] 2017-08-07 17:04:12 +0300
Branch: REL9_2_STABLE [06651648a] 2017-08-07 17:04:17 +0300
-->
     <para>Запрет пустых паролей для всех методов аутентификации по паролю (Хейкки Линнакангас)</para>

     <para>Библиотека <application>libpq</application> игнорирует пустое указание пароля и не передаёт его на сервер. Поэтому, если пароль пользователя пустой, <application>psql</application> и другие клиенты на базе <application>libpq</application> не позволяют подключиться с таким паролем. Как следствие, администратор может решить, что установка пустого пароля равнозначна запрету входа по паролю. Однако с изменённым клиентом или клиентом не на базе <application>libpq</application> подключение оказывается возможным, в зависимости от настроенного метода аутентификации. В частности, самый распространённый метод, <literal>md5</literal>, принимает пустые пароли. В результате этого изменения сервер не будет принимать пустые пароли во всех случаях. (CVE-2017-7546)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8d9881911] 2017-08-07 10:19:19 -0400
Branch: REL9_6_STABLE [52a414387] 2017-08-07 10:19:20 -0400
Branch: REL9_5_STABLE [873741c68] 2017-08-07 10:19:21 -0400
Branch: REL9_4_STABLE [f1cda6d6c] 2017-08-07 10:19:22 -0400
-->
     <para>Добавление в <function>lo_put()</function> проверки права <literal>UPDATE</literal> для целевых больших объектов (Том Лейн, Мишель Пакье)</para>

     <para>Функция <function>lo_put()</function>, несомненно, должна требовать наличия тех же прав, что и <function>lowrite()</function>, но такая проверка отсутствовала, что позволяло пользователю менять данные в большом объекте. (CVE-2017-7548)</para>
    </listitem>

    <listitem>
<!--
Author: Bruce Momjian <bruce@momjian.us>
Branch: master [0f33a719f] 2017-06-15 12:30:02 -0400
Branch: REL9_6_STABLE [a0873fbab] 2017-06-15 12:30:02 -0400
Branch: REL9_5_STABLE [fd376afc9] 2017-06-15 12:30:02 -0400
-->
     <para>Исправление в документации описания процесса обновления резервных серверов с использованием <application>pg_upgrade</application> (Брюс Момджян)</para>

     <para>Ранее в документации говорилось, что нужно запустить/остановить ведущий сервер после запуска <application>pg_upgrade</application>, но до синхронизации резервных серверов. Однако эта последовательность небезопасна.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [459c64d32] 2017-07-26 17:24:16 -0400
Branch: REL9_6_STABLE [8c348765f] 2017-07-26 17:24:16 -0400
Branch: REL9_5_STABLE [0d4604ad6] 2017-07-26 17:24:16 -0400
Branch: REL9_4_STABLE [dfd091985] 2017-07-26 17:25:46 -0400
Branch: REL9_3_STABLE [2efbfb94b] 2017-07-26 17:24:16 -0400
-->
     <para>Исправление одновременной блокировки цепочки изменённых кортежей (Альваро Эррера)</para>

     <para>Когда цепочка изменённых кортежей блокируется одновременно несколькими сеансами в неконфликтующем режиме с использованием старого снимка, и все операции завершаются успешно, существовала возможность, что некоторые из них, несмотря на это, нарушатся (и заключат, что актуальной версии кортежа нет) из-за условий гонки. В частности, вследствие этого проверка внешнего ключа могла не увидеть кортеж, который определённо существует, но изменяется параллельной операцией.</para>
    </listitem>

    <listitem>
<!--
Author: Teodor Sigaev <teodor@sigaev.ru>
Branch: master [31b8db8e6] 2017-07-06 17:18:55 +0300
Branch: REL9_6_STABLE [42f62e4c9] 2017-07-06 17:19:44 +0300
Branch: REL9_5_STABLE [fb2d385e6] 2017-07-06 17:20:17 +0300
Branch: REL9_4_STABLE [b90e4ca3e] 2017-07-06 17:20:37 +0300
Branch: REL9_3_STABLE [f371cc9e9] 2017-07-06 17:20:56 +0300
-->
     <para>Устранение риска повреждения данных при замораживании кортежа, в котором XMAX равен идентификатору мультитранзакции с ровно одним ещё востребованным членом (Фёдор Сигаев)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [512f67c8d] 2017-07-12 13:24:16 -0400
Branch: REL9_6_STABLE [09c598898] 2017-07-12 13:24:16 -0400
Branch: REL9_5_STABLE [e7213fe2b] 2017-07-12 13:24:16 -0400
Branch: REL9_4_STABLE [e439bbe99] 2017-07-12 13:24:17 -0400
-->
     <para>Предупреждение целочисленного переполнения и краха при сортировке в памяти более чем одного миллиарда кортежей (Сергей Копосов)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [45e004fb4] 2017-07-10 11:00:09 -0400
Branch: REL9_6_STABLE [c0077f738] 2017-07-10 11:00:09 -0400
Branch: REL9_5_STABLE [afd1415a4] 2017-07-10 11:00:09 -0400
Branch: REL9_4_STABLE [bc0f76e7a] 2017-07-10 11:00:09 -0400
Branch: REL9_3_STABLE [59892b120] 2017-07-10 11:00:09 -0400
Branch: REL9_2_STABLE [a4a590ee7] 2017-07-10 11:00:09 -0400
-->
     <para>В Windows необходимо повторять попытки создания процесса в случае ошибки при резервировании диапазона адресов разделяемой памяти в новом процессе (Том Лейн, Амит Капила)</para>

     <para>Это должно устранить периодические сбои при запуске дочерних процессов, возможно, вызванные вмешательством антивирусных программ.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e2c8100e6] 2017-07-24 16:45:58 -0400
Branch: REL9_6_STABLE [51865a0a0] 2017-07-24 16:46:00 -0400
Branch: REL9_5_STABLE [5146ca352] 2017-07-24 16:45:46 -0400
Branch: REL9_4_STABLE [8ad35c7fa] 2017-07-24 16:45:46 -0400
Branch: REL9_3_STABLE [4ecee1192] 2017-07-24 16:45:47 -0400
Branch: REL9_2_STABLE [05a562d9c] 2017-07-24 16:45:47 -0400
-->
     <para>Устранение маловероятной возможности повреждения разделяемой хеш-таблицы предикатных блокировок в сборках для Windows (Томас Мунро, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [b93827c74] 2017-07-03 14:51:51 +0300
Branch: REL9_6_STABLE [f73382877] 2017-07-03 14:53:01 +0300
Branch: REL9_5_STABLE [90630a6ad] 2017-07-03 14:53:06 +0300
Branch: REL9_4_STABLE [fb63a0aa3] 2017-07-03 14:53:08 +0300
Branch: REL9_3_STABLE [543e00bc1] 2017-07-03 14:53:10 +0300
Branch: REL9_2_STABLE [fb1110085] 2017-07-03 14:53:12 +0300
-->
     <para>Предотвращение вывода в журнал сообщения о штатном закрытии SSL-соединения (поведение должно быть таким же, как и при сбросе соединения) (Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [97d3a0b09] 2017-08-04 11:07:10 -0400
Branch: REL9_6_STABLE [b798ea88a] 2017-08-04 11:07:10 -0400
Branch: REL9_5_STABLE [bebee333c] 2017-08-04 11:07:10 -0400
Branch: REL9_4_STABLE [8d05db3d8] 2017-08-04 11:07:10 -0400
Branch: REL9_3_STABLE [dda04b9dd] 2017-08-04 11:07:10 -0400
Branch: REL9_2_STABLE [c180d2eb7] 2017-08-04 11:07:11 -0400
-->
     <para>Запрещение передачи сеансовых билетов SSL клиентам (Том Лейн)</para>

     <para>Это исправление устраняет сбои при переподключении клиентов с реализациями SSL, в которых эти билеты используются.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f0256c774] 2017-06-27 18:47:57 -0400
Branch: REL9_6_STABLE [55968ed89] 2017-06-27 18:47:57 -0400
Branch: REL9_5_STABLE [d16e96fb2] 2017-06-27 18:47:57 -0400
Branch: REL9_4_STABLE [c2cb606a2] 2017-06-27 18:47:57 -0400
Branch: REL9_3_STABLE [9ce7f3919] 2017-06-27 18:47:57 -0400
Branch: REL9_2_STABLE [6ccab9242] 2017-06-27 18:47:57 -0400
Branch: master [99255d73c] 2017-06-28 12:30:16 -0400
Branch: REL9_6_STABLE [43c67e32f] 2017-06-28 12:30:16 -0400
Branch: REL9_5_STABLE [63f5db8ab] 2017-06-28 12:30:16 -0400
Branch: REL9_4_STABLE [e97b7372b] 2017-06-28 12:30:16 -0400
Branch: REL9_3_STABLE [cc154d9a0] 2017-06-28 12:30:16 -0400
Branch: REL9_2_STABLE [5e7447132] 2017-06-28 12:30:16 -0400
-->
     <para>Исправление кода, устанавливающего <xref linkend="guc-tcp-keepalives-idle"/> в Solaris (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ad1b5c842] 2017-06-26 16:17:05 -0400
Branch: REL9_6_STABLE [f6af9c749] 2017-06-26 16:17:05 -0400
Branch: REL9_5_STABLE [5a6b95cdf] 2017-06-26 16:17:06 -0400
Branch: REL9_4_STABLE [fc4da1fde] 2017-06-26 16:17:06 -0400
Branch: REL9_3_STABLE [456bf261d] 2017-06-26 16:17:06 -0400
Branch: REL9_2_STABLE [439b6363d] 2017-06-26 16:17:06 -0400
-->
     <para>Исправление дефекта в сборщике статистики, приводящего к потере запросных сообщений, выдаваемых сразу после перезапуска главного процесса (Том Лейн)</para>

     <para>Запросы статистики, выдаваемые в течение полсекунды после предыдущего отключения главного процесса, по сути терялись.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8b0b6303e] 2017-05-16 15:24:52 -0400
Branch: REL9_6_STABLE [34782a348] 2017-05-29 20:27:45 -0400
Branch: REL9_5_STABLE [82f8c21e0] 2017-05-29 20:27:45 -0400
Branch: REL9_4_STABLE [54676c72c] 2017-05-29 20:27:45 -0400
Branch: REL9_3_STABLE [4a3bb96ce] 2017-05-29 20:27:45 -0400
Branch: REL9_2_STABLE [364100e0b] 2017-05-29 20:27:45 -0400
-->
     <para>Размер приёмного буфера в сборщике статистики должен быть не меньше 100 Кбайт (Том Лейн)</para>

     <para>Это снижает риск потери данных статистики на старых платформах, где размер приёмного буфера по умолчанию меньше.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [fb886c153] 2017-06-21 14:14:45 -0700
Branch: REL9_6_STABLE [39e30cbc1] 2017-06-21 14:14:38 -0700
Branch: REL9_5_STABLE [7775ebaf0] 2017-06-21 14:14:29 -0700
Branch: REL9_4_STABLE [823a51ed3] 2017-06-21 14:14:21 -0700
Branch: REL9_3_STABLE [511d803ca] 2017-06-21 14:14:12 -0700
Branch: REL9_2_STABLE [81bf7b5b1] 2017-06-21 14:13:58 -0700
-->
     <para>Устранение возможности создания некорректного сегмента WAL при повышении резервного сервера сразу после того, как он обрабатывает запись <literal>XLOG_SWITCH</literal> (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [fca85f8ef] 2017-06-30 12:00:15 -0400
Branch: REL9_6_STABLE [e9d4aa594] 2017-06-30 12:00:03 -0400
Branch: REL9_5_STABLE [446914f6b] 2017-06-30 12:00:03 -0400
Branch: REL9_4_STABLE [5aa8db014] 2017-06-30 12:00:03 -0400
-->
     <para>Процесс <application>walsender</application> должен завершаться своевременно, когда клиент инициирует выключение (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [47fd420fb] 2017-06-05 19:18:15 -0700
Branch: REL9_6_STABLE [b3d5b6833] 2017-06-05 19:18:16 -0700
Branch: REL9_5_STABLE [e1319f64e] 2017-06-05 19:18:16 -0700
Branch: REL9_4_STABLE [f4e484dd0] 2017-06-05 19:18:16 -0700
Branch: master [6e1dd2773] 2017-06-05 19:18:16 -0700
Branch: REL9_6_STABLE [b8bd32a51] 2017-06-05 19:18:16 -0700
Branch: REL9_5_STABLE [641a60b02] 2017-06-05 19:18:16 -0700
Branch: REL9_4_STABLE [55d7027d5] 2017-06-05 19:18:16 -0700
Branch: REL9_3_STABLE [45d067d50] 2017-06-05 19:18:16 -0700
Branch: REL9_2_STABLE [133b1920c] 2017-06-05 19:18:16 -0700
-->
     <para>Исправление обработки сигналов <systemitem>SIGHUP</systemitem> и <systemitem>SIGUSR1</systemitem> в процессах walsender (Петр Желинек, Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [c6c333436] 2017-06-05 19:18:15 -0700
Branch: REL9_6_STABLE [862204aac] 2017-06-05 19:18:16 -0700
Branch: REL9_5_STABLE [50581f2e7] 2017-06-05 19:18:16 -0700
Branch: REL9_4_STABLE [1cdc0ab9c] 2017-06-05 19:18:16 -0700
-->
     <para>Предотвращение панического состояния, которое могут вызвать процессы walsender во время контрольной точки при выключении (Андрес Фройнд, Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e5d494d78] 2017-06-26 17:31:56 -0400
Branch: REL9_6_STABLE [a4d1ce095] 2017-06-26 17:31:56 -0400
Branch: REL9_5_STABLE [dc311b5bd] 2017-06-26 17:31:56 -0400
Branch: REL9_4_STABLE [47fec424c] 2017-06-26 17:31:56 -0400
Branch: REL9_3_STABLE [cb59949f6] 2017-06-26 17:31:56 -0400
Branch: REL9_2_STABLE [e96adaacd] 2017-06-26 17:31:56 -0400
-->
     <para>Устранение неоправданной паузы при перезапуске процессов <application>walreceiver</application>, возникающей вследствие условий гонки в главном процессе (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [3bdea167e] 2017-06-18 19:12:56 -0700
Branch: REL9_6_STABLE [810344436] 2017-06-18 19:13:15 -0700
Branch: REL9_5_STABLE [1ba1adf77] 2017-06-18 19:13:50 -0700
Branch: REL9_4_STABLE [a27c566c7] 2017-06-18 19:14:09 -0700
-->
     <para>Устранение утечки маленьких подтранзакций, оказывающихся на диске при логическом декодировании (Андрес Фройнд)</para>

     <para>В результате образовывались временные файлы, занимающие лишнее место на диске.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [524dbc143] 2017-05-13 15:06:40 -0700
Branch: REL9_6_STABLE [bd619fcfe] 2017-05-13 15:06:40 -0700
Branch: REL9_5_STABLE [fa9207c74] 2017-05-13 15:06:40 -0700
Branch: REL9_4_STABLE [2dca50b76] 2017-05-13 15:06:40 -0700
-->
     <para>Оптимизация операций, необходимых для получения снимков при создании слотов логического декодирования (Андрес Фройнд, Петр Желинек)</para>

     <para>Предыдущий алгоритм оказывался очень неэффективным на сервере со множеством открытых транзакций.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [955a684e0] 2017-05-13 14:21:00 -0700
Branch: REL9_6_STABLE [75784859c] 2017-05-13 14:21:00 -0700
Branch: REL9_5_STABLE [b64a68e36] 2017-05-13 14:21:00 -0700
Branch: REL9_4_STABLE [79abd23db] 2017-05-13 14:21:00 -0700
-->
     <para>Устранение условий гонки, при которых создание слотов логического декодирования могло откладываться на неопределённое время (Андрес Фройнд, Петр Желинек)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [50ee1c746] 2017-05-12 18:17:29 -0400
Branch: REL9_6_STABLE [b7a98b14c] 2017-05-12 18:17:29 -0400
Branch: REL9_5_STABLE [3569a9a73] 2017-05-12 18:17:29 -0400
Branch: REL9_4_STABLE [64417f8d3] 2017-05-12 18:17:29 -0400
Branch: master [8085a4f75] 2017-05-12 18:30:17 -0400
Branch: REL9_6_STABLE [f7d0a31ce] 2017-05-12 18:30:02 -0400
Branch: REL9_5_STABLE [8a7506e04] 2017-05-12 18:30:02 -0400
Branch: REL9_4_STABLE [ef7a6b3c9] 2017-05-12 18:30:02 -0400
Branch: master [2df5d4655] 2017-05-12 19:05:27 -0400
Branch: REL9_6_STABLE [d0755dc32] 2017-05-12 19:05:28 -0400
Branch: REL9_5_STABLE [e7955ac64] 2017-05-12 19:05:29 -0400
Branch: REL9_4_STABLE [32900700f] 2017-05-12 19:05:30 -0400
-->
     <para>Уменьшение издержек при обработке событий сброса системного кеша (Том Лейн)</para>

     <para>Это особенно полезно для логического декодирования, когда сброс кеша происходит часто.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [d8e6b84bd] 2017-06-19 15:33:41 -0400
Branch: REL9_6_STABLE [1f184426b] 2017-06-19 15:33:41 -0400
-->
     <para>Ликвидация некорректной эвристики, применяемой в некоторых случаях для оценки избирательности соединения при наличии ограничений внешнего ключа (Дэвид Роули)</para>

     <para>В некоторых случаях, когда существовал внешний ключ по нескольким столбцам, но он не точно соответствовал структуре условия соединения, планировщик использовал эвристическую оценку, которая оказывалась неподходящей. Теперь в таких случаях будет применяться та же логика, что была до версии 9.6.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b1cb32fb6] 2017-07-11 16:48:59 -0400
Branch: REL9_6_STABLE [123368061] 2017-07-11 16:48:59 -0400
Branch: REL9_5_STABLE [56076b88d] 2017-07-11 16:48:59 -0400
Branch: REL9_4_STABLE [a8358559e] 2017-07-11 16:48:59 -0400
Branch: REL9_3_STABLE [521fede16] 2017-07-11 16:48:59 -0400
Branch: REL9_2_STABLE [55204850a] 2017-07-11 16:48:59 -0400
Branch: master [bc2d716ad] 2017-07-12 18:00:04 -0400
Branch: REL9_6_STABLE [ff2d53722] 2017-07-12 18:00:04 -0400
Branch: REL9_5_STABLE [2346f1c10] 2017-07-12 18:00:04 -0400
Branch: REL9_4_STABLE [a2320b337] 2017-07-12 18:00:04 -0400
Branch: REL9_3_STABLE [aea1a3f0e] 2017-07-12 18:00:04 -0400
Branch: REL9_2_STABLE [75670ec37] 2017-07-12 18:00:04 -0400
-->
     <para>Исправление поведения в ситуациях, когда <command>INSERT</command> или <command>UPDATE</command> присваивает более одного элемента столбцу с типом домена на базе массива (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9c7dc8928] 2017-06-27 17:51:11 -0400
Branch: REL9_6_STABLE [3a7bd59c4] 2017-06-27 17:51:11 -0400
Branch: REL9_5_STABLE [9a2706572] 2017-06-27 17:51:11 -0400
Branch: REL9_4_STABLE [dc777f9db] 2017-06-27 17:51:11 -0400
Branch: REL9_3_STABLE [66dee28b4] 2017-06-27 17:51:11 -0400
-->
     <para>Разрешение использования оконных функций во вложенных <literal>SELECT</literal> в аргументах агрегатной функции (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [7086be6e3] 2017-07-24 15:57:24 -0400
Branch: REL9_6_STABLE [971faefc2] 2017-07-24 16:24:42 -0400
-->
     <para>Обеспечение корректного применения предложения <literal>CHECK OPTIONS</literal> для представления, когда нижележащая таблица является сторонней (Эцуро Фудзита)</para>

     <para>Ранее операция изменения полностью передавалась на сторонний сервер, и если для представления задавалось ограничение, оно не проверялось.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [94aced8cd] 2017-05-26 15:16:59 -0400
Branch: REL9_6_STABLE [acab87ece] 2017-05-26 15:16:59 -0400
Branch: REL9_5_STABLE [9ded51719] 2017-05-26 15:16:59 -0400
Branch: REL9_4_STABLE [8f62b388b] 2017-05-26 15:16:59 -0400
Branch: REL9_3_STABLE [525780c62] 2017-05-26 15:16:59 -0400
Branch: REL9_2_STABLE [da9165686] 2017-05-26 15:16:59 -0400
-->
     <para>Предупреждение конфликта имён с автоматически генерируемыми типами массивов при выполнении <command>ALTER ... RENAME</command> (Вик Фиринг)</para>

     <para>Ранее автоматически сгенерированный тип массива во избежание конфликта переименовывался при выполнении <command>CREATE</command>; данное исправление распространяет это поведение и на операции переименования.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [12590c5d3] 2017-05-15 11:33:44 -0400
Branch: REL9_6_STABLE [b35cce914] 2017-05-15 11:33:44 -0400
Branch: REL9_5_STABLE [53a1aa9f9] 2017-05-15 11:33:45 -0400
-->
     <para>Устранение потери указателя в <command>ALTER TABLE</command> когда для ограничения, принадлежащего таблице, добавлен комментарий (Дэвид Роули)</para>

     <para>При повторном применении комментария к воссозданному ограничению мог произойти сбой со странным сообщением или даже с аварийным завершением.</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [b37448122] 2017-08-03 20:34:45 -0400
Branch: REL9_6_STABLE [df04db041] 2017-08-03 20:49:07 -0400
Branch: REL9_5_STABLE [f2878a608] 2017-08-03 20:55:44 -0400
Branch: REL9_4_STABLE [e0446d06e] 2017-08-03 21:08:39 -0400
Branch: REL9_3_STABLE [b7d1bc820] 2017-08-03 21:29:36 -0400
Branch: REL9_2_STABLE [22eb38caa] 2017-08-03 21:42:46 -0400
-->
     <para>Добавление для команды <command>ALTER USER ... SET</command> всех вариантов синтаксиса, что принимает <command>ALTER ROLE ... SET</command> (Питер Эйзентраут)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [86705aa8c] 2017-08-03 13:24:48 -0400
Branch: REL9_6_STABLE [1f220c390] 2017-08-03 13:25:32 -0400
-->
     <para>Допущение для сторонней таблицы создания ограничений <literal>CHECK</literal> в изначально непроверенном состоянии (<literal>NOT VALID</literal>) (Амит Ланготе)</para>

     <para><command>CREATE TABLE</command> просто игнорирует указания <literal>NOT VALID</literal> для ограничений <literal>CHECK</literal>, исходя из того, что таблица должна быть пустой, и поэтому ограничение может сразу считаться проверенным. Но это неверно для команды <command>CREATE FOREIGN TABLE</command> — нет причин полагать, что нижележащая таблица пуста, и даже если это так, не мы должны решать, что ограничение проверенное. Поэтому такую <quote>оптимизацию</quote> для сторонних таблиц нужно исключить.</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [30681c830] 2017-06-16 11:33:12 +0300
Branch: REL9_6_STABLE [a9a5eb32b] 2017-06-16 11:39:45 +0300
Branch: REL9_5_STABLE [501e6f8b7] 2017-06-16 11:44:00 +0300
Branch: REL9_4_STABLE [6338b50b9] 2017-06-16 11:46:15 +0300
Branch: REL9_3_STABLE [b47e2f7a9] 2017-06-16 11:46:11 +0300
Branch: REL9_2_STABLE [ac93a78b0] 2017-06-16 11:46:26 +0300
-->
     <para>Обновление информации о зависимости при смене типа аргумента или возврата для функции ввода/вывода с <type>opaque</type> на целевой тип (Хейкки Линнакангас)</para>

     <para><command>CREATE TYPE</command> изменяет функции ввода/вывода, объявленные в давно устаревшем стиле, но информация о зависимости от этого типа не записывалась, в результате чего после команд <command>DROP TYPE</command> могли оставаться дефектные определения функций.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [34aebcf42] 2017-06-02 19:11:15 -0700
Branch: REL9_6_STABLE [8a7cd781e] 2017-06-02 19:11:23 -0700
-->
     <para>Допущение распараллеливания в плане запроса, когда <command>COPY</command> копирует данные из его результата (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [da11977de] 2017-07-12 22:06:13 +0300
Branch: REL9_6_STABLE [bbeec3c74] 2017-07-12 22:06:10 +0300
Branch: REL9_5_STABLE [209970ded] 2017-07-12 22:03:58 +0300
Branch: REL9_4_STABLE [852902822] 2017-07-12 22:04:03 +0300
Branch: REL9_3_STABLE [11854dee0] 2017-07-12 22:04:08 +0300
Branch: REL9_2_STABLE [40ba61b44] 2017-07-12 22:04:15 +0300
-->
     <para>Сокращение использования памяти при обработке командой <command>ANALYZE</command> столбцов <type>tsvector</type> (Хейкки Линнакангас)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [d761fe218] 2017-05-21 13:05:16 -0400
Branch: REL9_6_STABLE [c101d83a3] 2017-05-21 13:05:17 -0400
Branch: REL9_5_STABLE [5032f704e] 2017-05-21 13:05:17 -0400
Branch: REL9_4_STABLE [83f4e8f71] 2017-05-21 13:05:17 -0400
Branch: REL9_3_STABLE [b3c536bce] 2017-05-21 13:05:17 -0400
Branch: REL9_2_STABLE [798d2321e] 2017-05-21 13:05:17 -0400
-->
     <para>Устранение ненужной потери точности и небрежного округления при умножении и делении значений <type>money</type> на целые числа или числа с плавающей точкой (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9ae2661fe] 2017-05-24 15:28:34 -0400
Branch: REL9_6_STABLE [8527132e5] 2017-05-24 15:28:34 -0400
Branch: REL9_5_STABLE [2c5e3fab3] 2017-05-24 15:28:35 -0400
Branch: REL9_4_STABLE [a3043d363] 2017-05-24 15:28:35 -0400
Branch: REL9_3_STABLE [971a158e6] 2017-05-24 15:28:35 -0400
Branch: REL9_2_STABLE [a047270d5] 2017-05-24 15:28:35 -0400
-->
     <para>Уточнение проверок пробельных символов в функциях, разбирающих идентификаторы, например <function>regprocedurein()</function> (Том Лейн)</para>

     <para>В зависимости от используемой локали эти функции могли неправильно воспринимать фрагменты многобайтных символов как пробелы.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [bebe174bb] 2017-07-28 12:25:43 -0400
Branch: REL9_6_STABLE [30a5c8bfb] 2017-07-31 12:10:36 -0400
Branch: REL9_5_STABLE [99eea89db] 2017-07-31 12:10:36 -0400
Branch: REL9_4_STABLE [d48180ec8] 2017-07-31 12:10:36 -0400
Branch: REL9_3_STABLE [b92f17277] 2017-07-31 12:10:36 -0400
Branch: REL9_2_STABLE [b4b958251] 2017-07-31 12:10:36 -0400
Branch: master [3c163a7fc] 2017-07-28 14:25:28 -0400
Branch: REL9_6_STABLE [1e58c503e] 2017-07-31 12:38:35 -0400
Branch: REL9_5_STABLE [df52739ce] 2017-07-31 12:38:35 -0400
Branch: REL9_4_STABLE [9cbdc6894] 2017-07-31 12:38:35 -0400
Branch: REL9_3_STABLE [0d8f015e7] 2017-07-31 12:38:35 -0400
Branch: REL9_2_STABLE [456c7dff2] 2017-07-31 12:38:35 -0400
-->
     <para>Использование уместных символов <literal>#define</literal> из Perl при сборке <application>PL/Perl</application> (Ашутош Шарма, Том Лейн)</para>

     <para>Это предупреждает проблемы переносимости, обычно проявляющиеся в виде ошибок <quote>проверки совместимости</quote> в момент загрузки библиотеки при использовании последних версий Perl.</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [e6c33d594] 2017-06-07 14:01:46 +0300
Branch: REL9_6_STABLE [f44c609ea] 2017-06-07 14:04:54 +0300
Branch: REL9_5_STABLE [739cb7f8b] 2017-06-07 14:03:27 +0300
Branch: REL9_4_STABLE [1fe1fc449] 2017-06-07 14:04:49 +0300
Branch: REL9_3_STABLE [f2fa0c651] 2017-06-07 14:04:44 +0300
-->
     <para>Обеспечение в <application>libpq</application> корректного сброса состояния аутентификации GSS/SASL и SSPI после неудачной попытки подключения (Мишель Пакье)</para>

     <para>Ранее этот сброс не выполнялся и при переходе с SSL-соединения на не SSL ошибка GSS/SASL при попытке SSL-подключения мешала затем установить обычное подключение, без SSL. С SSPI этого не происходило, но имела место утечка памяти.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9485516ea] 2017-05-17 12:24:19 -0400
Branch: REL9_6_STABLE [bee9e8698] 2017-05-17 12:24:19 -0400
Branch: REL9_5_STABLE [49dfbb53c] 2017-05-17 12:24:19 -0400
Branch: REL9_4_STABLE [ff0e30512] 2017-05-17 12:24:19 -0400
Branch: REL9_3_STABLE [6bc710f6d] 2017-05-17 12:24:19 -0400
Branch: REL9_2_STABLE [07477130e] 2017-05-17 12:24:19 -0400
-->
     <para>В <application>psql</application> устранён сбой, возникающий, когда команда <command>COPY FROM STDIN</command> завершалась вводом сигнала EOF с клавиатуры, а затем следовала ещё одна попытка выполнить <command>COPY FROM STDIN</command> (Томас Мунро)</para>

     <para>Это некорректное поведение наблюдалось в системах, основанных на BSD, (включая macOS), но не в других.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3eb9a5e7c] 2017-08-03 17:36:39 -0400
Branch: REL9_6_STABLE [3d7632829] 2017-08-03 17:36:41 -0400
Branch: REL9_5_STABLE [65048cf23] 2017-08-03 17:36:42 -0400
Branch: REL9_4_STABLE [b93217653] 2017-08-03 17:36:43 -0400
Branch: REL9_3_STABLE [035bb8222] 2017-08-03 17:36:23 -0400
-->
     <para>Исправление программ <application>pg_dump</application> и <application>pg_restore</application>, чтобы команды <command>REFRESH MATERIALIZED VIEW</command> выдавались в конце (Том Лейн)</para>

     <para>Это предотвращает ошибки при выгрузке/восстановлении данных, когда материализованное представление ссылается на таблицы, принадлежащие другому пользователю.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [4d57e8381] 2017-08-02 18:26:59 -0400
Branch: REL9_6_STABLE [060393f2a] 2017-08-02 18:26:58 -0400
Branch: REL9_5_STABLE [f3142c027] 2017-08-02 18:26:58 -0400
Branch: REL9_4_STABLE [330e68734] 2017-08-02 18:26:57 -0400
Branch: master [9a3b5d3ad] 2017-08-03 14:54:28 -0400
Branch: REL9_6_STABLE [611840074] 2017-08-03 14:55:18 -0400
Branch: REL9_5_STABLE [12f1e523a] 2017-08-03 14:55:17 -0400
Branch: REL9_4_STABLE [69ad12b58] 2017-08-03 14:55:17 -0400
-->
     <para>Улучшение вывода в <application>pg_dump</application>/<application>pg_restore</application> сообщений об ошибках, возникающих в <application>zlib</application> (Владимир Кунщиков, Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [93f039b49] 2017-07-22 20:20:09 -0400
Branch: REL9_6_STABLE [82ebda7ff] 2017-07-22 20:20:09 -0400
Branch: REL9_5_STABLE [7debd9f79] 2017-07-22 20:20:09 -0400
Branch: REL9_4_STABLE [502ead3d6] 2017-07-22 20:20:10 -0400
Branch: REL9_3_STABLE [68a22bc69] 2017-07-22 20:20:10 -0400
-->
     <para>Исправление поведения <application>pg_dump</application> с ключом <option>--clean</option>, чтобы событийные триггеры удалялись должным образом (Том Лейн)</para>

     <para>Теперь также правильно назначаются владельцы событийных триггеров; ранее после запуска скрипта восстановления такие триггеры оказывались принадлежащими суперпользователю.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [4500edc7e] 2017-06-28 10:33:57 -0400
Branch: REL9_6_STABLE [a2de017b3] 2017-06-28 10:34:01 -0400
-->
     <para>Исправление поведения <application>pg_dump</application> с ключом <option>--clean</option>, чтобы существование схемы <literal>public</literal> не требовалось (Стивен Фрост)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0461b66e3] 2017-05-26 12:51:05 -0400
Branch: REL9_6_STABLE [5886c7d58] 2017-05-26 12:51:05 -0400
Branch: REL9_5_STABLE [41c4eb5ec] 2017-05-26 12:51:05 -0400
Branch: REL9_4_STABLE [1cfc9dc75] 2017-05-26 12:51:05 -0400
Branch: REL9_3_STABLE [a561254e4] 2017-05-26 12:51:05 -0400
Branch: REL9_2_STABLE [f62e1eff5] 2017-05-26 12:51:06 -0400
-->
     <para>Исправление дефекта в <application>pg_dump</application>, когда для пустого класса операторов выдавался некорректный SQL (Даниэль Густафсон)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [bd61d5a19] 2017-06-19 11:02:45 -0400
Branch: REL9_6_STABLE [3ef40dcec] 2017-06-19 11:03:02 -0400
Branch: REL9_5_STABLE [4fc274dd8] 2017-06-19 11:03:07 -0400
Branch: REL9_4_STABLE [d063f972d] 2017-06-19 11:03:11 -0400
Branch: REL9_3_STABLE [2943c04f7] 2017-06-19 11:03:16 -0400
Branch: REL9_2_STABLE [c10cbf77a] 2017-06-19 11:03:21 -0400
-->
     <para>Исправление вывода <application>pg_dump</application> в stdout на платформе Windows (Кунтал Гхош)</para>

     <para>Сжатые данные выгрузки в текстовом виде при выводе в stdout оказывались испорченными из-за того, что дескриптор файла не переводился в двоичный режим.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b4af9e3f3] 2017-07-24 15:16:31 -0400
Branch: REL9_6_STABLE [3a07ba128] 2017-07-24 15:16:31 -0400
Branch: REL9_5_STABLE [f579580be] 2017-07-24 15:16:31 -0400
Branch: REL9_4_STABLE [f0f255a34] 2017-07-24 15:16:31 -0400
Branch: REL9_3_STABLE [b6d640047] 2017-07-24 15:16:31 -0400
Branch: REL9_2_STABLE [d9874fde8] 2017-07-24 15:16:31 -0400
-->
     <para>Исправление вывода <function>pg_get_ruledef()</function> для правила <literal>ON SELECT</literal>, связанного с представлением, в котором переименовывались столбцы (Том Лейн)</para>

     <para>В некоторых особых случаях <application>pg_dump</application> использует <function>pg_get_ruledef()</function> для выгрузки представлений, так что эта ошибка могла приводить к сбоям при выгрузке/загрузке.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [eb145fdfe] 2017-07-20 11:29:36 -0400
Branch: REL9_6_STABLE [41ada8377] 2017-07-20 11:29:36 -0400
Branch: REL9_5_STABLE [c2bbec9f2] 2017-07-20 11:29:36 -0400
Branch: REL9_4_STABLE [6ab4a1136] 2017-07-20 11:29:36 -0400
Branch: REL9_3_STABLE [e947838ae] 2017-07-20 11:29:36 -0400
-->
     <para>Исправление выгрузки внешних соединений с пустыми ограничениями, получающихся, например, в результате <literal>NATURAL LEFT JOIN</literal> без общих столбцов (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a3ca72ae9] 2017-07-13 19:25:03 -0400
Branch: REL9_6_STABLE [3b0c2dbed] 2017-07-13 19:24:44 -0400
Branch: REL9_5_STABLE [3fbebd781] 2017-07-13 19:24:44 -0400
Branch: REL9_4_STABLE [26d867875] 2017-07-13 19:24:44 -0400
Branch: REL9_3_STABLE [0ecc407d9] 2017-07-13 19:24:44 -0400
Branch: REL9_2_STABLE [bccfb1776] 2017-07-13 19:24:44 -0400
-->
     <para>Исправление выгрузки выражений с функциями в предложении <literal>FROM</literal> в случаях, когда эти выражения не преобразуются в нечто, напоминающее вызов функции (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [8046465c2] 2017-07-14 16:02:53 +0300
Branch: REL9_6_STABLE [cedd25ae8] 2017-07-14 16:03:05 +0300
Branch: REL9_5_STABLE [f20d58a6f] 2017-07-14 16:03:12 +0300
Branch: REL9_4_STABLE [240299806] 2017-07-14 16:03:16 +0300
Branch: REL9_3_STABLE [f3633689f] 2017-07-14 16:03:23 +0300
Branch: REL9_2_STABLE [4b994a96c] 2017-07-14 16:03:27 +0300
-->
     <para>Исправление вывода <application>pg_basebackup</application> в stdout на платформе Windows (Харибабу Комми)</para>

     <para>Архивируемые данные при выводе в stdout оказывались испорченными из-за того, что дескриптор файла не переводился в двоичный режим.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [a46fe6e8b] 2017-07-21 14:25:36 -0400
Branch: REL9_6_STABLE [73fbf3d3d] 2017-07-21 22:04:55 -0400
Branch: REL9_5_STABLE [ed367be64] 2017-07-21 22:05:07 -0400
-->
     <para>Исправление <application>pg_rewind</application> для корректной работы с файлами больше 2 ГБ (Кунтал Гхош, Мишель Пакье)</para>

     <para>Обычно такие файлы в каталогах данных <productname>PostgreSQL</productname> не образуются, но в некоторых случаях они могут появиться.</para>
    </listitem>

    <listitem>
<!--
Author: Bruce Momjian <bruce@momjian.us>
Branch: master [b710248dd] 2017-06-20 13:20:10 -0400
Branch: REL9_6_STABLE [0efdbd323] 2017-06-20 13:20:02 -0400
Branch: REL9_5_STABLE [f4f867bda] 2017-06-20 13:20:02 -0400
Branch: REL9_4_STABLE [a0e854881] 2017-06-20 13:20:02 -0400
Branch: REL9_3_STABLE [5c890645d] 2017-06-20 13:20:02 -0400
Branch: REL9_2_STABLE [65beccae5] 2017-06-20 13:20:02 -0400
-->
     <para>Исправление <application>pg_upgrade</application>, чтобы в конечной записи в WAL не оказалось <xref linkend="guc-wal-level"/> = <literal>minimum</literal> (Брюс Момджян)</para>

     <para>Это могло препятствовать переподключению обновлённых резервных серверов.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [c25ed2006] 2017-06-05 16:10:07 -0700
Branch: REL9_6_STABLE [d3ca4b4b4] 2017-06-05 16:10:07 -0700
Branch: REL9_5_STABLE [25653c171] 2017-06-05 16:10:07 -0700
-->
     <para>Исправление в <application>pg_xlogdump</application> вычисления длины записи WAL (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8bf58c0d9] 2017-07-21 12:51:38 -0400
Branch: REL9_6_STABLE [d86a2b7b5] 2017-07-21 12:51:38 -0400
Branch: REL9_5_STABLE [72318eaed] 2017-07-21 12:51:38 -0400
Branch: REL9_4_STABLE [cb2b1cac0] 2017-07-21 12:51:38 -0400
Branch: REL9_3_STABLE [69711415e] 2017-07-21 12:51:38 -0400
Branch: master [88f48b57f] 2017-07-21 14:20:43 -0400
Branch: REL9_6_STABLE [0d503dd1f] 2017-07-21 14:20:43 -0400
Branch: REL9_5_STABLE [90877d28e] 2017-07-21 14:20:43 -0400
Branch: REL9_4_STABLE [a648fc70a] 2017-07-21 14:20:43 -0400
Branch: REL9_3_STABLE [6d9de660d] 2017-07-21 14:20:43 -0400
-->
     <para>В <filename>postgres_fdw</filename> соединения к удалённым серверам должны устанавливаться заново после команд <command>ALTER SERVER</command> и <command>ALTER USER MAPPING</command> (Кётаро Хоригути)</para>

     <para>Благодаря этому изменения параметров, затрагивающие свойства соединения, вступят в силу своевременно.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [ae9bfc5d6] 2017-06-07 15:14:55 -0400
Branch: REL9_6_STABLE [fd849956c] 2017-06-07 15:24:22 -0400
Branch: REL9_5_STABLE [b7665f079] 2017-06-07 15:33:32 -0400
Branch: REL9_4_STABLE [c02c450cf] 2017-06-07 15:40:35 -0400
Branch: REL9_3_STABLE [fc267a0c3] 2017-06-07 15:41:05 -0400
-->
     <para>В <filename>postgres_fdw</filename> реализована отмена команд управления удалёнными транзакциями (Роберт Хаас, Рафия Сабих)</para>

     <para>Это изменение позволяет быстрее прервать ожидание неотвечающего удалённого сервера в большем количестве случаев, чем раньше.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [596a7c8df] 2017-05-11 14:51:21 -0400
Branch: REL9_6_STABLE [128e133cc] 2017-05-11 14:51:33 -0400
Branch: REL9_5_STABLE [6f2fe2468] 2017-05-11 14:51:38 -0400
Branch: REL9_4_STABLE [5c633f76b] 2017-05-11 14:51:46 -0400
-->
     <para>Увеличение <literal>MAX_SYSCACHE_CALLBACKS</literal> для выделения дополнительного места расширениям (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e9a3c047a] 2017-06-01 13:32:55 -0400
Branch: REL9_6_STABLE [8d9b4fe01] 2017-06-01 13:32:56 -0400
Branch: REL9_5_STABLE [68938ab8e] 2017-06-01 13:32:56 -0400
Branch: REL9_4_STABLE [894ce0e97] 2017-06-01 13:32:56 -0400
Branch: REL9_3_STABLE [cee7238de] 2017-06-01 13:32:56 -0400
Branch: REL9_2_STABLE [a378b9bc2] 2017-06-01 13:32:56 -0400
-->
     <para>При сборке разделяемых библиотек с gcc всегда должен передаваться ключ <option>-fPIC</option>, а не <option>-fpic</option> (Том Лейн)</para>

     <para>Это позволяет поддерживать библиотеки расширений большего размера на тех платформах, где эти ключи не равнозначны.</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [614350a3a] 2017-06-05 14:24:42 -0400
Branch: REL9_6_STABLE [b64ff9c5a] 2017-06-05 14:27:59 -0400
Branch: REL9_5_STABLE [0fde390f6] 2017-06-05 14:28:13 -0400
Branch: REL9_4_STABLE [307fc49d5] 2017-06-05 14:28:26 -0400
Branch: REL9_3_STABLE [fe39a086d] 2017-06-05 14:28:44 -0400
Branch: REL9_2_STABLE [545dc4d21] 2017-06-05 14:29:00 -0400
Branch: master [2e02136fe] 2017-06-05 20:38:46 -0400
Branch: REL9_6_STABLE [ec504aff7] 2017-06-05 20:39:53 -0400
Branch: REL9_5_STABLE [b2482ab83] 2017-06-05 20:40:11 -0400
Branch: REL9_4_STABLE [6da999635] 2017-06-05 20:40:27 -0400
Branch: REL9_3_STABLE [da30fa603] 2017-06-05 20:40:47 -0400
Branch: REL9_2_STABLE [f964a7c5a] 2017-06-05 20:41:01 -0400
-->
     <para>Для сборок MSVC реализована обработка ситуации, когда библиотека <application>openssl</application> находится не в подкаталоге <filename>VC</filename> (Эндрю Дунстан)</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [b757e01f6] 2017-05-12 10:21:13 -0400
Branch: REL9_6_STABLE [69ce3ead1] 2017-05-12 10:22:20 -0400
Branch: REL9_5_STABLE [8ec82ee6a] 2017-05-12 10:23:39 -0400
Branch: REL9_4_STABLE [616dd9978] 2017-05-12 10:24:00 -0400
Branch: REL9_3_STABLE [2c7d2114b] 2017-05-12 10:24:16 -0400
Branch: REL9_2_STABLE [614f83c12] 2017-05-12 10:24:36 -0400
-->
     <para>Для сборок MSVC добавлен нужный путь для заголовочных файлов <application>libxml2</application> (Эндрю Дунстан)</para>

     <para>Это устраняет прежнюю необходимость перемещения файлов в стандартной инсталляции <application>libxml2</application> в Windows.</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [71ad8000d] 2017-07-23 23:53:27 -0700
Branch: REL9_6_STABLE [bcc2c3b45] 2017-07-23 23:53:37 -0700
Branch: REL9_5_STABLE [bef96e57e] 2017-07-23 23:53:41 -0700
Branch: REL9_4_STABLE [0328bd1ef] 2017-07-23 23:53:46 -0700
Branch: REL9_3_STABLE [9842c1b55] 2017-07-23 23:53:51 -0700
Branch: REL9_2_STABLE [4885e5c88] 2017-07-23 23:53:55 -0700
-->
     <para>Сборки MSVC должны распознавать библиотеку Tcl с именем <filename>tcl86.lib</filename> (Ной Миш)</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [56b6ef893] 2017-05-12 11:11:49 -0400
Branch: REL9_6_STABLE [cb701af78] 2017-05-12 11:21:20 -0400
Branch: REL9_5_STABLE [054a897c4] 2017-05-12 11:26:40 -0400
Branch: REL9_4_STABLE [d39d968f5] 2017-05-12 11:27:56 -0400
Branch: master [93b7d9731] 2017-06-10 10:19:06 -0400
Branch: REL9_6_STABLE [3c017a545] 2017-06-10 10:22:14 -0400
Branch: REL9_5_STABLE [11aa362c8] 2017-06-10 10:23:21 -0400
Branch: REL9_4_STABLE [6b2a0b475] 2017-06-10 10:23:43 -0400
Branch: master [fd2487e49] 2017-07-16 11:24:29 -0400
Branch: REL9_6_STABLE [b4a1d69ed] 2017-07-16 11:27:00 -0400
Branch: REL9_5_STABLE [7eb4124da] 2017-07-16 11:27:07 -0400
Branch: REL9_4_STABLE [9c3f502b4] 2017-07-16 11:27:15 -0400
-->
     <para>В сборках MSVC должны учитываться флаги в параметре <literal>PROVE_FLAGS</literal>, заданном в командной строке <filename>vcregress.pl</filename> (Эндрю Дунстан)</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-6-3">
  <title>Выпуск 9.6.3</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-05-11</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.6.2. За информацией о нововведениях версии 9.6 обратитесь к <xref remap="3" linkend="release-9-6"/>.</para>

  <sect2>
   <title>Миграция на версию 9.6.3</title>

   <para>Если используется версия 9.6.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если вы используете сторонние серверы данных, на которых для проверки подлинности применяются пароли, прочитайте ниже первую запись в списке изменений.</para>

   <para>А если вы используете сторонние средства репликации, основанные на <quote>логическом декодировании</quote>, обратите внимание на четвёртую запись в списке изменений.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.6.2, см. <xref remap="4" linkend="release-9-6-2"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [3eefc5105] 2017-05-08 07:24:24 -0700
Branch: REL9_6_STABLE [c928addfc] 2017-05-08 07:24:27 -0700
Branch: REL9_5_STABLE [db2158108] 2017-05-08 07:24:27 -0700
Branch: REL9_4_STABLE [b2423f0fa] 2017-05-08 07:24:27 -0700
Branch: REL9_3_STABLE [b5b124046] 2017-05-08 07:24:28 -0700
Branch: REL9_2_STABLE [99cbb0bd9] 2017-05-08 07:24:28 -0700
-->
     <para>Ограничение видимости <structname>pg_user_mappings</structname>.<structfield>umoptions</structfield> для защиты паролей, сохранённых в свойствах сопоставлений пользователей (Мишель Пакье, Фейке Стинберген)</para>

     <para>Предыдущая реализация позволяла владельцу объекта стороннего сервера или любому, кто получил право <literal>USAGE</literal>, видеть свойства всех сопоставлений, связанных с этим сервером. В том числе это могли быть и пароли других пользователей. Теперь определение данного представления изменено для соответствия поведению <structname>information_schema.user_mapping_options</structname>, так что эти свойства может прочитать только собственно пользователь сопоставления либо, если это сопоставление роли <literal>PUBLIC</literal>, владелец сервера, либо суперпользователь. (CVE-2017-7486)</para>

     <para>Само по себе это исправление корректирует поведение только в новых базах данных, создаваемых initdb. Если вы хотите применить это исправление к существующей базе данных, следуйте исправленной процедуре в списке изменений, относящейся к CVE-2017-7547, в <xref remap="6" linkend="release-9-6-4"/>.</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [e2d4ef8de] 2017-05-08 09:26:32 -0400
Branch: REL9_6_STABLE [c33c42362] 2017-05-08 09:18:57 -0400
Branch: REL9_5_STABLE [d45cd7c0e] 2017-05-08 09:19:07 -0400
Branch: REL9_4_STABLE [3e5ea1f9b] 2017-05-08 09:19:15 -0400
Branch: REL9_3_STABLE [4f1b2089a] 2017-05-08 09:19:23 -0400
Branch: REL9_2_STABLE [d035c1b97] 2017-05-08 09:19:42 -0400
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [b6576e591] 2017-05-08 11:18:40 -0400
Branch: REL9_6_STABLE [cad159432] 2017-05-08 11:18:54 -0400
Branch: REL9_5_STABLE [a199582ef] 2017-05-08 11:19:00 -0400
Branch: REL9_4_STABLE [d3f3f9568] 2017-05-08 11:19:04 -0400
Branch: REL9_3_STABLE [703da1795] 2017-05-08 11:19:08 -0400
-->
     <para>Предотвращение утечки статистической информации через негерметичные операторы (Питер Эйзентраут)</para>

     <para>Некоторые функции оценки избирательности в планировщике применяют пользовательские операторы к значениям, получаемым из <structname>pg_statistic</structname>, например, к наиболее частым значениям и элементам гистограммы. Это происходит до проверки прав доступа к таблице, так что злонамеренный пользователь может воспользоваться этим и получить подобные значения из столбцов таблицы, чтение которых ему запрещено. Для устранения этой уязвимости следует переходить к общим оценкам, если функция, реализующая оператор, не считается герметичной и вызывающий её пользователь не имеет права на чтение столбца, статистика по которому требуется планировщику. На практике в большинстве случаев одно из этих условий выполняется. (CVE-2017-7484)</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [0170b10df] 2017-05-08 07:24:24 -0700
Branch: REL9_6_STABLE [aafbd1df9] 2017-05-08 07:24:27 -0700
Branch: REL9_5_STABLE [96d745492] 2017-05-08 07:24:27 -0700
Branch: REL9_4_STABLE [ed36c1fe1] 2017-05-08 07:24:27 -0700
Branch: REL9_3_STABLE [3eab81127] 2017-05-08 07:24:28 -0700
-->
     <para>Восстановление восприятия библиотекой <application>libpq</application> переменной окружения <envar>PGREQUIRESSL</envar> (Даниэль Густафсон)</para>

     <para>Поддержка этой переменной окружения была непреднамеренно ликвидирована в <productname>PostgreSQL</productname> 9.3, но в документации она осталась. Это создало угрозу безопасности, так как пользователи могли рассчитывать на то, что она будет требовать SSL-шифрования подключений, но на самом деле этого не происходило. Теперь эта переменная воспринимается как и раньше, но имеет меньший приоритет, чем <envar>PGSSLMODE</envar>, во избежание нарушения конфигураций, работающих корректно с версиями после 9.3. (CVE-2017-7485)</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [2bef06d51] 2017-04-27 13:13:36 -0700
Branch: REL9_6_STABLE [28afff347] 2017-04-27 13:13:36 -0700
Branch: REL9_5_STABLE [47f896b5c] 2017-04-27 13:13:37 -0700
Branch: REL9_4_STABLE [5da646138] 2017-04-27 13:13:37 -0700
Branch: master [56e19d938] 2017-04-27 15:29:15 -0700
Branch: REL9_6_STABLE [29e8c881d] 2017-04-27 15:29:33 -0700
Branch: REL9_5_STABLE [54270d7eb] 2017-04-27 15:29:43 -0700
Branch: REL9_4_STABLE [b6ecf26cc] 2017-04-27 15:29:52 -0700
-->
     <para>Исправление потенциально некорректного начального снимка при логическом декодировании (Петр Желинек, Андрес Фройнд)</para>

     <para>Изначальный снимок, создаваемый для слота репликации с логическим декодированием, мог быть некорректным. В результате сторонние средства, использующие логическое декодирование, могли получать неполные/несогласованные начальные данные. Вероятность такого сбоя увеличивалась, если при создании слота исходный сервер был загружен либо уже существовал другой логический слот.</para>

     <para>Если вы используете средство репликации, основанное на логическом декодировании, и копировали непустой набор данных в начале репликации, имеет смысл пересоздать реплику после установления этого обновления либо сверить содержимое базы с исходным сервером.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [87f998203] 2017-03-14 11:51:11 -0400
Branch: REL9_6_STABLE [36fcb36b8] 2017-03-14 11:52:27 -0400
Branch: REL9_5_STABLE [c17a3f57e] 2017-03-14 12:03:29 -0400
Branch: REL9_4_STABLE [bbd5e600f] 2017-03-14 12:06:36 -0400
Branch: REL9_3_STABLE [6bd7816e7] 2017-03-14 12:08:14 -0400
Branch: REL9_2_STABLE [b2ae1d6c4] 2017-03-14 12:10:36 -0400
-->
     <para>Исправление потенциального повреждения <quote>слоёв инициализации</quote> нежурналируемых индексов (Роберт Хаас, Мишель Пакье)</para>

     <para>Это повреждение могло приводить к переходу нежурналируемого индекса в ошибочное состояние после сбоя и перезапуска сервера. Устранить возникшую проблему можно было, только удалив и перестроив индекс.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0874d4f3e] 2017-04-23 13:11:06 -0400
Branch: REL9_6_STABLE [f5885488d] 2017-04-23 13:11:08 -0400
Branch: REL9_5_STABLE [a66e01bbc] 2017-04-23 13:10:57 -0400
Branch: REL9_4_STABLE [2e14541c4] 2017-04-23 13:10:57 -0400
Branch: REL9_3_STABLE [856580873] 2017-04-23 13:10:57 -0400
Branch: REL9_2_STABLE [952e33b05] 2017-04-23 13:10:58 -0400
-->
     <para>Исправление ошибочного восстановления записей <structname>pg_subtrans</structname> при воспроизведении резервным сервером подготовленных, но не зафиксированных двухфазных транзакций (Том Лейн)</para>

     <para>В большинстве случаев это не имело никаких болезненных последствий, но в особых ситуациях могло приводить к зацикливанию ссылок в <structname>pg_subtrans</structname>, что, в свою очередь, провоцировало бесконечные циклы в запросах, обращающимся к строкам, изменённым двухфазной транзакцией.</para>
    </listitem>

    <listitem>
<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [1d04a59be] 2017-02-22 03:11:58 +0900
Branch: REL9_6_STABLE [9fab155c6] 2017-02-22 08:29:32 +0900
Branch: REL9_5_STABLE [feb659cce] 2017-02-22 08:29:44 +0900
Branch: REL9_4_STABLE [a3eb715a3] 2017-02-22 08:29:57 +0900
-->
     <para>Предотвращение возможного сбоя в <application>walsender</application> при ошибке инициализации буфера строки (Стас Кельвич, Фудзии Масао)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [3f074845a] 2017-05-04 13:59:39 -0400
Branch: REL9_6_STABLE [855f0e924] 2017-05-04 13:59:13 -0400
Branch: REL9_5_STABLE [6cfb428b0] 2017-05-04 13:59:13 -0400
-->
     <para>Предупреждение возможного сбоя при повторном сканировании индекса GiST с использованием только индекса и поиском ближайших соседей (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [893902085] 2017-04-24 13:00:30 -0400
Branch: REL9_6_STABLE [dfa4baf91] 2017-04-24 13:00:23 -0400
Branch: master [aa1351f1e] 2017-04-26 16:17:34 -0400
Branch: REL9_6_STABLE [e880df25e] 2017-04-26 16:17:29 -0400
-->
     <para>Предотвращение задержек при запуске процессом postmaster нескольких параллельных рабочих процессов (Том Лейн)</para>

     <para>Ранее была возможна значительная задержка (до нескольких десятков секунд), когда запросу требовалось более одного рабочего процесса, либо когда несколько запросов обращались за рабочими процессами одновременно. На большинстве платформ это происходило при редком стечении обстоятельств, но на некоторых наблюдалось регулярно.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4fe04244b] 2017-04-24 12:16:58 -0400
Branch: REL9_6_STABLE [63f64d282] 2017-04-24 12:16:58 -0400
Branch: REL9_5_STABLE [dba1f310a] 2017-04-24 12:16:58 -0400
Branch: REL9_4_STABLE [436b560b8] 2017-04-24 12:16:58 -0400
-->
     <para>Исправление поведения postmaster при обработке сбоя <function>fork()</function> для фонового рабочего процесса (Том Лейн)</para>

     <para>Ранее postmaster модифицировал элементы своего состояния так, как будто процесс был запущен успешно, что впоследствии приводило к замешательству.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [89deca582] 2017-04-07 12:18:38 -0400
Branch: REL9_6_STABLE [c0a493e17] 2017-04-07 12:18:38 -0400
-->
     <para>Исправление потенциальной ошибки <quote>no relation entry for relid 0</quote> (нет записи отношения для relid 0) при планировании вложенных операций с множествами (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [1ea60ad60] 2017-03-15 12:28:54 -0400
Branch: REL9_6_STABLE [5feb78ae8] 2017-03-15 12:41:00 -0400
Branch: master [f120b614e] 2017-03-24 12:30:39 -0400
Branch: REL9_6_STABLE [5674a258f] 2017-03-24 12:39:07 -0400
Branch: master [7d8f6986b] 2017-03-31 21:01:20 -0400
Branch: REL9_6_STABLE [fb1879c37] 2017-03-31 21:10:30 -0400
-->
     <para>Устранение разнообразных мелких дефектов в планировании параллельных запросов (Роберт Хаас)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [76799fc89] 2017-04-17 15:29:15 -0400
Branch: REL9_6_STABLE [6c73b390b] 2017-04-17 15:29:00 -0400
Branch: REL9_5_STABLE [6f0f98bb0] 2017-04-17 15:29:00 -0400
-->
     <para>Исключение применения оптимизации <quote>физического целевого списка</quote> к нестандартным сканированиям (Дмитрий Иванов, Том Лейн)</para>

     <para>Эта оптимизация предполагала, что получить все столбцы кортежа можно недорого, что действительно верно для обычных кортежей Postgres, но с нестандартными провайдерами сканирования это может быть не так.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [aa5d3c0b3] 2017-05-06 21:46:35 -0400
Branch: REL9_6_STABLE [92b15224b] 2017-05-06 21:46:41 -0400
Branch: REL9_5_STABLE [d617c7629] 2017-05-06 21:46:56 -0400
-->
     <para>Использование правильного подвыражения при применении политики защиты на уровне строк <literal>FOR ALL</literal> (Стивен Фрост)</para>

     <para>В некоторых случаях применялось ограничение <literal>WITH CHECK</literal>, хотя более уместным было бы ограничение <literal>USING</literal>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9209e0760] 2017-05-02 18:06:09 -0400
Branch: REL9_6_STABLE [d56b8b41b] 2017-05-02 18:05:54 -0400
Branch: REL9_5_STABLE [d0d3a57bf] 2017-05-02 18:05:54 -0400
Branch: REL9_4_STABLE [c6b3d0706] 2017-05-02 18:05:54 -0400
Branch: REL9_3_STABLE [062824edd] 2017-05-02 18:05:54 -0400
Branch: REL9_2_STABLE [c9d6c564f] 2017-05-02 18:05:54 -0400
-->
     <para>Обеспечение видимости результатов непосредственно предшествующих DDL при разборе запросов в скриптах расширений (Жульен Рухо, Том Лейн)</para>

     <para>Из-за того, что кеш между командами в скрипте расширения не сбрасывался, запрос к данным мог не наблюдать эффектов непосредственно предшествующего ему изменения каталога, например результатов <command>ALTER TABLE ... RENAME</command>.</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [f30f34e58] 2017-02-12 16:03:41 -0500
Branch: REL9_6_STABLE [4d43d5d35] 2017-02-12 16:03:46 -0500
Branch: REL9_5_STABLE [660e457f5] 2017-02-12 16:03:54 -0500
Branch: REL9_4_STABLE [804aad8ff] 2017-02-12 16:04:09 -0500
Branch: REL9_3_STABLE [b167d57d5] 2017-02-12 16:05:12 -0500
Branch: REL9_2_STABLE [27a8c8033] 2017-02-12 16:05:23 -0500
-->
     <para>Ликвидация проверки прав доступа к табличному пространству при перестроении существующего индекса командой <command>ALTER TABLE ... ALTER COLUMN TYPE</command> (Ной Миш)</para>

     <para>Это команда выдавала ошибку, если вызывающий пользователь не имел права <literal>CREATE</literal> для табличного пространства, содержащего индекс. Такое поведение малополезно, так что стоит исключить эту проверку и разрешить перестраивать индекс там, где он находился.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [6a4dda44e] 2017-04-28 14:48:38 -0400
Branch: REL9_6_STABLE [8a9c83bfa] 2017-04-28 14:48:44 -0400
Branch: REL9_5_STABLE [a0291c330] 2017-04-28 14:50:36 -0400
Branch: REL9_4_STABLE [93a07a68e] 2017-04-28 14:52:20 -0400
Branch: REL9_3_STABLE [954744f7a] 2017-04-28 14:53:56 -0400
Branch: REL9_2_STABLE [f60f0c8fe] 2017-04-28 14:55:42 -0400
-->
     <para>Предотвращение рекурсивного обращения команды <command>ALTER TABLE ... VALIDATE CONSTRAINT</command> к дочерним таблицам когда ограничение помечено как <literal>NO INHERIT</literal> (Амит Ланготе)</para>

     <para>Это предупреждает нежелательные сбои типа <quote>constraint does not exist</quote> (ограничение не существует) в случаях, когда в дочерних таблицах нет соответствующего ограничения.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a8df75b0a] 2017-03-06 16:50:47 -0500
Branch: REL9_6_STABLE [943140d57] 2017-03-06 16:50:47 -0500
Branch: REL9_5_STABLE [420d9ec0a] 2017-03-06 16:50:47 -0500
-->
     <para>Устранение потери указателя в <command>COPY ... TO</command> когда для исходной таблицы активна защита на уровне строк (Том Лейн)</para>

     <para>Обычно это не имело болезненных последствий, но иногда всё же приводило к неожиданным ошибкам и сбоям.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [dbca84f04] 2017-03-04 16:09:33 -0500
Branch: REL9_6_STABLE [68f7b91e5] 2017-03-04 16:09:33 -0500
Branch: REL9_5_STABLE [807df31d1] 2017-03-04 16:09:33 -0500
-->
     <para>Предупреждение обращения к уже закрытому элементу relcache в <command>CLUSTER</command> и <command>VACUUM FULL</command> (Том Лейн)</para>

     <para>При особом стечении обстоятельств это могло приводить к тому, что индексы в целевом отношении перестраивались с неправильным режимом сохранения.</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Gierth <rhodiumtoad@postgresql.org>
Branch: master [1914c5ea7] 2017-03-16 22:28:03 +0000
Branch: REL9_6_STABLE [9b626f6c3] 2017-03-16 22:31:49 +0000
Branch: REL9_5_STABLE [ee78ad5bc] 2017-03-16 22:33:59 +0000
Branch: REL9_4_STABLE [269efd052] 2017-03-16 22:32:56 +0000
Branch: REL9_3_STABLE [8f8a5aefc] 2017-03-16 22:33:18 +0000
Branch: REL9_2_STABLE [a494ff4b0] 2017-03-16 22:33:38 +0000
Branch: master [64ae420b2] 2017-03-17 14:35:54 +0000
Branch: REL9_6_STABLE [733488dc6] 2017-03-17 14:46:15 +0000
-->
     <para>Исправление ошибки команды <command>VACUUM</command>, когда она неправильно учитывала страницы, которые не могла прочитать из-за конфликтующих закреплений страниц (Эндрю Гирт)</para>

     <para>Это провоцировало недооценивание количества кортежей в таблице. В худшем случае с чрезвычайно востребованной таблицей команда <command>VACUUM</command> могла ошибочно сообщить, что таблица вовсе не содержит кортежей, что приводило к очень плохим решениям при планировании.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f2ec57dee] 2017-02-15 16:40:05 -0500
Branch: REL9_6_STABLE [354dfa235] 2017-02-15 16:40:05 -0500
Branch: REL9_5_STABLE [96ba17640] 2017-02-15 16:40:06 -0500
Branch: REL9_4_STABLE [d0e9c0e31] 2017-02-15 16:40:06 -0500
Branch: REL9_3_STABLE [6a4941f8c] 2017-02-15 16:40:06 -0500
Branch: REL9_2_STABLE [030705e4f] 2017-02-15 16:40:06 -0500
-->
     <para>Обеспечение возможности прерывания циклов массовой передачи кортежей в соединении по хешу при попытке отмены запроса (Том Лейн, Томас Мунро)</para>
    </listitem>

    <listitem>
<!--
Author: Teodor Sigaev <teodor@sigaev.ru>
Branch: master [d5286aa90] 2017-03-21 16:23:10 +0300
Branch: REL9_6_STABLE [a4d07d2e9] 2017-03-21 16:24:10 +0300
-->
     <para>Исправление ошибок в поддержке определённых операторов <type>box</type> в SP-GiST (Никита Глухов)</para>

     <para>Сканирование по индексу SP-GiST с использованием операторов <literal>&amp;&lt;</literal> <literal>&amp;&gt;</literal> <literal>&amp;&lt;|</literal> и <literal>|&amp;&gt;</literal> выдавало некорректные ответы.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [df1a699e5] 2017-04-05 23:51:27 -0400
Branch: REL9_6_STABLE [fd52b8834] 2017-04-05 23:51:28 -0400
Branch: REL9_5_STABLE [d68a2b20a] 2017-04-05 23:51:28 -0400
Branch: REL9_4_STABLE [8851bcf88] 2017-04-05 23:51:28 -0400
-->
     <para>Исправление проблем с переполнением целочисленных значений при сравнении типов <type>interval</type> (Кётаро Хоригути, Том Лейн)</para>

     <para>Операторы сравнения для типа <type>interval</type> могли выдавать неверные ответы для интервалов, превышающих 296000 лет. Индексы по столбцам с такими большими значениями следует перестроить, так как они могут быть испорчены.</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [0de791ed7] 2017-05-03 21:41:10 -0400
Branch: REL9_6_STABLE [071d13395] 2017-05-04 21:17:46 -0400
Branch: REL9_5_STABLE [9750a9583] 2017-05-04 21:20:26 -0400
Branch: REL9_4_STABLE [12dd58d64] 2017-05-04 21:22:48 -0400
Branch: REL9_3_STABLE [6e86b448f] 2017-05-04 21:31:12 -0400
Branch: REL9_2_STABLE [a48d47908] 2017-05-04 22:39:23 -0400
-->
     <para>Исправление функции <function>cursor_to_xml()</function>, чтобы она выдавала правильный результат с <replaceable>tableforest</replaceable> = false (Томас Мунро, Питер Эйзентраут)</para>

     <para>Ранее она не добавляла внешний элемент <literal>&lt;table&gt;</literal>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [8f93bd851] 2017-02-08 18:04:59 -0500
Branch: REL9_6_STABLE [404756fe8] 2017-02-08 18:04:59 -0500
Branch: REL9_5_STABLE [7786b9848] 2017-02-08 18:04:59 -0500
Branch: REL9_4_STABLE [1888fad44] 2017-02-08 18:04:59 -0500
Branch: master [5d2adf0f8] 2017-02-09 15:50:16 -0500
Branch: REL9_6_STABLE [fc96a5fbc] 2017-02-09 15:49:57 -0500
Branch: REL9_5_STABLE [cf73c6bfc] 2017-02-09 15:49:57 -0500
Branch: REL9_4_STABLE [86ef376bb] 2017-02-09 15:49:58 -0500
-->
     <para>Устранение проблем с округлением в функциях <function>float8_timestamptz()</function> и <function>make_interval()</function> (Том Лейн)</para>

     <para>Эти функции отбрасывали дробную часть, а не округляли числа при преобразовании значения с плавающей точкой к целому числу микросекунд; это могло приводить к неожиданным сдвигам результатов на единицу.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [a3eac988c] 2017-03-16 12:51:08 -0300
Branch: REL9_6_STABLE [41306a511] 2017-03-16 12:51:08 -0300
Branch: REL9_5_STABLE [087e696f0] 2017-03-16 12:51:08 -0300
Branch: REL9_6_STABLE [1ec36a9eb] 2017-04-16 20:49:40 -0400
Branch: REL9_5_STABLE [b6e6ae1dc] 2017-04-16 20:50:31 -0400
-->
     <para>Исправление функции <function>pg_get_object_address()</function> для членов семейств операторов (Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Teodor Sigaev <teodor@sigaev.ru>
Branch: master [78874531b] 2017-03-24 13:53:40 +0300
Branch: REL9_6_STABLE [8de6278d3] 2017-03-24 13:55:02 +0300
-->
     <para>Исправление отмены <function>pg_stop_backup()</function> при попытке остановить немонопольное резервное копирование (Мишель Пакье, Дэвид Стил)</para>

     <para>Когда функция <function>pg_stop_backup()</function> отменялась, ожидая завершения немонопольного резервного копирования, информация о состоянии оставалась неактуальной; запустить новое монопольное копирование было невозможно, возникали и другие небольшие проблемы.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [af2c5aa88] 2017-05-02 21:50:35 -0400
Branch: REL9_6_STABLE [c521d5a8d] 2017-05-02 21:50:42 -0400
Branch: REL9_5_STABLE [724cd4f06] 2017-05-02 21:50:47 -0400
Branch: REL9_4_STABLE [5557b6af5] 2017-05-02 21:50:52 -0400
Branch: REL9_3_STABLE [35ac926bf] 2017-05-02 21:50:56 -0400
Branch: REL9_2_STABLE [1b6db75ef] 2017-05-02 21:51:01 -0400
Branch: master [5788a5670] 2017-05-07 11:34:31 -0400
Branch: REL9_6_STABLE [5042e9492] 2017-05-07 11:34:41 -0400
Branch: REL9_5_STABLE [38ed45c91] 2017-05-07 11:34:48 -0400
Branch: REL9_4_STABLE [6eedc6c18] 2017-05-07 11:34:58 -0400
Branch: REL9_3_STABLE [07987304d] 2017-05-07 11:35:05 -0400
Branch: REL9_2_STABLE [9061680f0] 2017-05-07 11:35:11 -0400
-->
     <para>Улучшение производительности представления <structname>pg_timezone_names</structname> (Том Лейн, Дэвид Роули)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ff97741bc] 2017-03-08 12:21:23 -0500
Branch: REL9_6_STABLE [e0a6ed8a2] 2017-03-08 12:21:12 -0500
Branch: REL9_5_STABLE [50a9d714a] 2017-03-08 12:21:12 -0500
Branch: REL9_4_STABLE [8dd5c4171] 2017-03-08 12:21:12 -0500
-->
     <para>Уменьшение издержек при управлении памятью для контекстов, содержащих множество больших блоков (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f97de05a1] 2017-02-21 17:51:37 -0500
Branch: REL9_6_STABLE [62ed08422] 2017-02-21 17:51:27 -0500
Branch: REL9_5_STABLE [ff1b032a9] 2017-02-21 17:51:28 -0500
Branch: REL9_4_STABLE [d9959e6eb] 2017-02-21 17:51:28 -0500
Branch: REL9_3_STABLE [3f613c6a4] 2017-02-21 17:51:28 -0500
Branch: REL9_2_STABLE [775227590] 2017-02-21 17:51:28 -0500
-->
     <para>Исправление неаккуратной обработки редких ошибок в <function>lseek()</function> и <function>close()</function> (Том Лейн)</para>

     <para>В типичных ситуациях эти системные вызовы отрабатывают без ошибок, но в случае ошибки код <filename>fd.c</filename> мог повести себя некорректно.</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [ff30aec75] 2017-03-17 11:14:01 +0200
Branch: REL9_6_STABLE [38bdba54a] 2017-03-17 11:14:36 +0200
Branch: REL9_5_STABLE [96fd76dd2] 2017-03-17 11:14:45 +0200
Branch: REL9_4_STABLE [6b584c36a] 2017-03-17 11:14:49 +0200
Branch: REL9_3_STABLE [3ebcc2498] 2017-03-17 11:14:53 +0200
Branch: REL9_2_STABLE [9c52ddfce] 2017-03-17 11:14:58 +0200
Branch: REL9_6_STABLE [4ae0805bb] 2017-03-24 12:39:23 +0200
Branch: REL9_5_STABLE [42a60aa7f] 2017-03-24 12:39:20 +0200
Branch: REL9_4_STABLE [6423ed7d4] 2017-03-24 12:39:17 +0200
Branch: REL9_3_STABLE [e0e1ef46d] 2017-03-24 12:39:14 +0200
Branch: REL9_2_STABLE [8ae3ff64b] 2017-03-24 12:39:01 +0200
-->
     <para>Исправление некорректной проверки факта работы postmaster в виде службы Windows (Мишель Пакье)</para>

     <para>Вследствие ошибки для вывода сообщений мог выбираться системный журнал событий (там где его на самом деле не было), так что запись сообщений фактически не производилась.</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [43c79c7d6] 2017-03-13 21:03:55 +0100
Branch: REL9_6_STABLE [f08a90ecd] 2017-03-13 20:50:48 +0100
Branch: REL9_5_STABLE [a8b3262ab] 2017-03-13 20:51:46 +0100
Branch: REL9_4_STABLE [e060baaad] 2017-03-13 20:51:56 +0100
Branch: REL9_3_STABLE [04207ef76] 2017-03-13 20:52:05 +0100
Branch: REL9_2_STABLE [d8c207437] 2017-03-13 20:52:16 +0100
-->
     <para>Исправление в <application>ecpg</application> поддержки <command>COMMIT PREPARED</command> и <command>ROLLBACK PREPARED</command> (Масахико Савада)</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [d1ca82d0a] 2017-03-10 10:32:41 +0100
Branch: REL9_6_STABLE [d0fef0654] 2017-03-10 10:50:46 +0100
Branch: REL9_5_STABLE [466ee7a53] 2017-03-10 10:51:24 +0100
Branch: REL9_4_STABLE [f6b906599] 2017-03-10 10:51:40 +0100
Branch: REL9_3_STABLE [af471919b] 2017-03-10 10:51:51 +0100
Branch: REL9_2_STABLE [731afc91f] 2017-03-10 10:52:01 +0100
-->
     <para>Исправление ошибки двойного освобождения при обработке строковых констант, заключённых в доллары, в <application>ecpg</application> (Михаэль Мескес)</para>
    </listitem>

    <listitem>
<!--
Author: Teodor Sigaev <teodor@sigaev.ru>
Branch: REL9_6_STABLE [2ed391f95] 2017-03-24 19:23:13 +0300
-->
     <para>Исправление поведения <application>pgbench</application> с сочетанием параметров <option>--connect</option> и <option>--rate</option> (Фабьен Коэльо)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ef2662394] 2017-03-07 11:36:42 -0500
Branch: REL9_6_STABLE [0e2c85d13] 2017-03-07 11:36:35 -0500
-->
     <para>Исправление в <application>pgbench</application> обработки развёрнутого написания параметра <option>--builtin</option> согласно документации (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [330b84d8c] 2017-03-06 23:29:02 -0500
Branch: REL9_6_STABLE [e961341cc] 2017-03-06 23:29:08 -0500
-->
     <para>Исправление поведения <application>pg_dump</application>/<application>pg_restore</application> для корректной обработки прав, назначенных для схемы <literal>public</literal>, при использовании параметра <option>--clean</option> (Стивен Фрост)</para>

     <para>Другие схемы создаются без назначенных для них прав, но схема <literal>public</literal> представляет собой исключение; когда она удаляется и восстанавливается вследствие указания <option>--clean</option>, её нужно обработать особым образом.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [299990ba1] 2017-03-06 19:33:59 -0500
Branch: REL9_6_STABLE [8ea8178cd] 2017-03-06 19:33:59 -0500
Branch: REL9_5_STABLE [b6882e9ec] 2017-03-06 19:33:59 -0500
Branch: REL9_4_STABLE [db9b4b716] 2017-03-06 19:33:59 -0500
Branch: REL9_3_STABLE [783acfd4d] 2017-03-06 19:33:59 -0500
Branch: REL9_2_STABLE [0ab75448e] 2017-03-06 19:33:59 -0500
-->
     <para>В <application>pg_dump</application> исправлена пометка схемы и владельца для комментариев и меток безопасности некоторых типов объектов БД (Джузеппе Брокколо, Том Лейн)</para>

     <para>В простых случаях это не проявлялось никак, но например, при восстановлении с выбором схемы, могли потеряться комментарии, которые в ней должны быть, из-за того, что они не были помечены как принадлежащие схеме своего объекта.</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [39370e6a0] 2017-02-17 15:06:28 -0500
Branch: REL9_6_STABLE [4e8b2fd33] 2017-02-17 15:06:34 -0500
-->
     <para>Исправление ошибки в запросе <application>pg_dump</application>, предназначенном для получения начальных прав, назначенных для процедурного языка (Питер Эйзентраут)</para>

     <para>Вследствие этой ошибки <application>pg_dump</application> всегда полагал, что для языка не определены начальные права. Так как это справедливо для большинства процедурных языков, последствия ошибки могли проявляться довольно редко.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f39ddd843] 2017-03-10 14:15:09 -0500
Branch: REL9_6_STABLE [4cdd81d90] 2017-03-10 14:15:09 -0500
Branch: REL9_5_STABLE [88f3743cb] 2017-03-10 14:15:09 -0500
Branch: REL9_4_STABLE [64d132c29] 2017-03-10 14:15:09 -0500
Branch: REL9_3_STABLE [0c0a95c2f] 2017-03-10 14:15:09 -0500
Branch: REL9_2_STABLE [e6d2ba419] 2017-03-10 14:15:09 -0500
-->
     <para>Предотвращение вывода командой <literal>pg_restore -l</literal> некорректного файла со списком объектов, когда имена объектов SQL содержат символы перевода строки (Том Лейн)</para>

     <para>Символы перевода строки заменяются пробелами, что достаточно для того, чтобы этот список корректно обработала команда <literal>pg_restore -L</literal>.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [ff992c074] 2017-03-06 17:03:57 -0500
Branch: REL9_6_STABLE [65a3f233b] 2017-03-06 17:04:06 -0500
Branch: REL9_5_STABLE [6be8647f7] 2017-03-06 17:04:13 -0500
Branch: REL9_4_STABLE [93598898c] 2017-03-06 17:04:22 -0500
Branch: REL9_3_STABLE [7f831f09b] 2017-03-06 17:04:29 -0500
Branch: REL9_2_STABLE [e864cd25b] 2017-03-06 17:04:55 -0500
-->
     <para>Исправление поведения <application>pg_upgrade</application> для корректного переноса комментариев и меток безопасности, связанных с <quote>большими объектами</quote> (BLOB) (Стивен Фрост)</para>

     <para>Ранее такие объекты корректно переносились в новую базу данных, но связанные с ними комментарии и метки безопасности терялись.</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [944a026b4] 2017-03-12 19:35:31 -0400
Branch: REL9_6_STABLE [08c6d42c8] 2017-03-12 19:35:49 -0400
Branch: REL9_5_STABLE [d0e5ac736] 2017-03-12 19:35:57 -0400
Branch: REL9_4_STABLE [4b2669ada] 2017-03-12 19:36:06 -0400
Branch: REL9_3_STABLE [e03c6d93b] 2017-03-12 19:36:15 -0400
Branch: REL9_2_STABLE [0276da5eb] 2017-03-12 19:36:28 -0400
-->
     <para>Улучшение обработки ошибок в функции <function>pg_file_write()</function> из <filename>contrib/adminpack</filename> (Ной Миш)</para>

     <para>В частности, она не реагировала на ошибки в вызове <function>fclose()</function>.</para>
    </listitem>

    <listitem>
<!--
Author: Joe Conway <mail@joeconway.com>
Branch: master [cd1e23e93] 2017-03-11 13:32:18 -0800
Branch: REL9_6_STABLE [8469923f3] 2017-03-11 13:32:26 -0800
Branch: REL9_5_STABLE [82f3792a4] 2017-03-11 13:32:40 -0800
Branch: REL9_4_STABLE [166dfb3a9] 2017-03-11 13:33:14 -0800
Branch: REL9_3_STABLE [f6cfc14e5] 2017-03-11 13:33:22 -0800
Branch: REL9_2_STABLE [c4613c3f4] 2017-03-11 13:33:30 -0800
-->
     <para>Предупреждение утечки предыдущего безымянного соединения при установлении нового безымянного соединения в <filename>contrib/dblink</filename> (Джо Конвей)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9e43e8714] 2017-02-22 15:04:26 -0500
Branch: REL9_6_STABLE [16500d227] 2017-02-22 15:04:07 -0500
Branch: REL9_5_STABLE [513c9f9de] 2017-02-22 15:04:07 -0500
Branch: REL9_4_STABLE [98755681a] 2017-02-22 15:04:07 -0500
Branch: REL9_3_STABLE [53b5a8c13] 2017-02-22 15:04:07 -0500
Branch: master [1dffabed4] 2017-04-14 14:52:21 -0400
Branch: REL9_6_STABLE [d51279433] 2017-04-14 14:52:03 -0400
Branch: REL9_5_STABLE [9b48ce377] 2017-04-14 14:52:03 -0400
Branch: REL9_4_STABLE [e0eda580d] 2017-04-14 14:52:03 -0400
Branch: REL9_3_STABLE [fad06b287] 2017-04-14 14:52:03 -0400
Branch: master [6cfaffc0d] 2017-04-13 17:18:35 -0400
Branch: REL9_6_STABLE [a70b18b89] 2017-04-13 17:18:35 -0400
Branch: REL9_5_STABLE [67665a71c] 2017-04-13 17:18:35 -0400
Branch: REL9_4_STABLE [b179684c7] 2017-04-13 17:18:35 -0400
Branch: REL9_3_STABLE [5be58cc89] 2017-04-13 17:18:35 -0400
-->
     <para>Исправление извлечения триграмм из регулярных выражений в <filename>contrib/pg_trgm</filename> (Том Лейн)</para>

     <para>В некоторых случаях это могло приводить к формированию испорченной структуры данных, для которой отсутствуют какие-либо соответствия. Вследствие этого при сканировании по индексам GIN и GiST с использованием триграмм для регулярного выражения могли не находиться никакие результаты.</para>
    </listitem>

    <listitem>
<!--
Author: Peter Eisentraut <peter_e@gmx.net>
Branch: master [332bec1e6] 2017-04-24 22:50:07 -0400
Branch: REL9_6_STABLE [86e640a69] 2017-04-26 09:14:21 -0400
-->
     <para>В <filename>contrib/postgres_fdw</filename> добавлена возможность вынесения на удалённый сервер условий соединения, содержащих функции из поставляемых расширений (Дэвид Роули, Ашутош Бапат)</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [14722c69f] 2017-05-05 12:38:29 -0300
Branch: REL9_6_STABLE [19a403378] 2017-05-05 12:05:34 -0300
Branch: REL9_5_STABLE [adfad4222] 2017-05-05 12:05:34 -0300
Branch: REL9_4_STABLE [41ba2ca08] 2017-05-05 12:05:34 -0300
Branch: REL9_3_STABLE [f692583dd] 2017-05-05 12:05:34 -0300
Branch: REL9_2_STABLE [992e581bf] 2017-05-05 12:05:34 -0300
-->
     <para>Поддержка Tcl 8.6 в сборках с MSVC (Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e18b2c480] 2017-04-30 15:13:51 -0400
Branch: REL9_6_STABLE [6872d96a3] 2017-04-30 15:14:06 -0400
Branch: REL9_5_STABLE [4d4d8fa77] 2017-04-30 15:14:11 -0400
Branch: REL9_4_STABLE [96cad6f24] 2017-04-30 15:14:15 -0400
Branch: REL9_3_STABLE [f8cf9719d] 2017-04-30 15:14:20 -0400
Branch: REL9_2_STABLE [54aeb8d3e] 2017-04-30 15:14:24 -0400
Branch: master [a54d5875f] 2017-05-07 12:33:12 -0400
Branch: REL9_6_STABLE [fab2d0d7f] 2017-05-07 12:33:18 -0400
Branch: REL9_5_STABLE [74e747fbd] 2017-05-07 12:33:22 -0400
Branch: REL9_4_STABLE [e829385f5] 2017-05-07 12:33:27 -0400
Branch: REL9_3_STABLE [9e5f3d013] 2017-05-07 12:33:31 -0400
Branch: REL9_2_STABLE [da55df018] 2017-05-07 12:33:35 -0400
-->
     <para>Синхронизация нашей копии библиотеки timezone с выпущенной IANA версией tzcode2017b (Том Лейн)</para>

     <para>Это устраняет ошибку с некоторыми вариантами перехода на летнее время в январе 2038.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [74a20d0ab] 2017-05-01 11:53:11 -0400
Branch: REL9_6_STABLE [1fdc3f6e8] 2017-05-01 11:53:42 -0400
Branch: REL9_5_STABLE [9a8cc157c] 2017-05-01 11:53:49 -0400
Branch: REL9_4_STABLE [1c8862346] 2017-05-01 11:53:56 -0400
Branch: REL9_3_STABLE [dc93cafca] 2017-05-01 11:54:02 -0400
Branch: REL9_2_STABLE [c96ccc40e] 2017-05-01 11:54:08 -0400
-->
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2017b, включающее изменение правил перехода на летнее время в Чили, Монголии и на Гаити, а также исторические изменения для Эквадора, Казахстана, Либерии и Испании. Переход к числовым аббревиатурам для ряда часовых поясов в Южной Америке, в Тихом и Индийском океанах, а также в некоторых азиатских и ближневосточных странах.</para>

     <para>Ранее в базе данных часовых поясов IANA предоставлялись текстовые аббревиатуры для всех часовых поясов и иногда при этом указывались аббревиатуры, которые практически не употреблялись местным населением. Сейчас происходит процесс ухода от этой практики в пользу использования числовых смещений UTC в тех часовых поясах, где нет никаких свидетельств реального использования английской аббревиатуры. Как минимум на данном этапе, <productname>PostgreSQL</productname> продолжит принимать подобные удалённые аббревиатуры при вводе дат/времени. Но они не будут видны при просмотре представления <structname>pg_timezone_names</structname> и не будут выводиться с датами/временем.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [d4e59c552] 2017-05-07 11:57:41 -0400
Branch: REL9_6_STABLE [f75472817] 2017-05-07 11:57:41 -0400
Branch: REL9_5_STABLE [2f66002df] 2017-05-07 11:57:41 -0400
Branch: REL9_4_STABLE [62a288312] 2017-05-07 11:57:41 -0400
Branch: REL9_3_STABLE [5971accd8] 2017-05-07 11:57:41 -0400
Branch: REL9_2_STABLE [82e7d3dfd] 2017-05-07 11:57:41 -0400
-->
     <para>Использование корректных правил перехода на летнее время для названий часовых поясов в стиле POSIX при сборке с MSVC (Дэвид Роули)</para>

     <para>Сборочные скрипты для MSVC не устанавливали корректно файл <filename>posixrules</filename> в дерево каталогов timezone. Это приводило к тому, что код timezone переходил к использованию встроенных представлений о том, какой вариант перехода на летнее время применим для названия пояса в стиле POSIX. По историческим причинам это соответствует правилам, которые действовали в США до 2007 г. (то есть переход на летнее время происходил в первое воскресенье апреля, а на зимнее — в последнее воскресенье октября). С этим исправлением для часового пояса с названием в стиле POSIX будут использоваться текущие и исторические даты перехода для пояса <literal>US/Eastern</literal>. Если для вас это нежелательно, удалите файл <filename>posixrules</filename> или замените его файлом другого часового пояса (см. <xref remap="4" linkend="datatype-timezones"/>). Учтите, что вследствие кеширования вам потребуется перезапустить сервер, чтобы подобные изменения вступили в силу.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-6-2">
  <title>Выпуск 9.6.2</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2017-02-09</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.6.1. За информацией о нововведениях версии 9.6 обратитесь к <xref remap="3" linkend="release-9-6"/>.</para>

  <sect2>
   <title>Миграция на версию 9.6.2</title>

   <para>Если используется версия 9.6.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если в вашей инсталляции проявилась ошибка, описанная в первой записи следующего списка изменений, после обновления вам может потребоваться предпринять дополнительные действия для исправления испорченных индексов.</para>

   <para>Также, если вы обновляете сервер с версии, более ранней, чем 9.6.1, см. <xref remap="4" linkend="release-9-6-1"/>.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [2aaec6546] 2017-02-06 13:20:19 -0500
Branch: REL9_6_STABLE [7fcddbdd0] 2017-02-06 13:20:20 -0500
Branch: REL9_5_STABLE [e935696f4] 2017-02-06 13:20:21 -0500
Branch: REL9_4_STABLE [5879958e1] 2017-02-06 13:20:23 -0500
Branch: REL9_3_STABLE [32c893c8d] 2017-02-06 13:20:24 -0500
Branch: REL9_2_STABLE [bcd7b47c2] 2017-02-06 13:20:25 -0500
-->
     <para>Исправление поведения в особых условиях, которое приводило к повреждению индексов, создаваемых командой <command>CREATE INDEX CONCURRENTLY</command> (Паван Деоласи, Том Лейн)</para>

     <para>Если команда <command>CREATE INDEX CONCURRENTLY</command> применялась для построения индекса, зависящего от столбца, ранее не индексированного, то у строк, изменяемых транзакциями, выполняемыми одновременно с командой <command>CREATE INDEX</command>, могли оказываться некорректные записи в индексе. В случае подозрений, что вас это коснулось, самое надёжное решение — перестроить такие индексы после установки этого обновления.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ffaa44cb5] 2016-11-15 15:55:35 -0500
Branch: REL9_6_STABLE [8aa3e4751] 2016-11-15 15:55:35 -0500
Branch: REL9_5_STABLE [0bc3ed98c] 2016-11-15 15:55:35 -0500
Branch: REL9_4_STABLE [3e844a34b] 2016-11-15 15:55:36 -0500
-->
     <para>Предотвращение утери специального снимка, используемого при сканированиях каталога, при преждевременной очистке данных (Tom Lane)</para>

     <para>Рабочие процессы не учитывали этот снимок, сообщая о своём самом старом xmin, что оставляло возможность для удаления по-прежнему нужных данных параллельными операциями очистки. Это приводило к появлению плавающих ошибок с сообщениями <quote>ошибка поиска в кеше для отношения 1255</quote>.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [7403561c0] 2017-01-09 18:19:29 -0300
Branch: REL9_6_STABLE [4482c6a23] 2017-01-09 18:19:29 -0300
Branch: REL9_5_STABLE [ed8e8b814] 2017-01-09 18:19:29 -0300
-->
     <para>Исправление некорректной записи в WAL, формируемой для индексов BRIN (Кунтал Гхош)</para>

     <para>Запись WAL, выдаваемая для страницы BRIN <quote>revmap</quote> при перемещении кортежа индекса в другую страницу, была некорректной. При воспроизведении журнала соответствующая часть индекса становилась непригодной, и её требовалось вычислять заново.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [fa0f466d5] 2016-12-08 14:12:08 -0500
Branch: REL9_6_STABLE [1ed3c6ff9] 2016-12-08 14:13:55 -0500
Branch: REL9_5_STABLE [141ad6896] 2016-12-08 14:14:12 -0500
Branch: REL9_4_STABLE [68e56eef6] 2016-12-08 14:14:27 -0500
Branch: REL9_3_STABLE [8e403f215] 2016-12-08 14:16:47 -0500
Branch: REL9_2_STABLE [a00ac6299] 2016-12-08 14:19:25 -0500
-->
     <para>Безусловное фиксирование в WAL создания <quote>слоя инициализации</quote> для нежурналируемых таблиц (Мишель Пакье)</para>

     <para>Ранее это действие пропускалось при <xref linkend="guc-wal-level"/> = <literal>minimal</literal>, но на самом деле это необходимо даже в этом случае, чтобы нежурналируемая таблица корректно создавалась пустой после сбоя.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [4f714b2fd] 2016-10-27 14:27:40 -0400
Branch: REL9_6_STABLE [4a43a6244] 2016-10-27 14:54:35 -0400
Branch: REL9_5_STABLE [0cbd199fd] 2016-10-27 14:54:39 -0400
Branch: REL9_4_STABLE [4a8cfbdcb] 2016-10-27 14:56:37 -0400
Branch: REL9_3_STABLE [e927f55ff] 2016-10-27 14:56:42 -0400
Branch: REL9_2_STABLE [2be2838a7] 2016-10-27 14:56:53 -0400
-->
     <para>Если процесс сборщика статистики потерян, перезапускать его и в режиме горячего резерва (Такаюки Цунакава)</para>
    </listitem>

    <listitem>
<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [ec4b97501] 2017-01-26 18:14:02 +0000
Branch: REL9_6_STABLE [95d1b4145] 2017-01-26 20:06:44 +0000
Branch: REL9_5_STABLE [99289e506] 2017-01-26 20:09:18 +0000
Branch: REL9_4_STABLE [800d89a98] 2017-01-26 20:10:19 +0000
Branch: REL9_3_STABLE [048d44175] 2017-01-26 20:15:23 +0000
-->
     <para>Обеспечение корректной работы механизма уведомлений горячего резерва, когда он включается при запуске резервного сервера (Антс Аасма, Крейг Рингер)</para>
    </listitem>

    <listitem>
<!--
Author: Simon Riggs <simon@2ndQuadrant.com>
Branch: master [e8ee3d6b8] 2017-01-26 18:59:58 +0000
Branch: REL9_6_STABLE [40b7800da] 2017-01-27 12:13:20 +0000
Branch: REL9_5_STABLE [ace2cd80a] 2017-01-27 12:15:02 +0000
Branch: REL9_4_STABLE [357e06128] 2017-01-27 12:16:18 +0000
Branch: REL9_3_STABLE [332068a21] 2017-01-27 12:18:07 +0000
Branch: REL9_2_STABLE [15c54e836] 2017-01-27 12:19:50 +0000
-->
     <para>Проверка прерываний в момент ожидания конфликтующего запроса сервером горячего резерва (Саймон Риггс)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [c6a389792] 2017-01-20 15:55:45 -0500
Branch: REL9_6_STABLE [746ba76f1] 2017-01-20 16:11:45 -0500
Branch: REL9_5_STABLE [aeaaf62aa] 2017-01-20 16:14:11 -0500
Branch: REL9_4_STABLE [806f9b3d7] 2017-01-20 16:16:46 -0500
Branch: REL9_3_STABLE [5c5788e90] 2017-01-20 16:18:55 -0500
Branch: REL9_2_STABLE [5dff230eb] 2017-01-20 16:26:39 -0500
-->
     <para>Предупреждение постоянного перезапуска процесса запуска автоочистки в особых случаях (Амит Хандекар)</para>

     <para>Это исправление решает проблему, возникавшую, когда автоочистка номинально отключена и есть несколько таблиц, требующих «заморозки», но эти таблицы уже обработаны рабочими процессами автоочистки.</para>
    </listitem>

    <listitem>
<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [93eb619cd] 2016-12-17 02:22:15 +0900
Branch: REL9_6_STABLE [6c75fb6b3] 2016-12-17 02:25:47 +0900
-->
     <para>Недопущение установки нулевого значения для поля <replaceable>num_sync</replaceable> в <xref remap="6" linkend="guc-synchronous-standby-names"/> (Фудзии Масао)</para>

     <para>Правильный вариант отключения синхронных резервных серверов — задать пустую строку в качестве всего значения.</para>
    </listitem>

    <listitem>
<!--
Author: Andrew Dunstan <andrew@dunslane.net>
Branch: master [f1169ab50] 2017-02-01 18:02:43 -0500
Branch: REL9_6_STABLE [13752743b] 2017-02-01 17:59:53 -0500
-->
     <para>Не учитывать фоновые рабочие процессы при проверке ограничения на число подключений пользователя (Дэвид Роули)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [182db0704] 2016-11-26 13:31:35 -0500
Branch: REL9_6_STABLE [0cc8453ac] 2016-11-26 13:31:35 -0500
Branch: REL9_5_STABLE [576bd360b] 2016-11-26 13:31:35 -0500
Branch: REL9_4_STABLE [313786a74] 2016-11-26 13:31:35 -0500
Branch: REL9_3_STABLE [2cbb62db1] 2016-11-26 13:31:35 -0500
Branch: REL9_2_STABLE [a982b02a4] 2016-11-26 13:31:35 -0500
-->
     <para>Исправление проверки на возможность удаления объекта, принадлежащего расширению (Том Лейн)</para>

     <para>Скрипты обновления расширений должны иметь возможность удалять объекты расширений, но это запрещалось для последовательностей со столбцами serial, а также, возможно, в других случаях.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [e54f75722] 2017-01-29 23:05:07 -0500
Branch: REL9_6_STABLE [20064c0ec] 2017-01-29 23:05:09 -0500
-->
     <para>Исправление отслеживания начальных прав доступа для объектов, принадлежащих расширению, чтобы это корректно работало с <command>ALTER EXTENSION ... ADD/DROP</command> (Стивен Фрост)</para>

     <para>Текущие права доступа к объекту в момент добавления его в расширение теперь будут считаться правами по умолчанию; только в случае изменений они будут выгружаться при последующем выполнении <application>pg_dump</application>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [bd673e8e8] 2016-11-23 13:45:55 -0500
Branch: REL9_6_STABLE [4a5e1d370] 2016-11-23 13:45:56 -0500
Branch: REL9_5_STABLE [e0375d77b] 2016-11-23 13:45:56 -0500
Branch: REL9_4_STABLE [15f3e0cb1] 2016-11-23 13:45:56 -0500
Branch: REL9_3_STABLE [8f67a6c22] 2016-11-23 13:45:56 -0500
Branch: REL9_2_STABLE [05975ab0a] 2016-11-23 13:45:56 -0500
-->
     <para>Команда <command>ALTER TABLE</command> должна сохранять назначения табличных пространств индексам при перестраивании индексов (Том Лейн, Мишель Пакье)</para>

     <para>Ранее с нестандартными значениями <xref linkend="guc-default-tablespace"/> были возможны разрушения индексов.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a522fc3d8] 2016-10-26 17:05:06 -0400
Branch: REL9_6_STABLE [445035a6e] 2016-10-26 17:05:06 -0400
Branch: REL9_5_STABLE [b53c841e5] 2016-10-26 17:05:06 -0400
Branch: REL9_4_STABLE [3a9a8c408] 2016-10-26 17:05:06 -0400
-->
     <para>Исправление некорректного изменения свойств триггерной функции при изменении свойства «откладываемости» ограничения внешнего ключа с помощью команды <command>ALTER TABLE ... ALTER CONSTRAINT</command> (Том Лейн)</para>

     <para>Это приводило к странным сбоям при последующем обращении к внешнему ключу, так как триггеры срабатывали не в положенное время.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4e026b32d] 2016-11-25 13:44:47 -0500
Branch: REL9_6_STABLE [bf5fe7bfa] 2016-11-25 13:44:47 -0500
Branch: REL9_5_STABLE [6cbe84c82] 2016-11-25 13:44:48 -0500
Branch: REL9_4_STABLE [f7166ce24] 2016-11-25 13:44:48 -0500
Branch: REL9_3_STABLE [05bef7b08] 2016-11-25 13:44:48 -0500
Branch: REL9_2_STABLE [6a363a4c2] 2016-11-25 13:44:48 -0500
-->
     <para>Недопущение удаления ограничения внешнего ключа при наличии событий, ожидающих обработки триггерами, для целевого отношения (Том Лейн)</para>

     <para>Это предотвращает ошибки <quote>не удалось найти триггер <replaceable>NNN</replaceable></quote> и <quote>в отношении <replaceable>NNN</replaceable> нет триггеров</quote>.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [3957b58b8] 2017-01-09 19:26:58 -0300
Branch: REL9_6_STABLE [4e563a1f6] 2017-01-09 19:26:58 -0300
Branch: REL9_5_STABLE [4d4ab6ccd] 2017-01-09 19:26:58 -0300
-->
     <para>Исправление поведения <command>ALTER TABLE ... SET DATA TYPE ... USING</command> в случаях, когда порядок столбцов в дочерней таблице отличается от родительской (Альваро Эррера)</para>

     <para>Вследствие того, что столбцы в выражении <literal>USING</literal> не перенумеровывались, возникала ошибка, обычно такая: <quote>атрибут <replaceable>N</replaceable> имеет неправильный тип</quote>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [d86f40009] 2017-01-04 18:00:11 -0500
Branch: REL9_6_STABLE [f64554b99] 2017-01-04 18:00:11 -0500
Branch: REL9_5_STABLE [50c8196f9] 2017-01-04 18:00:11 -0500
Branch: REL9_4_STABLE [696d40d30] 2017-01-04 18:00:11 -0500
Branch: REL9_3_STABLE [5f89a9885] 2017-01-04 18:00:12 -0500
Branch: REL9_2_STABLE [6c4cf2be8] 2017-01-04 18:00:12 -0500
-->
     <para>Исправление обращения к столбцу OID в случаях, когда таблица с таким столбцом связывается с родительской, тоже с OID, посредством <command>ALTER TABLE ... INHERIT</command> (Амит Ланготе)</para>

     <para>В таких случаях столбец OID должен обрабатываться как обычный пользовательский столбец, но этого не происходило, что приводило к странному поведению при последующих изменениях наследования.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [1ead0208b] 2016-12-22 16:23:38 -0500
Branch: REL9_6_STABLE [68330c8b4] 2016-12-22 16:23:34 -0500
-->
     <para>Команда <command>CREATE TABLE ... LIKE ... WITH OIDS</command> должна создавать таблицу с OID вне зависимости от того, есть ли OID в таблице, указанной в <literal>LIKE</literal> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Dean Rasheed <dean.a.rasheed@gmail.com>
Branch: master [58b136264] 2016-12-21 16:58:18 +0000
Branch: REL9_6_STABLE [a46ee6b30] 2016-12-21 17:01:52 +0000
Branch: REL9_5_STABLE [78a98b767] 2016-12-21 17:02:47 +0000
Branch: REL9_4_STABLE [cad24980e] 2016-12-21 17:03:54 +0000
-->
     <para>Исправление поведения <command>CREATE OR REPLACE VIEW</command> — запрос представления должен изменяться до применения новых параметров представления (Дин Рашид)</para>

     <para>Ранее в команде происходил сбой, если новые параметры оказывались несогласованными со старым определением представления.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [12bd7dd31] 2016-12-22 17:08:43 -0500
Branch: REL9_6_STABLE [f0f2e56ac] 2016-12-22 17:08:47 -0500
Branch: REL9_5_STABLE [e82369217] 2016-12-22 17:08:49 -0500
Branch: REL9_4_STABLE [ac1ec9c1f] 2016-12-22 17:08:58 -0500
Branch: REL9_3_STABLE [0e3aadb68] 2016-12-22 17:09:00 -0500
-->
     <para>Получение правильного идентификатора объекта в <command>ALTER TEXT SEARCH CONFIGURATION</command> (Артур Закиров)</para>

     <para>Ранее расширениям, таким как модули логического декодирования, выдавался неправильный OID каталога.</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [4aaddf2f0] 2016-11-24 15:39:55 -0300
Branch: REL9_6_STABLE [9b6634290] 2016-11-24 15:39:55 -0300
Branch: REL9_5_STABLE [7816d1356] 2016-11-24 15:39:55 -0300
-->
     <para>Предупреждение сбоев механизма учёта времени транзакций при запросе особых XID (<literal>FrozenTransactionId</literal> и <literal>BootstrapTransactionId</literal>) (Крейг Рингер)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e3e66d8a9] 2016-11-07 12:08:18 -0500
Branch: REL9_6_STABLE [5ee3a7453] 2016-11-07 12:08:19 -0500
Branch: REL9_5_STABLE [e2f5cd9cf] 2016-11-07 12:08:19 -0500
Branch: master [530f80652] 2016-11-10 15:00:58 -0500
Branch: REL9_6_STABLE [05a6e8728] 2016-11-10 15:00:58 -0500
Branch: REL9_5_STABLE [6e00ba1e1] 2016-11-10 15:00:58 -0500
-->
     <para>Исправление некорректного использования reloptions представлений как reloptions обычных таблиц (Том Лейн)</para>

     <para>Симптомами ошибки были неуместные сообщения <quote>ON CONFLICT не поддерживается для таблицы ..., служащей таблицей каталога</quote> когда целевым отношением <command>INSERT ... ON CONFLICT</command> было представление с каскадной проверкой.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [385072320] 2016-12-04 15:02:45 -0500
Branch: REL9_6_STABLE [da05d0ebc] 2016-12-04 15:02:46 -0500
Branch: REL9_5_STABLE [25c06a1ed] 2016-12-04 15:02:48 -0500
-->
     <para>Исправление некорректного сообщения <quote>допустимое число элементов в целевом списке ограничено <replaceable>N</replaceable></quote> при использовании <literal>ON CONFLICT</literal> с широкими таблицами (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [da8f3ebf3] 2016-11-02 14:32:13 -0400
Branch: REL9_6_STABLE [f4d865f22] 2016-11-02 14:32:13 -0400
-->
     <para>Устранение ошибок с ложными сообщениями <quote>в запросе обнаружены данные для удалённого столбца</quote> при выполнении <command>INSERT</command> или <command>UPDATE</command> в таблице с удалённым столбцом (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [c5f365f3a] 2016-11-20 14:26:19 -0500
Branch: REL9_6_STABLE [90f8b4be5] 2016-11-20 14:26:19 -0500
Branch: REL9_5_STABLE [aeb5e8242] 2016-11-20 14:26:19 -0500
Branch: REL9_4_STABLE [44c8b4fcd] 2016-11-20 14:26:19 -0500
Branch: REL9_3_STABLE [71db302ec] 2016-11-20 14:26:19 -0500
-->
     <para>Предотвращение разворачивания <replaceable>foo</replaceable><literal>.*</literal> в набор столбцов в исходном выражении <command>UPDATE</command> (Том Лейн)</para>

     <para>Это приводило к ошибкам с сообщением <quote>несоответствие целевого количества в UPDATE --- внутренняя ошибка</quote>. Теперь эта запись воспринимается как обозначение переменной «вся-строка», как и в других контекстах.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0b78106cd] 2016-12-08 11:40:02 -0500
Branch: REL9_6_STABLE [cf22c8cb8] 2016-12-09 12:01:14 -0500
Branch: REL9_5_STABLE [6a493adda] 2016-12-09 12:01:14 -0500
Branch: REL9_4_STABLE [c7a62135a] 2016-12-09 12:01:14 -0500
Branch: REL9_3_STABLE [2afe282a3] 2016-12-09 12:01:14 -0500
Branch: REL9_2_STABLE [082d1fb9e] 2016-12-09 12:01:14 -0500
-->
     <para>Обеспечение точного определения модификаторов типа столбцов в конструкциях <literal>VALUES</literal> с несколькими строками (Том Лейн)</para>

     <para>Это устраняет проблемы, возникавшие, когда первое значение в столбце имеет воспринимаемый модификатор типа (например, длину значения <type>varchar</type>), но последующие значения не разделяют его ограничение.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a8ae12322] 2016-12-21 17:39:32 -0500
Branch: REL9_6_STABLE [88e1e91da] 2016-12-21 17:39:32 -0500
Branch: REL9_5_STABLE [d5633af7b] 2016-12-21 17:39:32 -0500
Branch: REL9_4_STABLE [d0f60e4cc] 2016-12-21 17:39:32 -0500
Branch: REL9_3_STABLE [a57695d9a] 2016-12-21 17:39:33 -0500
Branch: REL9_2_STABLE [6e2c21ec5] 2016-12-21 17:39:33 -0500
-->
     <para>При нахождении незаконченной суррогатной пары Unicode в конце строки символов Unicode должна выдаваться ошибка (Том Лейн)</para>

     <para>Обычно за начальным суррогатным символом Unicode должно следовать продолжение, но это не проверялось когда такой начальный символ оказывался последним в строке символов Unicode (<literal>U&amp;'...'</literal>) или в Unicode-идентификаторе (<literal>U&amp;"..."</literal>).</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [db80acfc9] 2016-12-20 09:20:17 +0200
Branch: REL9_6_STABLE [ce92fc4e2] 2016-12-20 09:20:30 +0200
-->
     <para>Корректировка выполнения агрегатов с <literal>DISTINCT</literal> и упорядочиванием, когда несколько таких агрегатов могут разделять одно состояние перехода (Хейкки Линнакангас)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [89fcea1ac] 2016-12-21 15:18:39 -0500
Branch: REL9_6_STABLE [4e2477b7b] 2016-12-21 15:18:40 -0500
Branch: master [260443847] 2016-12-19 13:49:50 -0500
Branch: REL9_6_STABLE [3f07eff10] 2016-12-19 13:49:45 -0500
-->
     <para>Исправление реализации операторов поиска фраз в <type>tsquery</type> (Том Лейн)</para>

     <para>Ликвидация некорректных и применяемых несогласованно правил перезаписи, которые пытались оптимизировать операторы И/ИЛИ/НЕ внутри оператора поиска фразы; вместо этого обработка таких выражений была добавлена в сам исполнитель. В результате устранены разнообразные странности в поведении и возможные сбои в запросах полнотекстового поиска, содержащих такие выражения. Также реализовано разумное поведение вложенных операторов поиска фраз не только с простыми деревьями, растущими влево; исправлено поведение при удалении стоп-слов из предложения поиска фразы; обеспечена согласованность поиска по индексу и простого выполнения этих запросов с последовательным сканированием.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9d4ca0131] 2017-01-26 12:18:07 -0500
Branch: REL9_6_STABLE [2dfc12647] 2017-01-26 12:17:47 -0500
Branch: REL9_5_STABLE [423ad86f4] 2017-01-26 12:17:47 -0500
Branch: REL9_4_STABLE [2c1976a6c] 2017-01-26 12:17:47 -0500
Branch: REL9_3_STABLE [2e024f83b] 2017-01-26 12:17:47 -0500
Branch: REL9_2_STABLE [fe6120f9b] 2017-01-26 12:17:47 -0500
-->
     <para>Определённо отрицательному поисковому запросу, например, <literal>!foo</literal>, должны удовлетворять пустые значения <type>tsvector</type> (Том Дунстан)</para>

     <para>Такие соответствия находились при поиске по индексу GIN, но не при последовательном сканировании или поиске по индексу GiST.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0eaaaf00e] 2016-12-11 13:09:57 -0500
Branch: REL9_6_STABLE [c8bfe055b] 2016-12-11 13:09:57 -0500
Branch: REL9_5_STABLE [c6caa5200] 2016-12-11 13:09:57 -0500
Branch: REL9_4_STABLE [6f5cb982e] 2016-12-11 13:09:57 -0500
Branch: REL9_3_STABLE [79e1a9efa] 2016-12-11 13:09:57 -0500
Branch: REL9_2_STABLE [f4ccee408] 2016-12-11 13:09:57 -0500
-->
     <para>Предотвращение сбоя в ситуации, когда <function>ts_rewrite()</function> заменяет поддерево не верхнего уровня пустым запросом (Артур Закиров)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [5ec81acee] 2016-10-30 17:35:42 -0400
Branch: REL9_6_STABLE [464326e83] 2016-10-30 17:35:42 -0400
Branch: REL9_5_STABLE [e0491c19d] 2016-10-30 17:35:42 -0400
Branch: REL9_4_STABLE [514797a52] 2016-10-30 17:35:43 -0400
Branch: REL9_3_STABLE [407d513df] 2016-10-30 17:35:43 -0400
Branch: REL9_2_STABLE [606e16a7f] 2016-10-30 17:35:43 -0400
-->
     <para>Устранение проблем с производительностью в <function>ts_rewrite()</function> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [24ebc444c] 2016-10-30 15:24:40 -0400
Branch: REL9_6_STABLE [2a2b439cc] 2016-10-30 15:24:40 -0400
Branch: REL9_5_STABLE [de7387604] 2016-10-30 15:24:40 -0400
Branch: REL9_4_STABLE [f0c2ce45e] 2016-10-30 15:24:40 -0400
Branch: REL9_3_STABLE [77a22f898] 2016-10-30 15:24:40 -0400
Branch: REL9_2_STABLE [b0f8a273e] 2016-10-30 15:24:40 -0400
-->
     <para>Исправление обработки в <function>ts_rewrite()</function> вложенных операторов NOT (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9a00f03e4] 2016-10-30 12:27:41 -0400
Branch: REL9_6_STABLE [48a6592da] 2016-10-30 12:27:41 -0400
Branch: REL9_5_STABLE [7151e72d7] 2016-10-30 12:27:41 -0400
-->
     <para>Увеличение скорости пользовательских агрегатов, использующих в качестве перехода функцию <function>array_append()</function> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [82f8107b9] 2017-01-05 11:33:51 -0500
Branch: REL9_6_STABLE [5b4f8f4c6] 2017-01-05 11:33:51 -0500
Branch: REL9_5_STABLE [4555a375a] 2017-01-05 11:33:51 -0500
Branch: REL9_4_STABLE [4e446563b] 2017-01-05 11:33:51 -0500
Branch: REL9_3_STABLE [ee9cb284a] 2017-01-05 11:33:51 -0500
Branch: REL9_2_STABLE [e0d59c6ef] 2017-01-05 11:33:51 -0500
-->
     <para>Исправление <function>array_fill()</function> для корректной обработки пустых массивов (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [a73491e5f] 2016-12-09 12:42:17 -0300
Branch: REL9_6_STABLE [79c89f1f4] 2016-12-09 12:42:17 -0300
Branch: REL9_5_STABLE [581b09c72] 2016-12-09 12:42:17 -0300
-->
     <para>Предупреждение возможных сбоев в функциях <function>array_position()</function> и <function>array_positions()</function> при обработке массивов записей (Джун-сок Янг)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [4f5182e18] 2016-12-16 12:53:04 +0200
Branch: REL9_6_STABLE [0fe5a4cd7] 2016-12-16 12:52:50 +0200
Branch: REL9_5_STABLE [595333ff4] 2016-12-16 12:53:12 +0200
Branch: REL9_4_STABLE [779325478] 2016-12-16 12:53:16 +0200
Branch: REL9_3_STABLE [e71fe8470] 2016-12-16 12:53:22 +0200
Branch: REL9_2_STABLE [c8f8ed5c2] 2016-12-16 12:53:27 +0200
-->
     <para>Устранение выхода на один байт за границу буфера в функции <function>quote_literal_cstr()</function> (Хейкки Линнакангас)</para>

     <para>Этот выход имел место только если входная строка содержала исключительно апострофы и/или обратные косые черты.</para>
    </listitem>

    <listitem>
<!--
Author: Fujii Masao <fujii@postgresql.org>
Branch: master [974ece58b] 2017-01-17 17:27:32 +0900
Branch: REL9_6_STABLE [60a8b63d2] 2017-01-17 17:29:15 +0900
Branch: REL9_5_STABLE [dfe348c1b] 2017-01-17 17:30:26 +0900
Branch: REL9_4_STABLE [9e7f00d86] 2017-01-17 17:31:51 +0900
Branch: REL9_3_STABLE [f64b11fa0] 2017-01-17 17:32:20 +0900
Branch: REL9_2_STABLE [c73157ca0] 2017-01-17 17:32:45 +0900
-->
     <para>Предотвращение одновременного выполнения вызовов <function>pg_start_backup()</function> и <function>pg_stop_backup()</function> (Мишель Пакье)</para>

     <para>Это предупреждает сбой проверки истинности и, вероятно, худшие последствия, в случае, если кто-то попытается запустить эти функции параллельно.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [c22ecc656] 2017-01-18 15:22:07 -0500
Branch: REL9_6_STABLE [b21e665f2] 2017-01-18 15:21:52 -0500
Branch: REL9_5_STABLE [74e67bbad] 2017-01-18 15:21:52 -0500
-->
     <para>Отключение трансформации, которая пыталась оптимизировать бесполезные преобразования <literal>AT TIME ZONE</literal> (Том Лейн)</para>

     <para>Вследствие этого выдавались неверные результаты, когда упрощённое выражение использовалось в условии индекса.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f0774abde] 2016-12-27 15:43:54 -0500
Branch: REL9_6_STABLE [21e24eb9a] 2016-12-27 15:43:54 -0500
Branch: REL9_5_STABLE [4efe7aa2d] 2016-12-27 15:43:54 -0500
Branch: REL9_4_STABLE [0b947b692] 2016-12-27 15:43:54 -0500
Branch: REL9_3_STABLE [583599839] 2016-12-27 15:43:54 -0500
Branch: REL9_2_STABLE [beae7d5f0] 2016-12-27 15:43:55 -0500
-->
     <para>Сохранение приведений <type>interval</type>-в-<type>interval</type>, которые на самом деле несут смысловую нагрузку (Том Лейн)</para>

     <para>В некоторых случаях приведения, которые должны были обнулять младшие поля значений <type>interval</type>, ошибочно считались бессмысленными и просто убирались. В результате, например, при приведении значения типа <type>INTERVAL MONTH</type> к <type>INTERVAL YEAR</type> поле месяцев не обнулялось.</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [53c7cff72] 2016-12-05 15:54:28 -0500
Branch: REL9_6_STABLE [06fa6670f] 2016-12-05 15:59:02 -0500
-->
     <para>Устранения сбоя в ситуациях, когда число рабочих процессов, доступных для параллельных запросов, уменьшалось при повторном сканировании (Андреас Зельтенрейх)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [13671b4b2] 2016-11-19 14:26:19 -0500
Branch: REL9_6_STABLE [272c42660] 2016-11-19 14:26:19 -0500
Branch: REL9_5_STABLE [b9ee42e70] 2016-11-19 14:26:20 -0500
-->
     <para>Исправление ошибок при передаче значений параметров GUC параллельным исполнителям (Мишель Пакье, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [4212cb732] 2016-12-06 11:11:54 -0500
Branch: REL9_6_STABLE [ebe5dc9e0] 2016-12-06 11:43:12 -0500
-->
     <para>Допущение возможности для операторов, подготовленных командой <command>PREPARE</command>, иметь параллельные планы (Амит Капила, Тобиас Бусман)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [41e2b84ce] 2016-11-29 19:32:35 -0500
Branch: REL9_6_STABLE [e5b8aa636] 2016-11-29 19:32:35 -0500
-->
     <para>Исправление некорректного построения параллельных планов для полусоединений (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [0c2070cef] 2017-01-13 13:34:10 -0500
Branch: REL9_6_STABLE [2d443ae1b] 2017-01-13 13:36:09 -0500
-->
     <para>Исправление оценок количества строк для параллельных соединений (Роберт Хаас)</para>

     <para>Эти оценки должны отражать количество строк, которое будет видеть отдельный рабочий процесс, а не общее их число.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ab77a5a45] 2016-11-25 16:20:12 -0500
Branch: REL9_6_STABLE [474de765a] 2016-11-25 16:20:31 -0500
Branch: master [f24cf960d] 2016-11-21 11:09:24 -0500
Branch: REL9_6_STABLE [01f08cbbc] 2016-11-21 11:09:33 -0500
-->
     <para>Исправление планировщика, чтобы он не пытался распараллеливать узлы плана, содержащие вложенные и инициализирующие планы (Том Лейн, Амит Капила)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [c52d37c8b] 2017-01-06 14:12:52 -0500
Branch: REL9_6_STABLE [4103a2f20] 2017-01-06 14:12:52 -0500
Branch: REL9_5_STABLE [aaf12e577] 2017-01-06 14:12:52 -0500
Branch: REL9_4_STABLE [e4380e4cf] 2017-01-06 14:12:52 -0500
Branch: REL9_3_STABLE [a8191800a] 2017-01-06 14:12:52 -0500
-->
     <para>Аннулирование кешированных планов при изменениях в параметрах сторонних таблиц (Амит Ланготе, Эцуро Фудзита, Ашутош Бапат)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e1b449bea] 2016-11-10 11:31:56 -0500
Branch: REL9_6_STABLE [7defc3b97] 2016-11-10 11:31:56 -0500
-->
     <para>Исправление плана, формируемого для частичного агрегирования с выражением <literal>GROUP BY</literal> с константой (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [1f542a2ea] 2016-12-13 13:20:37 -0500
Branch: REL9_6_STABLE [997a2994e] 2016-12-13 13:20:16 -0500
-->
     <para>Исправление ошибки планировщика <quote>не удалось найти план для CTE</quote> при обработке конструкции <literal>UNION ALL</literal>, включающей CTE (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [555494d1b] 2017-02-02 19:11:32 -0500
Branch: REL9_6_STABLE [b971a98ce] 2017-02-02 19:11:27 -0500
-->
     <para>Исправление некорректной обработки инициализирующих планов при принудительном добавлении узла Material во вложенный план (Том Лейн)</para>

     <para>Типичным проявлением этого дефекта были ошибки <quote>в плане не должно быть обращения к переменной вложенного плана</quote>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [7fa93eec4] 2016-12-17 15:28:54 -0500
Branch: REL9_6_STABLE [f4f195d15] 2016-12-17 15:28:54 -0500
Branch: master [770671062] 2016-11-02 15:50:15 -0400
Branch: REL9_6_STABLE [23c6c437f] 2016-11-02 15:50:21 -0400
-->
     <para>Исправление оценки избирательности соединения по внешнему ключу для полусоединений и антисоединений, а также в ситуациях с наследованием (Том Лейн)</para>

     <para>Новый код, принимающий в рассмотрение связь по внешнему ключу, работал неправильно в этих случаях, и оценки оказывались хуже, а не лучше, чем в коде до 9.6.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [bec96c82f] 2017-01-19 12:06:21 -0500
Branch: REL9_6_STABLE [fd081cabf] 2017-01-19 12:06:27 -0500
-->
     <para>Исправление <application>pg_dump</application>, чтобы в выгрузку попадали данные последовательности, помеченной как конфигурационная таблица расширения (Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [e2090d9d2] 2017-01-31 16:24:11 -0500
Branch: REL9_6_STABLE [eb5e9d90d] 2017-01-31 16:24:14 -0500
-->
     <para>Корректировка неправильной обработки <command>ALTER DEFAULT PRIVILEGES ... REVOKE</command> в <application>pg_dump</application> (Стивен Фрост)</para>

     <para>Программа <application>pg_dump</application> не выдавала требуемые команды <literal>REVOKE</literal> в случаях, когда с помощью <command>ALTER DEFAULT PRIVILEGES</command> некоторые права доступа исключались из начального набора.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [2259bf672] 2016-12-21 13:47:06 -0500
Branch: REL9_6_STABLE [542975a14] 2016-12-21 13:47:13 -0500
Branch: REL9_5_STABLE [1efc5dba0] 2016-12-21 13:47:18 -0500
Branch: REL9_4_STABLE [13f51dacf] 2016-12-21 13:47:23 -0500
Branch: REL9_3_STABLE [1f2cfd26f] 2016-12-21 13:47:28 -0500
Branch: REL9_2_STABLE [da57166b7] 2016-12-21 13:47:32 -0500
Branch: master [19990918d] 2016-12-21 13:47:06 -0500
Branch: REL9_6_STABLE [e45319bb7] 2016-12-21 13:47:13 -0500
Branch: REL9_5_STABLE [94476436a] 2016-12-21 13:47:18 -0500
Branch: REL9_4_STABLE [107943f1a] 2016-12-21 13:47:23 -0500
Branch: REL9_3_STABLE [fc03f7dd1] 2016-12-21 13:47:28 -0500
Branch: REL9_2_STABLE [59a389891] 2016-12-21 13:47:32 -0500
-->
     <para>Исправление <application>pg_dump</application> для корректной выгрузки пользовательских приведений и преобразований, использующих встроенные функции (Стивен Фрост)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ac888986f] 2016-11-17 14:59:13 -0500
Branch: REL9_6_STABLE [0eaa5118a] 2016-11-17 14:59:19 -0500
Branch: REL9_5_STABLE [a7864037d] 2016-11-17 14:59:23 -0500
Branch: REL9_4_STABLE [e69b532be] 2016-11-17 14:59:26 -0500
-->
     <para>Реализация более разумного поведения <application>pg_restore</application> с <option>--create --if-exists</option> в случаях, когда архив содержит нераспознанные команды <command>DROP</command> (Том Лейн)</para>

     <para>Это не устраняет никакую наблюдаемую ошибку, но может улучшить поведение в будущем, при использовании <application>pg_restore</application> с архивом, созданным предыдущей версией <application>pg_dump</application>.</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [10238fad0] 2016-12-19 10:11:04 +0100
Branch: REL9_6_STABLE [1c8ad594e] 2016-12-19 10:15:52 +0100
Branch: REL9_5_STABLE [bc53d7130] 2016-12-19 10:16:02 +0100
Branch: REL9_4_STABLE [f6508827a] 2016-12-19 10:16:12 +0100
-->
     <para>Исправление ограничения нагрузки <application>pg_basebackup</application> при низкой скорости ввода/вывода (Антонин Хоуска)</para>

     <para>Если скорость диска на время оказывалась ниже заданного ограничения, в вычислении происходило переполнение, и в результате ограничение отключалось до конца операции.</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: REL9_6_STABLE [b6a323a8c] 2016-11-07 14:47:30 +0100
Branch: REL9_5_STABLE [6d779e05a] 2016-11-07 15:03:56 +0100
Branch: REL9_4_STABLE [5556420d4] 2016-11-07 15:04:23 +0100
-->
     <para>Обеспечение корректной работы <application>pg_basebackup</application> с подкаталогами <filename>pg_stat_tmp</filename> и <filename>pg_replslot</filename>, являющимися символическими ссылками (Магнус Хагандер, Мишель Пакье)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [f267c1c24] 2016-10-27 11:19:51 -0400
Branch: REL9_6_STABLE [05e2293f4] 2016-10-27 11:34:28 -0400
Branch: REL9_5_STABLE [ef18cb7da] 2016-10-27 11:53:14 -0400
Branch: REL9_4_STABLE [d1e9c8269] 2016-10-27 11:59:08 -0400
Branch: REL9_3_STABLE [92929a3e3] 2016-10-27 12:00:05 -0400
Branch: REL9_2_STABLE [629575fa2] 2016-10-27 12:14:07 -0400
-->
     <para>Предотвращение возможного сбоя <application>pg_basebackup</application> на резервном сервере при задействовании файлов WAL (Амит Капила, Роберт Хаас)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [dbdfd114f] 2016-11-25 18:36:10 -0500
Branch: REL9_6_STABLE [255bcd27f] 2016-11-25 18:36:10 -0500
-->
     <para>Усовершенствование <application>initdb</application>, чтобы в <filename>postgresql.conf</filename> вставлялись корректные для текущей платформы значения по умолчанию параметров <replaceable>xxx</replaceable><literal>_flush_after</literal> (Фабьен Коэльо, Том Лейн)</para>

     <para>Это позволило описать значения по умолчанию в документации более понятно, чем раньше.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [cd1b21569] 2016-12-22 15:01:37 -0500
Branch: REL9_6_STABLE [77cd0dc7e] 2016-12-22 15:01:38 -0500
Branch: REL9_5_STABLE [c472f2a33] 2016-12-22 15:01:39 -0500
-->
     <para>Исправление возможного дефекта при обработке развёрнутых массивов в ограничениях-проверках доменов и в конструкциях <literal>CASE</literal> (Том Лейн)</para>

     <para>Существовала вероятность, что функция PL/pgSQL, вызванная в этих контекстах, изменит или даже удалит значение массива, которое должно сохраняться для дополнительных операций.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [fc8b81a29] 2016-11-06 12:09:36 -0500
Branch: REL9_6_STABLE [a5b153ff5] 2016-11-06 12:09:36 -0500
Branch: REL9_5_STABLE [674877e93] 2016-11-06 12:09:36 -0500
-->
     <para>Исправление рекурсивного вызова функций PL/pgSQL в таких контекстах, как проверки ограничений домена, выполняемые при присвоении значения переменной PL/pgSQL (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9cda81f00] 2016-12-09 15:27:23 -0500
Branch: REL9_6_STABLE [b90f2247e] 2016-12-09 15:27:23 -0500
Branch: REL9_5_STABLE [00858728f] 2016-12-09 15:27:23 -0500
Branch: REL9_4_STABLE [13a4b37b9] 2016-12-09 15:27:23 -0500
Branch: REL9_3_STABLE [cea6de20b] 2016-12-09 15:27:23 -0500
Branch: REL9_2_STABLE [981885d17] 2016-12-09 15:27:23 -0500
-->
     <para>Обеспечение правильного учёта объектов исключений Python, создаваемых нами для PL/Python, счётчиками использования (Рафа де ла Торре, Том Лейн)</para>

     <para>Это предотвращает ошибки, возникавшие при использовании объектов после цикла уборки мусора в Python.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [fd2664dcb] 2016-11-06 14:43:13 -0500
Branch: REL9_6_STABLE [3af8467e9] 2016-11-06 14:43:13 -0500
Branch: REL9_5_STABLE [abdc83998] 2016-11-06 14:43:13 -0500
Branch: REL9_4_STABLE [110413a35] 2016-11-06 14:43:13 -0500
Branch: REL9_3_STABLE [9c0b04f18] 2016-11-06 14:43:14 -0500
Branch: REL9_2_STABLE [92b7b1058] 2016-11-06 14:43:14 -0500
-->
     <para>Исправление в PL/Tcl поддержки триггеров для таблиц, в которых имеется столбец <literal>.tupno</literal> (Том Лейн)</para>

     <para>Это соответствует (ранее недокументированному) поведению команд PL/Tcl <command>spi_exec</command> и <command>spi_execp</command>, в том, что особый столбец <literal>.tupno</literal> добавляется, только если отсутствует настоящий с таким именем.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [0a7481930] 2016-11-15 16:17:19 -0500
Branch: REL9_6_STABLE [a69e6d9a6] 2016-11-15 16:17:19 -0500
Branch: REL9_5_STABLE [8951f92da] 2016-11-15 16:17:19 -0500
Branch: REL9_4_STABLE [e9802122d] 2016-11-15 16:17:19 -0500
Branch: REL9_3_STABLE [46b6f3fff] 2016-11-15 16:17:19 -0500
Branch: REL9_2_STABLE [13aa9af37] 2016-11-15 16:17:19 -0500
-->
     <para>В файлах <filename>~/.pgpass</filename> должны допускаться завершения строк в стиле DOS, даже на Unix-платформах (Вик Фиринг)</para>

     <para>Это изменение упрощает использование одних и тех же файлов паролей на машинах с Unix и Windows.</para>
    </listitem>

    <listitem>
<!--
Author: Michael Meskes <meskes@postgresql.org>
Branch: master [4032ef18d] 2016-12-22 08:28:13 +0100
Branch: REL9_6_STABLE [fd2a5547c] 2016-12-22 08:29:13 +0100
Branch: REL9_5_STABLE [a88c547f9] 2016-12-22 08:29:33 +0100
Branch: REL9_4_STABLE [3af172f7b] 2016-12-22 08:30:06 +0100
Branch: REL9_3_STABLE [1df8b3fe8] 2016-12-22 08:32:25 +0100
Branch: REL9_2_STABLE [501c91074] 2016-12-22 08:34:07 +0100
-->
     <para>Устранение выхода на один байт за границу буфера, когда <application>ecpg</application> передаётся имя файла, которое заканчивается точкой (Такаюки Цунакава)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a3aef88e6] 2016-12-25 16:04:45 -0500
Branch: REL9_6_STABLE [6a8c67f50] 2016-12-25 16:04:47 -0500
-->
     <para>Исправление некорректных сообщений об ошибках при дублировании данных в <application>psql</application> <command>\crosstabview</command> (Том Лейн)</para>

     <para><application>psql</application> иногда цитировал некорректное содержимое строки/столбца, выдавая сообщение о множественных значениях в одной ячейке перекрёстной таблицы.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [f3fd531a5] 2016-12-23 21:01:29 -0500
Branch: REL9_6_STABLE [dc61580bd] 2016-12-23 21:01:33 -0500
Branch: REL9_5_STABLE [16a2efdb2] 2016-12-23 21:01:40 -0500
Branch: REL9_4_STABLE [98f30a0e7] 2016-12-23 21:01:45 -0500
Branch: REL9_3_STABLE [2022d594d] 2016-12-23 21:01:48 -0500
Branch: REL9_2_STABLE [26b55d669] 2016-12-23 21:01:51 -0500
-->
     <para>Исправление в <application>psql</application> дополнения табуляцией для команды <command>ALTER DEFAULT PRIVILEGES</command> (Жиль Даролд, Стивен Фрост)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [404e66758] 2016-11-28 11:51:30 -0500
Branch: REL9_6_STABLE [28735cc72] 2016-11-28 11:51:35 -0500
-->
     <para>Исправление в <application>psql</application> дополнения табуляцией для <command>ALTER TABLE t ALTER c DROP ...</command> (Кётаро Хоригути)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [18f8f784c] 2016-12-07 12:19:56 -0500
Branch: REL9_6_STABLE [bb39f58f7] 2016-12-07 12:19:56 -0500
Branch: REL9_5_STABLE [370c7a863] 2016-12-07 12:19:56 -0500
Branch: REL9_4_STABLE [ccb84dae1] 2016-12-07 12:19:56 -0500
Branch: REL9_3_STABLE [82eb5c514] 2016-12-07 12:19:56 -0500
Branch: REL9_2_STABLE [1ec5cc025] 2016-12-07 12:19:57 -0500
-->
     <para>В <application>psql</application> пустое или содержащее только пробелы значение переменной окружения <envar>PAGER</envar> должно означать <quote>без постраничника</quote> (Том Лейн)</para>

     <para>Ранее с таким значением вывод, предназначенный для постраничника, просто исчезал.</para>
    </listitem>

    <listitem>
<!--
Author: Joe Conway <mail@joeconway.com>
Branch: master [2f802d95b] 2016-12-22 09:48:55 -0800
Branch: REL9_6_STABLE [51126ccdb] 2016-12-22 09:47:55 -0800
Branch: REL9_5_STABLE [80ca22aa6] 2016-12-22 09:47:46 -0800
Branch: REL9_4_STABLE [76943f54a] 2016-12-22 09:47:36 -0800
Branch: REL9_3_STABLE [9b8507bfa] 2016-12-22 09:47:25 -0800
Branch: REL9_2_STABLE [44de099f8] 2016-12-22 09:46:46 -0800
-->
     <para>Улучшение в <filename>contrib/dblink</filename> передачи сообщений о низкоуровневых ошибках <application>libpq</application>, например, о нехватке памяти (Джо Конвей)</para>
    </listitem>

    <listitem>
<!--
Author: Joe Conway <mail@joeconway.com>
Branch: master [c44486838] 2016-12-22 09:20:35 -0800
Branch: REL9_6_STABLE [150841fb9] 2016-12-22 09:19:34 -0800
Branch: REL9_5_STABLE [d5c05f27a] 2016-12-22 09:19:18 -0800
Branch: REL9_4_STABLE [cb687e0ac] 2016-12-22 09:19:08 -0800
Branch: REL9_3_STABLE [bd46cce21] 2016-12-22 09:18:50 -0800
-->
     <para>Реализация <filename>contrib/dblink</filename> должна игнорировать невоспринимаемые ей параметры сервера, когда в качестве источника параметров подключения используется сторонний сервер <filename>contrib/postgres_fdw</filename> (Кори Хинкер)</para>

     <para>Ранее, если объект стороннего сервера имел параметры, которые не относились к параметрам подключения <application>libpq</application>, происходила ошибка.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: REL9_6_STABLE [4774f6183] 2016-11-04 12:37:29 -0400
Branch: REL9_5_STABLE [56d34ba5f] 2016-11-04 12:37:29 -0400
Branch: master [14ee35799] 2016-11-02 00:09:27 -0400
Branch: REL9_6_STABLE [2a8783e44] 2016-11-02 00:09:28 -0400
Branch: REL9_5_STABLE [af636d7b5] 2016-11-02 00:09:28 -0400
-->
     <para>Исправление проблем с переносимостью в функциях <filename>contrib/pageinspect</filename>, связанных с индексами GIN (Питер Эйзентраут, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [3b790d256] 2016-12-21 11:01:48 -0500
Branch: REL9_6_STABLE [b98e5513f] 2016-12-21 11:11:36 -0500
-->
     <para>Устранение возможной потери событий чтения сокета при ожидании в Windows (Амит Капила)</para>

     <para>Эта ошибка была безвредной при обычном использовании, но, как оказалось, она приводила к повисаниям при попытке воспользоваться расширением pldebugger.</para>
    </listitem>

    <listitem>
<!--
Author: Noah Misch <noah@leadboat.com>
Branch: master [95b9b8a39] 2016-12-03 15:46:36 -0500
Branch: REL9_6_STABLE [784054579] 2016-12-03 15:46:42 -0500
Branch: REL9_5_STABLE [5ab4b2ec4] 2016-12-03 15:46:48 -0500
Branch: REL9_4_STABLE [b45a4949d] 2016-12-03 15:47:18 -0500
Branch: REL9_3_STABLE [6c5d5918b] 2016-12-03 15:47:31 -0500
Branch: REL9_2_STABLE [d83c94292] 2016-12-03 15:47:52 -0500
Branch: master [b37da1e8a] 2016-12-03 15:46:35 -0500
Branch: REL9_6_STABLE [056d62c5e] 2016-12-03 15:46:42 -0500
Branch: REL9_5_STABLE [3cb8bdfef] 2016-12-03 15:46:48 -0500
Branch: REL9_4_STABLE [ec7eacfae] 2016-12-03 15:47:12 -0500
Branch: REL9_3_STABLE [4c3505eb4] 2016-12-03 15:47:31 -0500
Branch: REL9_2_STABLE [a9265258a] 2016-12-03 15:47:49 -0500
-->
     <para>В Windows изменённые переменные окружения должны передаваться и отладочным DLL (Кристина Ульрих)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [93513d1b6] 2016-12-15 14:32:42 -0500
Branch: REL9_6_STABLE [6f4d38dbe] 2016-12-15 14:32:58 -0500
Branch: REL9_5_STABLE [492fe48f0] 2016-12-15 14:33:06 -0500
Branch: REL9_4_STABLE [b95f4bf07] 2016-12-15 14:33:10 -0500
Branch: REL9_3_STABLE [ccf24539b] 2016-12-15 14:33:14 -0500
Branch: REL9_2_STABLE [2b7d715c0] 2016-12-15 14:33:19 -0500
Branch: master [32416b0f9] 2016-11-06 10:45:58 -0500
Branch: REL9_6_STABLE [20559a854] 2016-11-06 10:46:08 -0500
Branch: REL9_5_STABLE [6e377ef0c] 2016-11-06 10:46:14 -0500
Branch: REL9_4_STABLE [6651ab058] 2016-11-06 10:46:21 -0500
Branch: REL9_3_STABLE [3a8f24abd] 2016-11-06 10:46:27 -0500
Branch: REL9_2_STABLE [6653dbafd] 2016-11-06 10:46:34 -0500
Branch: master [1f87181e1] 2016-11-03 22:24:34 -0400
Branch: REL9_6_STABLE [7afafe8af] 2016-11-04 10:44:16 -0400
Branch: REL9_5_STABLE [ac6fc1b55] 2016-11-04 10:44:16 -0400
Branch: REL9_4_STABLE [c09478e15] 2016-11-04 10:44:16 -0400
Branch: REL9_3_STABLE [22b1207a3] 2016-11-04 10:44:16 -0400
Branch: REL9_2_STABLE [07bc2fc45] 2016-11-04 10:44:16 -0400
-->
     <para>Синхронизация нашей копии библиотеки timezone с выпущенной IANA версией tzcode2016j (Том Лейн)</para>

     <para>Это решило ряд проблем; в частности, проблему при установке данных о часовых поясах в каталог, в котором не поддерживаются жёсткие ссылки.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [308d86827] 2017-01-30 11:40:22 -0500
Branch: REL9_6_STABLE [6da67b684] 2017-01-30 11:40:39 -0500
Branch: REL9_5_STABLE [4c729f471] 2017-01-30 11:40:46 -0500
Branch: REL9_4_STABLE [a7b5de3ba] 2017-01-30 11:40:54 -0500
Branch: REL9_3_STABLE [2b133be04] 2017-01-30 11:41:02 -0500
Branch: REL9_2_STABLE [ef878cc2c] 2017-01-30 11:41:09 -0500
-->
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016j, включающее изменения правил перехода на летнее время на Северном Кипре (добавление нового пояса Asia/Famagusta), в России (добавление нового пояса Europe/Saratov), в Тонга и в Антарктике/Кейси, плюс корректировку исторических данных для Италии, Казахстана, Мальты и Палестины. Переход к предпочитаемому числовому обозначению пояса для Тонга.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-6-1">
  <title>Выпуск 9.6.1</title>

  <formalpara>
  <title>Дата выпуска:</title>
  <para>2016-10-27</para>
  </formalpara>

  <para>В этот выпуск вошли различные исправления, внесённые после версии 9.6.1. За информацией о нововведениях версии 9.6 обратитесь к <xref remap="3" linkend="release-9-6"/>.</para>

  <sect2>
   <title>Миграция на версию 9.6.1</title>

   <para>Если используется версия 9.6.X, выгрузка/восстановление базы не требуется.</para>

   <para>Однако, если в вашей инсталляции проявились ошибки, описанные в двух первых записях следующего списка изменений, после обновления вам может потребоваться предпринять дополнительные действия для исправления испорченных карт свободного места и/или видимости.</para>
  </sect2>

  <sect2>
   <title>Изменения</title>

   <itemizedlist>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [917dc7d23] 2016-10-19 14:26:05 +0300
Branch: REL9_6_STABLE [142530ef0] 2016-10-19 14:43:34 +0300
Branch: REL9_5_STABLE [b82573d6e] 2016-10-19 15:00:06 +0300
Branch: REL9_4_STABLE [2523bef15] 2016-10-19 15:00:10 +0300
Branch: REL9_3_STABLE [1c02ee314] 2016-10-19 15:00:34 +0300
-->
     <para>Корректировка записи в WAL отметки об очистке карт свободного пространства и видимости (Паван Деоласи, Хейкки Линнакангас)</para>

     <para>Ранее могло получаться так, что эти файлы не восстанавливались корректно при восстановлении после сбоя или оказывались неправильными на резервном сервере. Обращение к недействительному содержимому карты свободного пространства могло повлечь попытки использовать страницы, которые были стёрты из самого отношения, что обычно приводило к ошибкам типа <quote>не удалось прочитать блок <replaceable>XXX</replaceable>: прочитано только 0 из 8192 байт</quote>. Также были возможны нарушения контрольных сумм в карте видимости, при включённом механизме контрольных сумм.</para>

     <para>Процедуры для определения наличия проблемы и её исправления рассматриваются в <ulink url="https://wiki.postgresql.org/wiki/Free_Space_Map_Problems"/>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [5afcd2aa7] 2016-09-30 20:40:55 -0400
Branch: REL9_6_STABLE [b6d906073] 2016-09-30 20:39:06 -0400
-->
     <para>Предупреждение возможного повреждения данных в процессе преобразования программой <application>pg_upgrade</application> карты видимости отношения в формат 9.6 (Том Лейн)</para>

     <para>На машинах с порядком байт от старшего, байты новой карты видимости записывались в неправильном порядке, в результате чего карта оказывалась абсолютно некорректной. В Windows старая карта считывалась в текстовом режиме, что приводило к некорректным результатам, если в карте рядом оказывались байты, представляющие последовательность символов возврат каретки/перевод строки. Последняя ошибка практически всегда должна была приводить к сбою <application>pg_upgrade</application> из-за того, что длина файла с картой оказывалась неверной.</para>

     <para>Если вы используете компьютер с порядок байт от старшего (таковы многие архитектуры не Intel) и применяли <application>pg_upgrade</application> для обновления баз с версии до 9.6, вы должны принять, что все карты видимости некорректны и должны быть перестроены. Для этого достаточно аннулировать карты видимости всех отношений с помощью функции <function>pg_truncate_visibility_map()</function> расширения <filename>contrib/pg_visibility</filename>. Более подробную информацию вы можете найти в <ulink url="https://wiki.postgresql.org/wiki/Visibility_Map_Problems"/>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [a6c0a5b6e] 2016-10-23 18:36:13 -0400
Branch: REL9_6_STABLE [c4016fcb1] 2016-10-23 18:36:13 -0400
Branch: REL9_5_STABLE [65d85b8f9] 2016-10-23 18:36:13 -0400
-->
     <para>Предотвращение ошибок сериализации при операции добавлении данных, конфликтующей с собой же, в <command>INSERT ... ON CONFLICT</command> (Томас Мунро, Питер Геохеган)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [d8589946d] 2016-10-17 12:13:16 +0300
Branch: REL9_6_STABLE [a5f0bd77a] 2016-10-17 12:13:35 +0300
-->
     <para>Ликвидация риска использования после освобождения при выполнении агрегатных функций с <literal>DISTINCT</literal> (Питер Геохеган)</para>

     <para>Это могло приводить к отказам или некорректным результатам запросов.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [ac4a9d92f] 2016-10-09 12:49:37 -0400
Branch: REL9_6_STABLE [dca25c256] 2016-10-09 12:49:37 -0400
-->
     <para>Исправление обработки полиморфных агрегатных функций, используемых в качестве оконных (Том Лейн)</para>

     <para>Функции перехода агрегата сообщалось, что её первый аргумент и результат имеют выходной тип агрегата, а не тип состояния. Это приводило к ошибкам или сбоям в функциях перехода, связанных с полиморфными агрегатами.</para>
    </listitem>

    <listitem>
<!--
Author: Stephen Frost <sfrost@snowman.net>
Branch: master [814b9e9b8] 2016-10-03 16:22:57 -0400
Branch: REL9_6_STABLE [190765a05] 2016-10-03 16:23:02 -0400
Branch: REL9_5_STABLE [647a86e37] 2016-10-03 16:23:12 -0400
-->
     <para>Исправление <command>COPY</command> со списком имён столбцов из таблицы, в которой включена защита на уровне строк (Адам Брайтвелл)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [709e461be] 2016-10-20 17:17:50 -0400
Branch: REL9_6_STABLE [033666515] 2016-10-20 17:17:57 -0400
Branch: REL9_5_STABLE [cc0e4c567] 2016-10-20 17:18:01 -0400
Branch: REL9_4_STABLE [adb199711] 2016-10-20 17:18:05 -0400
Branch: REL9_3_STABLE [edb514306] 2016-10-20 17:18:09 -0400
Branch: REL9_2_STABLE [f17c26dbd] 2016-10-20 17:18:14 -0400
-->
     <para>Исправление <command>EXPLAIN</command>, чтобы она выдавала корректный XML, когда параметр <xref linkend="guc-track-io-timing"/> включён (Маркус Винанд)</para>

     <para>Ранее вывод в формате XML содержал синтаксически некорректные теги, как например <literal>&lt;I/O-Read-Time&gt;</literal>. Сейчас выдаётся такой тег: <literal>&lt;I-O-Read-Time&gt;</literal>.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [81e82a2bd] 2016-10-13 19:46:05 -0400
Branch: REL9_6_STABLE [03f2bf70a] 2016-10-13 19:46:06 -0400
Branch: REL9_5_STABLE [3cd504254] 2016-10-13 19:45:58 -0400
-->
     <para>Исправление обновления статистики при <command>TRUNCATE</command> в подготовленной транзакции (Стас Кельвич)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e55a946a8] 2016-10-08 19:29:27 -0400
Branch: REL9_6_STABLE [b605aeba0] 2016-10-08 19:29:27 -0400
Branch: REL9_5_STABLE [d1a9f128d] 2016-10-08 19:29:27 -0400
Branch: REL9_4_STABLE [12230c478] 2016-10-08 19:29:27 -0400
Branch: REL9_3_STABLE [56a047f46] 2016-10-08 19:29:28 -0400
Branch: REL9_2_STABLE [a54faa659] 2016-10-08 19:29:28 -0400
Branch: master [3cca13cbf] 2016-10-13 17:05:14 -0400
Branch: REL9_6_STABLE [f9e8b05e5] 2016-10-13 17:05:14 -0400
Branch: REL9_5_STABLE [3217ac3a9] 2016-10-13 17:05:15 -0400
Branch: REL9_4_STABLE [f2024d59a] 2016-10-13 17:05:15 -0400
Branch: REL9_3_STABLE [f0bf0f233] 2016-10-13 17:05:15 -0400
Branch: REL9_2_STABLE [6f2db29ec] 2016-10-13 17:05:15 -0400
-->
     <para>Исправление ошибок при объединении наследуемых ограничений <literal>CHECK</literal> в процессе создания или изменения структуры таблицы (Том Лейн, Амит Ланготе)</para>

     <para>Теперь одинаковые ограничения <literal>CHECK</literal> могут добавляться в родительскую и дочернюю таблицу в любом порядке. С другой стороны, слияние проверенного ограничения из родительской таблицы с непроверенным (<literal>NOT VALID</literal>) ограничением в дочерней не должно допускаться. Подобным образом, не должно допускаться слияние дочернего ненаследуемого (<literal>NO INHERIT</literal>) ограничения с наследуемым.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6bc811c99] 2016-10-03 16:40:25 -0400
Branch: REL9_6_STABLE [993d94c59] 2016-10-03 16:40:26 -0400
Branch: REL9_5_STABLE [f50fa46cc] 2016-10-03 16:40:27 -0400
-->
     <para>Вывод разумного значения в <structname>pg_settings</structname>.<structfield>unit</structfield> для параметров <varname>min_wal_size</varname> и <varname>max_wal_size</varname> (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9c4cc9e2c] 2016-10-13 00:25:48 -0400
Branch: REL9_6_STABLE [0e9e64c07] 2016-10-13 00:25:28 -0400
-->
     <para>Исправление замены элементов массива в <function>jsonb_set()</function> (Том Лейн)</para>

     <para>Если целью замены был существующий элемент массива JSON, он удалялся, а не заменялся новым.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [6292c2339] 2016-10-23 15:01:24 -0400
Branch: REL9_6_STABLE [5beb73b49] 2016-10-23 15:01:24 -0400
Branch: REL9_5_STABLE [913e7e598] 2016-10-23 15:01:24 -0400
Branch: REL9_4_STABLE [9ec21591f] 2016-10-23 15:01:24 -0400
Branch: REL9_3_STABLE [676c60375] 2016-10-23 15:01:24 -0400
Branch: REL9_2_STABLE [9bc01e7a4] 2016-10-23 15:01:24 -0400
Branch: REL9_1_STABLE [d4fa18a55] 2016-10-23 15:01:24 -0400
Branch: master [8f1fb7d62] 2016-10-23 19:14:32 -0400
Branch: REL9_6_STABLE [fdcee9f1f] 2016-10-23 19:14:32 -0400
Branch: REL9_5_STABLE [beac79369] 2016-10-23 19:14:32 -0400
-->
     <para>Предотвращение очень маловероятного повреждения данных в результате проверки видимости кортежа без удержания блокировки буфера (Томас Мунро, Питер Геохеган, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Alvaro Herrera <alvherre@alvh.no-ip.org>
Branch: master [00f15338b] 2016-10-24 09:45:48 -0300
Branch: REL9_6_STABLE [c8329f934] 2016-10-24 09:46:49 -0300
Branch: REL9_5_STABLE [7a2fa5774] 2016-10-24 09:38:28 -0300
-->
     <para>Сохранение времени фиксирования транзакций после перезагрузки сервера (Жульен Рухо, Крейг Рингер)</para>

     <para>При включённом параметре <xref linkend="guc-track-commit-timestamp"/> старые метки времени фиксации становились недоступными после полной перезагрузки сервера.</para>
    </listitem>

    <listitem>
<!--
Author: Andres Freund <andres@anarazel.de>
Branch: master [61633f790] 2016-10-03 22:11:36 -0700
Branch: REL9_6_STABLE [76c0b73df] 2016-10-03 22:12:31 -0700
Branch: REL9_5_STABLE [ce603a34a] 2016-10-03 22:13:10 -0700
Branch: REL9_4_STABLE [07172b20f] 2016-10-03 22:14:12 -0700
-->
     <para>Исправление логического декодирования WAL в случаях, когда вывод WAL из подтранзакции оказывался слишком большим и вымещался на диск (Андрес Фройнд)</para>
    </listitem>

    <listitem>
<!--
Author: Robert Haas <rhaas@postgresql.org>
Branch: master [308985b0b] 2016-09-28 11:19:46 -0400
Branch: REL9_6_STABLE [32841fa32] 2016-09-28 11:22:39 -0400
-->
     <para>Ликвидация проблемы с недействительным указателем в механизме логического декодирования WAL (Стас Кельвич)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [cb775768e] 2016-10-13 15:06:46 -0400
Branch: REL9_6_STABLE [2dd9e315d] 2016-10-13 15:06:57 -0400
Branch: REL9_5_STABLE [43d17489d] 2016-10-13 15:07:04 -0400
Branch: REL9_4_STABLE [6d3cbbf59] 2016-10-13 15:07:11 -0400
-->
     <para>Округление размера запроса разделяемой памяти до числа, кратного размеру огромной страницы, когда огромные страницы используются в Linux (Том Лейн)</para>

     <para>Это позволяет избежать возможных сбоев в <function>munmap()</function> в системах с нетипичными размерами огромных страниц. За исключением случаев краха, эти сбои проявлялись только в сообщениях в журнале.</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [8bb14cdd3] 2016-10-07 12:20:39 +0300
Branch: REL9_6_STABLE [341acf235] 2016-10-07 12:21:52 +0300
Branch: REL9_5_STABLE [cb38c056f] 2016-10-07 12:22:19 +0300
Branch: REL9_4_STABLE [31895abd8] 2016-10-07 12:22:45 +0300
Branch: REL9_3_STABLE [fde92dc22] 2016-10-07 12:23:06 +0300
Branch: REL9_2_STABLE [e7bb327e3] 2016-10-07 12:23:58 +0300
Branch: REL9_1_STABLE [e76d06d7f] 2016-10-07 12:23:52 +0300
Branch: master [275bf9860] 2016-10-07 12:51:52 +0300
Branch: REL9_6_STABLE [4d3ecbfee] 2016-10-07 12:53:40 +0300
Branch: REL9_5_STABLE [f0ca54037] 2016-10-07 12:53:42 +0300
Branch: REL9_4_STABLE [418cd758a] 2016-10-07 12:53:45 +0300
Branch: REL9_3_STABLE [b5afc6f67] 2016-10-07 12:53:47 +0300
Branch: REL9_2_STABLE [5d5dc6f68] 2016-10-07 12:53:49 +0300
Branch: REL9_1_STABLE [e84e4761f] 2016-10-07 12:53:51 +0300
-->
     <para>Не пытаться разделять контекст SSL между несколькими подключениями в <application>libpq</application> (Хейкки Линнакангас)</para>

     <para>Такое разделение приводило к разнообразным ошибкам, особенно при попытке использования различных параметров SSL для разных соединений.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [886f6c5cc] 2016-10-10 10:35:58 -0400
Branch: REL9_6_STABLE [bb211b66f] 2016-10-10 10:35:58 -0400
Branch: REL9_5_STABLE [4f87f7640] 2016-10-10 10:35:58 -0400
Branch: REL9_4_STABLE [eb6bc03bf] 2016-10-10 10:35:58 -0400
Branch: REL9_3_STABLE [455eaf984] 2016-10-10 10:35:58 -0400
Branch: REL9_2_STABLE [7397f62e7] 2016-10-10 10:35:58 -0400
Branch: REL9_1_STABLE [fb6825fe5] 2016-10-10 10:35:58 -0400
-->
     <para>Предотвращение утечек памяти в особых случаях в <application>libpq</application> (Том Лейн)</para>

     <para>Поступило сообщение об утечке в процессе <function>PQreset()</function>, но были возможны проявления и в связанных случаях.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [83c249200] 2016-10-03 10:07:49 -0400
Branch: REL9_6_STABLE [bac56dbe0] 2016-10-03 10:07:39 -0400
Branch: REL9_5_STABLE [0f259bd17] 2016-10-03 10:07:39 -0400
-->
     <para>В <application>pg_upgrade</application> проверка загружаемости библиотек должна производиться по порядку имён (Том Лейн)</para>

     <para>Это обходное решение проблемы зависимостей между расширениями, образуемых связями модулей трансформации языков с базовыми модулями самих языков и типов данных.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [e8bdee277] 2016-10-02 14:31:28 -0400
Branch: REL9_6_STABLE [f40334b85] 2016-10-02 14:31:28 -0400
-->
     <para>Исправление <application>pg_upgrade</application> для корректной работы с расширениями, содержащими методы доступа индексов (Том Лейн)</para>

     <para>Чтобы это было возможно, для сервера была добавлена поддержка команды <command>ALTER EXTENSION ADD/DROP ACCESS METHOD</command>. Эта функциональность должна была добавляться в изначальной доработке, реализующей динамическое создание методов доступа, но этого не произошло по упущению.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [f002ed2b8] 2016-09-30 20:40:56 -0400
Branch: REL9_6_STABLE [53fbeed40] 2016-09-30 20:40:27 -0400
-->
     <para>Улучшение вывода ошибок в <application>pg_upgrade</application> при копировании/создании ссылок/перезаписи (Том Лейн, Альваро Эррера)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [4806f26f9] 2016-10-07 09:51:18 -0400
Branch: REL9_6_STABLE [1749332ec] 2016-10-07 09:51:28 -0400
-->
     <para>Исправление <application>pg_dump</application> для поддержки серверов версий до 7.4 (Амит Ланготе, Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [0d4d7d618] 2016-10-07 14:35:17 +0300
Branch: REL9_6_STABLE [2933ed036] 2016-10-07 14:35:41 +0300
Branch: REL9_5_STABLE [010a1b561] 2016-10-07 14:35:45 +0300
-->
     <para>Недопущение одновременного указания аргументов <option>--source-server</option> и <option>--source-target</option> для <application>pg_rewind</application> (Михаэль Банк)</para>
    </listitem>

    <listitem>
<!--
Author: Heikki Linnakangas <heikki.linnakangas@iki.fi>
Branch: master [d7eb76b90] 2016-10-06 13:24:46 +0300
Branch: REL9_6_STABLE [aab809664] 2016-10-06 13:34:38 +0300
Branch: REL9_5_STABLE [69da71254] 2016-10-06 13:34:32 +0300
-->
     <para>Программа <application>pg_rewind</application> должна отключать <varname>synchronous_commit</varname> в своём сеансе на исходном сервере (Михаэль Банк, Мишель Пакье)</para>

     <para>При этом <application>pg_rewind</application> сможет работать, даже когда на исходном сервере настроена синхронная репликация, но она по какой-то причине не функционирует.</para>
    </listitem>

    <listitem>
<!--
Author: Magnus Hagander <magnus@hagander.net>
Branch: master [3d39244e6] 2016-09-30 11:22:00 +0200
Branch: REL9_6_STABLE [41d58e97a] 2016-09-30 11:22:20 +0200
Branch: REL9_5_STABLE [d8b4c3490] 2016-09-30 11:22:32 +0200
Branch: REL9_4_STABLE [da3f71a08] 2016-09-30 11:22:49 +0200
Branch: REL9_3_STABLE [4bff35cca] 2016-09-30 11:23:25 +0200
-->
     <para>В <application>pg_xlogdump</application> нужно повторять попытку открыть новый сегмент WAL, когда используется параметр <option>--follow</option> (Магнус Хагандер)</para>

     <para>Это позволяет справиться с возможной задержкой при создании сервером следующего сегмента.</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [9a109452d] 2016-10-01 16:32:54 -0400
Branch: REL9_6_STABLE [f4e787c82] 2016-10-01 16:32:55 -0400
-->
     <para>Исправление в <filename>contrib/pg_visibility</filename>, чтобы выдавался корректный TID испорченного кортежа (ранее TID мог выдаваться некорректно вследствие изменения, впоследствии отменённого) (Том Лейн)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [7107d58ec] 2016-10-01 13:35:13 -0400
Branch: REL9_6_STABLE [68fb75e10] 2016-10-01 13:35:20 -0400
-->
     <para>Исправление зависимостей в makefile, чтобы параллельная сборка <application>PL/Python</application> сама по себе выполнялась надёжно (Павел Райскуп)</para>
    </listitem>

    <listitem>
<!--
Author: Tom Lane <tgl@sss.pgh.pa.us>
Branch: master [5e21b6811] 2016-10-20 15:40:07 -0400
Branch: REL9_6_STABLE [845a8ea3e] 2016-10-20 15:40:14 -0400
Branch: REL9_5_STABLE [aac898ac5] 2016-10-20 15:40:18 -0400
Branch: REL9_4_STABLE [a8518738a] 2016-10-20 15:40:22 -0400
Branch: REL9_3_STABLE [92da75278] 2016-10-20 15:40:26 -0400
Branch: REL9_2_STABLE [b2aee4cb6] 2016-10-20 15:40:30 -0400
Branch: REL9_1_STABLE [37ecf07d3] 2016-10-20 15:40:34 -0400
Branch: master [d8fc45bd0] 2016-10-20 15:20:11 -0400
Branch: REL9_6_STABLE [80ba149b0] 2016-10-20 15:20:17 -0400
Branch: REL9_5_STABLE [8cddedc17] 2016-10-20 15:20:21 -0400
Branch: REL9_4_STABLE [1d388ba2c] 2016-10-20 15:20:26 -0400
Branch: REL9_3_STABLE [ff68f434f] 2016-10-20 15:20:30 -0400
Branch: REL9_2_STABLE [3c5fae786] 2016-10-20 15:20:35 -0400
Branch: REL9_1_STABLE [9345bf08c] 2016-10-20 15:20:39 -0400
Branch: master [f3094920a] 2016-10-19 18:55:52 -0400
Branch: REL9_6_STABLE [7fec5e101] 2016-10-19 18:55:57 -0400
Branch: REL9_5_STABLE [bc59c1236] 2016-10-19 18:56:01 -0400
Branch: REL9_4_STABLE [381c4b03b] 2016-10-19 18:56:05 -0400
Branch: REL9_3_STABLE [ad6f67179] 2016-10-19 18:56:09 -0400
Branch: REL9_2_STABLE [66adeefda] 2016-10-19 18:56:14 -0400
Branch: REL9_1_STABLE [2877b102e] 2016-10-19 18:56:18 -0400
Branch: master [ecbac3e6e] 2016-10-19 17:56:38 -0400
Branch: REL9_6_STABLE [0c2f4c54c] 2016-10-19 17:56:45 -0400
Branch: REL9_5_STABLE [5508d0c0b] 2016-10-19 17:56:49 -0400
Branch: REL9_4_STABLE [9727dac58] 2016-10-19 17:56:53 -0400
Branch: REL9_3_STABLE [7abda82ef] 2016-10-19 17:56:57 -0400
Branch: REL9_2_STABLE [a03339aef] 2016-10-19 17:57:01 -0400
Branch: REL9_1_STABLE [22cf97635] 2016-10-19 17:57:06 -0400
-->
     <para>Обновление данных часовых поясов до версии <application>tzdata</application> 2016h, включающее изменение правил перехода на летнее время в Палестине и Турции, а также исторические изменения для Турции и некоторых регионов России. Переход к числовым аббревиатурам для некоторых часовых поясов в Антарктике, бывшем Советском Союзе и на Шри-Ланке.</para>

     <para>Ранее в базе данных часовых поясов IANA предоставлялись текстовые аббревиатуры для всех часовых поясов и иногда при этом указывались аббревиатуры, которые практически не употреблялись местным населением. Сейчас происходит процесс ухода от этой практики в пользу использования числовых смещений UTC в тех часовых поясах, где нет никаких свидетельств реального использования английской аббревиатуры. Как минимум на данном этапе, <productname>PostgreSQL</productname> продолжит принимать подобные удалённые аббревиатуры при вводе дат/времени. Но они не будут видны при просмотре представления <structname>pg_timezone_names</structname> и не будут выводиться с датами/временем.</para>

     <para>Начиная с этого выпуска, аббревиатура <literal>AMT</literal> более не считается занятой часовым поясом Армении. Поэтому мы изменили значение этой аббревиатуры по умолчанию, чтобы она обозначала Амазонское время (Amazon Time), так что теперь она означает UTC-4, а не UTC+4.</para>
    </listitem>

   </itemizedlist>

  </sect2>
 </sect1>

 <sect1 id="release-9-6">
  <title>Выпуск 9.6</title>

  <formalpara>
   <title>Дата выпуска:</title>
   <para>2016-09-29</para>
  </formalpara>

  <sect2>
   <title>Обзор</title>

   <para>В число ключевых усовершенствований <productname>PostgreSQL</productname> 9.6 входят:</para>

   <!-- Items in this list summarize one or more items below -->

   <itemizedlist>

    <listitem>
     <para>Параллельное выполнение последовательного сканирования, соединений и агрегатных вычислений</para>
    </listitem>

    <listitem>
     <para>Предупреждение излишнего сканирования страниц при операциях очистки с заморозкой</para>
    </listitem>

    <listitem>
     <para>При синхронной репликации стало возможным использовать несколько резервных серверов для увеличения надёжности</para>
    </listitem>

    <listitem>
     <para>Полнотекстовый поиск теперь позволяет находить фразы (несколько соседних слов)</para>
    </listitem>

    <listitem>
     <para><filename>postgres_fdw</filename> теперь может выполнять на удалённой стороне соединение, сортировку, <command>UPDATE</command> и <command>DELETE</command></para>
    </listitem>

    <listitem>
     <para>Существенное увеличение производительности, особенно в части масштабируемости на многопроцессорных серверах</para>
    </listitem>

   </itemizedlist>

   <para>Предыдущие пункты более подробно описаны в следующих разделах.</para>

  </sect2>

  <sect2>

  <title>Миграция на версию 9.6</title>

   <para>Тем, кто хочет мигрировать данные из любой предыдущей версии, необходимо выполнить выгрузку/загрузку данных с помощью <xref linkend="app-pg-dumpall"/> или воспользоваться <xref linkend="pgupgrade"/>.</para>

   <para>В версии 9.6 реализован ряд изменений, которые могут повлиять на совместимость с предыдущими выпусками. Рассмотрите следующие несовместимые аспекты:</para>

   <itemizedlist>

      <listitem>
<!--
2016-03-10 [53be0b1ad] Provide much better wait information in pg_stat_activity
-->
       <para>Добавление в <link linkend="pg-stat-activity-view"><structname>pg_stat_activity</structname></link> информации о том, чего ждёт процесс (Амит Капила, Ильдус Курбангалиев)</para>

       <para>Исторически процесс показывался как ожидающий, только если он ожидал тяжёлой блокировки. Теперь в <structname>pg_stat_activity</structname> также показываются ожидания лёгких блокировок и закреплений буферов. Также теперь виден тип ожидаемой блокировки. В результате этих изменений столбец <structfield>waiting</structfield> был заменён столбцами <structfield>wait_event_type</structfield> и <structfield>wait_event</structfield>.</para>
      </listitem>

      <listitem>
<!--
2015-10-05 [2d87eedc1] to_char(): Do not count negative sign as a digit for tim
-->
       <para>В функции <link linkend="functions-formatting-table"><function>to_char()</function></link> знак минус не должен считаться частью поля с заданной шириной для компонентов времени (Брюс Момджян)</para>

       <para>Например, <literal>to_char('-4 years'::interval, 'YY')</literal> теперь возвращает <literal>-04</literal>, а не <literal>-4</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-01-21 [647d87c56] Make extract() do something more reasonable with infinit
-->
       <para>Более разумное поведение функции <link linkend="functions-datetime-table"><function>extract()</function></link> с бесконечными значениями в аргументах (Виталий Буровой)</para>

       <para>Ранее функция <function>extract()</function> просто возвращала ноль для аргумента &laquo;бесконечность&raquo;, вне зависимости от выбранного поля. Теперь она будет возвращать <literal>infinity</literal> или <literal>-infinity</literal> соответственно, когда это поле является монотонно возрастающим (например, <literal>year</literal>, <literal>epoch</literal>), и <literal>NULL</literal> в противном случае (например, <literal>day</literal>, <literal>hour</literal>). Также теперь выдаётся ожидаемая ошибка при некорректном указании поля.</para>
      </listitem>

      <listitem>
<!--
2015-09-05 [0426f349e] Rearrange the handling of error context reports.
This commit is also listed under libpq and psql
-->
       <para>Ликвидация <quote>особенности</quote> PL/pgSQL, подавляющей строку <literal>КОНТЕКСТ</literal> в сообщениях, выдаваемых командами <command>RAISE</command> (Павел Стехуле)</para>

       <para>Этот древний трюк для обратной совместимости по общему мнению пережил то время, когда он был полезен.</para>
      </listitem>

      <listitem>
<!--
2016-03-29 [61d66c44f] Fix support of digits in email/hostnames.
-->
       <para>Исправление стандартного анализатора текстового поиска, чтобы он принимал начальные цифры во фрагментах текста типа <literal>email</literal> и <literal>host</literal> (Артур Закиров)</para>

       <para>В большинстве случаев это не должно отразиться на разборе текста, но если вы часто имеете дело с такими адресами, может иметь смысл перестроить зависимые столбцы и индексы <type>tsvector</type>, чтобы адреса этих видов корректно находились при поиске.</para>
      </listitem>

      <listitem>
<!--
2015-09-04 [1bbd52cb9] Make unaccent handle all diacritics known to Unicode, an
2016-03-16 [9a206d063] Improve script generating unaccent rules
-->
       <para>Расширение стандартного файла <filename>unaccent.rules</filename> в модуле <link linkend="unaccent"><filename>contrib/unaccent</filename></link> для обработки всех существующих в Unicode диакритик и корректного разворачивания лигатур (Томас Мунро, Леонард Бенедетти)</para>

       <para>Предыдущая версия не считала нужным преобразовывать некоторые редкие буквы с диакритическими знаками. Кроме того, лигатуры теперь разворачиваются в отдельные буквы. В инсталляциях, где используется этот файл правил, может иметь смысл перестроить столбцы <type>tsvector</type> и зависимые индексы.</para>
      </listitem>

      <listitem>
<!--
2015-10-22 [d371bebd3] Remove redundant CREATEUSER/NOCREATEUSER options in CREA
-->
       <para>Ликвидация давно считавшихся устаревшими указаний <literal>CREATEUSER</literal>/<literal>NOCREATEUSER</literal> команды <command>CREATE ROLE</command> и родственных ей (Том Лейн)</para>

       <para>Указание <literal>CREATEUSER</literal> на самом деле означало <literal>SUPERUSER</literal> из давних соображений относительно обратной совместимости. Это постоянно вводило в заблуждение людей, которые полагали (и имели на это право), что оно означало <literal>CREATEROLE</literal>. Это указание считается устаревшим уже десять лет, так что пора решить эту проблему, убрав его.</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [293007898] Reserve the "pg_" namespace for roles
2016-05-06 [a89505fd2] Remove various special checks around default roles
2016-05-08 [7df974ee0] Disallow superuser names starting with 'pg_' in initdb
-->
       <para>Считать имена ролей, начинающиеся с <literal>pg_</literal>, зарезервированными (Стивен Фрост)</para>

       <para>Теперь пользователям будет запрещено создавать роли с такими именами. Это предотвращает конфликты со встроенными ролями, создаваемыми программой <application>initdb</application>.</para>
      </listitem>

      <listitem>
<!--
2016-08-07 [d8710f18f] Correct column name in information schema
-->
       <para>Смена имени столбца в представлении <structname>information_schema</structname>.<structname>routines</structname> с <structfield>result_cast_character_set_name</structfield> на <structfield>result_cast_char_set_name</structfield> (Клеман Прево)</para>

       <para>Стандарт SQL:2011 устанавливает более длинное имя, но это, скорее всего, ошибка, так как у соседних столбцов имена более краткие, как и в других представлениях <structname>information_schema</structname>.</para>
      </listitem>

      <listitem>
<!--
2015-12-08 [d5563d7df] psql: Support multiple -c and -f options, and allow mixi
-->
       <para>Параметр <application>psql</application> <option>-c</option> теперь не подразумевает поведение параметра <option>--no-psqlrc</option> (Павел Стехуле, Каталин Якоб)</para>

       <para>Для получения старого поведения нужно явно написать <option>--no-psqlrc</option> (или сокращение <option>-X</option>). Модифицированные таким образом скрипты будут продолжать работать и со старыми версиями <application>psql</application>.</para>
      </listitem>

      <listitem>
<!--
2015-07-02 [5671aaca8] Improve pg_restore's -t switch to match all types of rel
-->
       <para>Усовершенствование функции параметра <application>pg_restore</application> <option>-t</option>, чтобы он отбирал все типы отношений, а не только простые таблицы (Крейг Рингер)</para>
      </listitem>

      <listitem>
<!--
2016-02-12 [59a884e98] Change delimiter used for display of NextXID
-->
       <para>Изменение формата отображения <literal>NextXID</literal> в <application>pg_controldata</application> и связанных местах (Джо Конвей, Брюс Момджян)</para>

       <para>Отображение значений эпоха-и-ID-транзакции в формате <replaceable>число</replaceable><literal>:</literal><replaceable>число</replaceable>. Предыдущий формат <replaceable>число</replaceable><literal>/</literal><replaceable>число</replaceable> был похож на формат <acronym>LSN</acronym>, что могло вводить в заблуждение.</para>
      </listitem>

      <listitem>
<!--
2016-06-07 [a89b4b1be] Update citext extension for parallel query.
and many others in the same vein
-->
       <para>Функции расширений, для которых это уместно, помечены как безопасные для распараллеливания (Андреас Карлссон)</para>

       <para>Во многие стандартные расширения внесены изменения, чтобы их функции могли выполняться параллельными исполнителями запросов. Эти изменения не вступят в силу в базах данных, обновлённых с предыдущих версий (с помощью <application>pg_upgrade</application>), пока вы не примените для каждого такого расширения команду <command>ALTER EXTENSION UPDATE</command> (в каждой базе данных кластера).</para>
      </listitem>

   </itemizedlist>

  </sect2>

  <sect2>
   <title>Изменения</title>

   <para>Ниже вы найдёте подробный список изменений, произошедших между предыдущим основным выпуском и выпуском <productname>PostgreSQL</productname> 9.6.</para>

   <sect3>
    <title>Сервер</title>

    <sect4>
     <title>Параллельное выполнение запросов</title>

     <itemizedlist>

      <listitem>
<!--
2015-09-18 [4a4e6893a] Glue layer to connect the executor to the shm_mq mechani
2015-09-23 [a0d9f6e43] Add readfuncs.c support for plan nodes.
2015-09-28 [d1b7c1ffe] Parallel executor support.
2015-09-30 [3bd909b22] Add a Gather executor node.
2015-10-16 [ee7ca559f] Add a C API for parallel heap scans.
2015-10-16 [bfc78d719] Rewrite interaction of parallel mode with parallel execu
2015-10-16 [a53c06a13] Prohibit parallel query when the isolation level is seri
2015-11-02 [1efc7e538] Fix problems with ParamListInfo serialization mechanism.
2015-11-06 [6e71dd7ce] Modify tqueue infrastructure to support transient record
2015-11-11 [f0661c4e8] Make sequential scans parallel-aware.
2015-11-11 [80558c1f5] Generate parallel sequential scan plans in simple cases.
2015-12-09 [b287df70e] Allow EXPLAIN (ANALYZE, VERBOSE) to display per-worker s
2016-01-20 [45be99f8c] Support parallel joins, and make related improvements.
2016-02-03 [69d34408e] Allow parallel custom and foreign scans.
2016-02-07 [a1c1af2a1] Introduce group locking to prevent parallel processes fr
2016-02-07 [7c944bd90] Introduce a new GUC force_parallel_mode for testing purp
2016-02-25 [57a6a72b6] Enable parallelism for prepared statements and extended
2016-02-26 [7bea19d0a] On second thought, disable parallelism for prepared stat
2016-03-21 [e06a38965] Support parallel aggregation.
2016-04-05 [11c8669c0] Add parallel query support functions for assorted aggreg
2016-04-08 [25fe8b5f1] Add a 'parallel_degree' reloption.
2016-04-27 [59eb55127] Fix EXPLAIN VERBOSE output for parallel aggregate.
2016-06-09 [c9ce4a1c6] Eliminate "parallel degree" terminology.
2016-06-16 [75be66464] Invent min_parallel_relation_size GUC to replace a hard-
2016-08-16 [f85b1a841] Disable parallel query by default.
2016-09-15 [72ce78162] Make min_parallel_relation_size's default value platform
-->
       <para>Параллельные запросы (Роберт Хаас, Амит Капила, Дэвид Роули и многие другие)</para>

       <para>С версией 9.6 в <productname>PostgreSQL</productname> появляется начальная поддержка параллельного выполнения больших запросов. Параллельному выполнению подлежат строго запросы только на чтение, в которых производится последовательное сканирование целевой таблицы. В параллельном режиме могут выполняться и соединения по хешу с вложенными циклами, а также агрегирование (с поддерживаемыми агрегатными функциями). Ещё многое предстоит сделать, но и этот набор возможностей уже весьма полезен.</para>

       <para>Параллельное выполнение запросов по умолчанию отключено (пока). Чтобы выключить его, установите для нового конфигурационного параметра <xref linkend="guc-max-parallel-workers-per-gather"/> значение, большее нуля. Для дополнительной настройки распараллеливания запросов также введены новые параметры <xref linkend="guc-force-parallel-mode"/>, <xref linkend="guc-parallel-setup-cost"/>, <xref linkend="guc-parallel-tuple-cost"/> и <xref linkend="guc-min-parallel-relation-size"/>.</para>
      </listitem>

      <listitem>
<!--
2015-09-16 [7aea8e4f2] Determine whether it's safe to attempt a parallel plan f
-->
       <para>Инфраструктура для обозначения параллельно-безопасности функций (Роберт Хаас, Амит Капила)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Индексы</title>

     <itemizedlist>

      <listitem>
<!--
2015-09-02 [30bb26b5e] Allow usage of huge maintenance_work_mem for GIN build.
-->
       <para>Индексы <link linkend="gin"><acronym>GIN</acronym></link> строятся более эффективно при значениях <xref linkend="guc-maintenance-work-mem"/>, превышающих 1 ГБ (Роберт Абрахам, Фёдор Сигаев)</para>
      </listitem>

      <listitem>
<!--
2015-09-07 [e95680832] Add pages deleted from pending list to FSM
2015-09-23 [dc943ad95] Allow autoanalyze to add pages deleted from pending list
-->
       <para>Включение страниц, удаляемых из очереди обработки индекса GIN, сразу в карту свободного пространства (Джефф Джейнс, Фёдор Сигаев)</para>

       <para>Это предотвращает замусоривание базы, если таблица очищается нечасто.</para>
      </listitem>

      <listitem>
<!--
2016-01-28 [7f46eaf03] Add gin_clean_pending_list function to clean up GIN pend
-->
       <para>Добавление функции <link linkend="functions-admin-index"><function>gin_clean_pending_list()</function></link>, позволяющей вручную вызвать очистку очереди обработки индекса GIN (Джефф Джейнс)</para>

       <para>Ранее такая очистка производилась только в результате очистки или анализа родительской таблицы.</para>
      </listitem>

      <listitem>
<!--
2015-09-09 [013ebc0a7] Microvacuum for GIST
2015-09-17 [22f519c92] Fix bug introduced by microvacuum for GiST
-->
       <para>Оптимизация обработки &laquo;мёртвых&raquo; кортежей в индексах <link linkend="gist">GiST</link> (Анастасия Лубенникова)</para>

       <para>Кортежи в индексе теперь помечаются как &laquo;мёртвые&raquo;, если при сканировании индекса обнаруживается, что соответствующий кортеж в куче — &laquo;мёртвый&raquo;. Впоследствии, при добавлении новых кортежей, кортежи, помеченные как &laquo;мёртвые&raquo;, могут быть замещены, если потребуется место на этой странице.</para>
      </listitem>

      <listitem>
<!--
2016-03-30 [acdf2a8b3] Introduce SP-GiST operator class over box.
-->
       <para>Добавлен класс операторов <link linkend="spgist">SP-GiST</link> для типа <type>box</type> (Александр Лебедев)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Сортировка</title>

     <itemizedlist>

      <listitem>
<!--
2016-04-08 [071180377] Use quicksort, not replacement selection, for external s
2016-03-17 [0011c0091] Improve memory management for external sorts.
2016-09-06 [96ba40c0f] Guard against possible memory allocation botch in batchm
-->
       <para>Увеличение производительности сортировки за счёт использования quicksort вместо выбора с замещением при выполнении этапов внешней сортировки (Питер Геохеган)</para>

       <para>Новый подход позволяет эффективнее использовать кеш процессора при типичных размерах кеша и объёмах данных. Где необходимо, новое поведение можно скорректировать, воспользовавшись новым конфигурационным параметром <xref linkend="guc-replacement-sort-tuples"/>.</para>
      </listitem>

      <listitem>
<!--
2015-10-09 [0e57b4d8b] Speed up text sorts where the same strings occur multipl
2015-10-20 [5be94a9eb] Be a bit more rigorous about how we cache strcoll and st
-->
       <para>Ускорение сортировки текста, когда одна и та же строка встречается многократно (Питер Геохеган)</para>
      </listitem>

      <listitem>
<!--
2015-11-06 [a76ef15d9] Add sort support routine for the UUID data type.
2016-02-03 [b47b4dbf6] Extend sortsupport for text to more opclasses.
2016-02-17 [f1f5ec1ef] Reuse abbreviated keys in ordered [set] aggregates.
-->
       <para>Ускорение сортировки типов <type>uuid</type>, <type>bytea</type> и <type>char(n)</type> за счёт использования <quote>сокращённых</quote> ключей (Питер Геохеган)</para>

       <para>Поддержка сокращённых ключей была также добавлена в дополнительные классы операторов <link linkend="indexes-opclass"><literal>text_pattern_ops</literal></link>, <literal>varchar_pattern_ops</literal> и <literal>bpchar_pattern_ops</literal>. Сокращённые ключи теперь могут задействоваться и при вычислении сортирующих агрегатных функций.</para>
      </listitem>

      <listitem>
<!--
2015-12-16 [b648b7034] Speed up CREATE INDEX CONCURRENTLY's TID sort.
-->
       <para>Ускорение команды <command>CREATE INDEX CONCURRENTLY</command> за счёт обработки идентификаторов <acronym>TID</acronym> как 64-битных целых в процессе сортировки (Питер Геохеган)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Блокировки</title>

     <itemizedlist>

      <listitem>
<!--
2015-08-06 [0e141c0fb] Reduce ProcArrayLock contention by removing backends in
2015-09-03 [4aec49899] Assorted code review for recent ProcArrayLock patch.
-->
       <para>Уменьшение конкуренции за <literal>ProcArrayLock</literal> (Амит Капила, Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2015-12-15 [6150a1b08] Move buffer I/O and content LWLocks out of the main tran
-->
       <para>Улучшение производительности за счёт переноса блокировок содержимого буфера в дескрипторы буферов (Андрес Фройнд, Саймон Риггс)</para>
      </listitem>

      <listitem>
<!--
2016-04-10 [48354581a] Allow Pin/UnpinBuffer to operate in a lockfree manner.
-->
       <para>Замена циклических блокировок заголовков в общем буфере атомарными операциями для улучшения масштабируемости (Александр Коротков, Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2016-04-10 [008608b9d] Avoid the use of a separate spinlock to protect a LWLock
-->
       <para>Использование атомарных операций вместо циклических блокировок для защиты очереди ожидания <literal>LWLock</literal> (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2016-03-23 [44ca4022f] Partition the freelist for shared dynahash tables.
-->
       <para>Разбиение на части списка свободных элементов для разделяемых по хешу таблиц, для уменьшения конкуренции на многопроцессорных серверах (Александр Алексеев)</para>
      </listitem>

      <listitem>
<!--
2016-01-09 [687f2cd7a] Avoid pin scan for replay of XLOG_BTREE_VACUUM
2016-04-03 [3e4b7d879] Avoid pin scan for replay of XLOG_BTREE_VACUUM in all ca
-->
       <para>Сокращение взаимоблокировок на резервных серверах при воспроизведении операций очистки индекса-B-дерева (Саймон Риггс)</para>

       <para>Это изменение исключает существенные задержки при репликации, которые иногда имели место при воспроизведении таких операций.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Статистика оптимизатора</title>

     <itemizedlist>

      <listitem>
<!--
2016-04-01 [be4b4dc75] Omit null rows when applying the Haas-Stokes estimator f
2016-04-01 [3d3bf62f3] Omit null rows when setting the threshold for what's a m
2016-04-04 [391159e03] Partially revert commit 3d3bf62f30200500637b24fdb7b992a9
-->
       <para>Улучшение оценок <command>ANALYZE</command> для столбцов с большим количеством NULL (Томаш Вондра, Александр Шульгин)</para>

       <para>Ранее процедура <command>ANALYZE</command> была склонна недооценивать число различных и отличных от <literal>NULL</literal> значений в столбце со множеством <literal>NULL</literal>, и также неточно вычисляла наиболее распространённые значения.</para>
      </listitem>

      <listitem>
<!--
2016-04-04 [84f9a35e3] Improve estimate of distinct values in estimate_num_grou
-->
       <para>Улучшение оценки планировщиком количества различных значений в результате запроса (Томаш Вондра)</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [137805f89] Use Foreign Key relationships to infer multi-column join
2016-06-07 [77ba61080] Revert "Use Foreign Key relationships to infer multi-col
2016-06-18 [100340e2d] Restore foreign-key-aware estimation of join relation si
-->
       <para>Использование связей по внешним ключам для оценки избирательности предикатов соединения (Томаш Вондра, Дэвид Роули)</para>

       <para>Если в таблице <literal>t</literal> имеется ограничение внешнего ключа, например <literal>(a,b) REFERENCES r (x,y)</literal>, то условие <literal>WHERE</literal> вида <literal>t.a = r.x AND t.b = r.y</literal> не может выбрать больше одной строки из <literal>r</literal> для строки <literal>t</literal>. Ранее планировщик считал объединённые <literal>AND</literal> условия независимыми и поэтому часто неправильно оценивал избирательность запроса. Теперь он сравнивает условия <literal>WHERE</literal> с применимыми ограничениями внешнего ключа и получает более точные оценки.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><command>VACUUM</command></title>

     <itemizedlist>

      <listitem>
<!--
2016-03-01 [a892234f8] Change the format of the VM fork to add a second bit per
2016-03-08 [77a1d1e79] Department of second thoughts: remove PD_ALL_FROZEN.
2016-03-10 [fd31cd265] Don't vacuum all-frozen pages.
2016-03-11 [7087166a8] pg_upgrade: Convert old visibility map format to new for
2016-06-17 [ede62e56f] Add VACUUM (DISABLE_PAGE_SKIPPING) for emergencies.
2016-07-18 [eca0f1db1] Clear all-frozen visibilitymap status when locking tuple
2016-08-04 [e7caacf73] Fix hard to hit race condition in heapam's tuple locking
-->
       <para>Предупреждение повторной очистки страниц, содержащих только замороженные кортежи (Масахико Савада, Роберт Хаас, Андрес Фройнд)</para>

       <para>Ранее очистка для предотвращения зацикливания должна была просматривать все страницы таблицы, даже страницы, с которыми ничего не нужно делать. Теперь страницы, содержащие только замороженные кортежи, обозначаются в карте видимости таблицы, и могут быть пропущены при очистке, даже когда она производится в целях предотвращения зацикливания транзакций. Это должно значительно снизить стоимость обслуживания больших таблиц, содержащих в основном постоянные данные.</para>

       <para>Если необходимо, при очистке можно принудительно включить обработку полностью замороженных страниц, передав нововведённый параметр <literal>DISABLE_PAGE_SKIPPING</literal>. Это никогда не нужно делать в обычных условиях, но при повреждении карты видимости это может быть полезно.</para>
      </listitem>

      <listitem>
<!--
2015-12-30 [e84290823] Avoid useless truncation attempts during VACUUM.
-->
       <para>Предупреждение бесполезных попыток усечения кучи в процессе <command>VACUUM</command> (Джефф Джейнс, Том Лейн)</para>

       <para>Это изменение предотвращает исключительную блокировку таблицы в некоторых случаях, когда усечение таблицы невозможно. Прежде всего это полезно тем, что позволяет лишний раз не отменять запросы на резервных серверах.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Общая производительность</title>

     <itemizedlist>

      <listitem>
<!--
2016-04-08 [848ef42bb] Add the "snapshot too old" feature
2016-05-06 [2cc41acd8] Fix hash index vs "snapshot too old" problemms
2016-05-06 [7e3da1c47] Mitigate "snapshot too old" performance regression on NU
2016-08-03 [3e2f3c2e4] Prevent "snapshot too old" from trying to return pruned
2016-08-07 [9ee1cf04a] Fix TOAST access failure in RETURNING queries.
-->
       <para>Возможность аннулирования старых снимков <acronym>MVCC</acronym> после настраиваемого промежутка времени (Кевин Гриттнер)</para>

       <para>Обычно удалённые кортежи не могут быть ликвидированы физически при очистке, пока не будет отработана последняя транзакция, в которой они могут быть видны. Транзакция, остающаяся открытой в течение долгого времени, таким образом может стать причиной значительного замусоривания таблицы, препятствуя освобождению места. Это средство позволяет задать с помощью нового конфигурационного параметра <xref linkend="guc-old-snapshot-threshold"/> ограничение времени, в течение которого снимок <acronym>MVCC</acronym> будет гарантированно актуальным. По истечении этого времени мёртвые кортежи могут быть удалены. Транзакция, использующая просроченный снимок, получит ошибку, если она попытается прочитать страницу, которая могла бы содержать такие данные.</para>
      </listitem>

      <listitem>
<!--
2016-02-11 [d4c3a156c] Remove GROUP BY columns that are functionally dependent
-->
       <para>Игнорирование в <literal>GROUP BY</literal> столбцов, функционально зависящих от других (Дэвид Роули)</para>

       <para>Если в предложение <literal>GROUP BY</literal> включаются все столбцы неотложенного первичного ключа, а также другие столбцы той же таблицы, последние столбцы являются избыточными и могут быть исключены из группировки. Во многих распространённых случаях это упрощает вычисления.</para>
      </listitem>

      <listitem>
<!--
2016-03-31 [f9aefcb91] Support using index-only scans with partial indexes in m
-->
       <para>Возможность использования <link linkend="indexes-index-only-scans">сканирования только индекса</link> с частичным индексом, когда предложение <literal>WHERE</literal> индекса обращается к не индексированным столбцам (Томаш Вондра, Кётаро Хоригути)</para>

       <para>Например, индекс, определённый командой <command>CREATE INDEX tidx_partial ON t(b) WHERE a &gt; 0</command>, теперь может использоваться для сканирования только по индексу в запросе, в котором задаётся условие <literal>WHERE a &gt; 0</literal> и никак больше не задействуется <literal>a</literal>. Ранее это использование не допускалось, на основании того, что <literal>a</literal> не входит в число столбцов индекса.</para>

      </listitem>

      <listitem>
<!--
2016-03-10 [9cd00c457] Checkpoint sorting and balancing.
-->
       <para>Выполнение записи в контрольных точках упорядоченным образом (Фабьен Коэльо, Андрес Фройнд)</para>

       <para>Ранее, в контрольных точках грязные страницы записывались в том порядке, в каком они располагались в общих буферах, то есть практически в случайном. Это влекло снижение производительности, особенно на вращающихся носителях. В результате данного изменения запись в контрольных точках будет производиться по порядку файлов и номеров блоков, и будет сбалансирована по табличным пространствам.</para>
      </listitem>

      <listitem>
<!--
2016-03-10 [428b1d6b2] Allow to trigger kernel writeback after a configurable n
2016-04-13 [fa11a09fe] Fix assorted portability issues with using msync() for d
2016-04-24 [8f91d87d4] Fix documentation & config inconsistencies around 428b1d
2016-04-26 [72a98a639] Don't open formally non-existent segments in _mdfd_getse
2016-05-04 [a71248708] Fix transient mdsync() errors of truncated relations due
2016-02-16 [7975c5e0a] Allow the WAL writer to flush WAL at a reduced rate.
2016-06-10 [4bc0f165c] Change default of backend_flush_after GUC to 0 (disabled
-->
       <para>Там, где возможно, вызывать функцию отложенной записи в ядре после некоторого количества операций записи, во избежание накопления &laquo;грязных&raquo; данных в дисковых буферах ядра (Фабьен Коэльо, Андрес Фройнд)</para>

       <para><productname>PostgreSQL</productname> записывает данные в дисковый кеш ядра, откуда они будут сброшены в физическое хранилище в нужное время. Многие операционные системы не очень эффективно управляют этим, позволяя накапливаться в памяти большим объёмам данным, которые затем приходится сбрасывать на диск одномоментно, что приводит к большим задержкам при очередных операциях ввода/вывода до завершения сброса. Это изменение внесено, чтобы снять эту проблему, явно запрашивая сброс данных через определённый настраиваемый интервал.</para>

       <para>В Linux для этой цели применяется функция <function>sync_file_range()</function>, и так как она практически безвредна, этот механизм задействуется в Linux по умолчанию. Возможность сброса буфера доступна и на других платформах, где имеется функция <function>msync()</function> или <function>posix_fadvise()</function>, но эти функции дают некоторые нежелательные побочные эффекты, поэтому на всех платформах кроме Linux данный механизм по умолчанию отключён.</para>

       <para>Этим поведением управляют новые конфигурационные параметры <xref linkend="guc-backend-flush-after"/>, <xref linkend="guc-bgwriter-flush-after"/>, <xref linkend="guc-checkpoint-flush-after"/> и <xref linkend="guc-wal-writer-flush-after"/>.</para>
      </listitem>

      <listitem>
<!--
2015-08-04 [804163bc2] Share transition state between different aggregates when
-->
       <para>Увеличение производительности агрегатных функций в результате разделения вычислений между несколькими агрегатами, если они имеют одинаковые аргументы и функции перехода (Дэвид Роули)</para>

       <para>Например, в запросе <command>SELECT AVG(x), VARIANCE(x) FROM tab</command> для строки может быть достаточно одной операции для вычисления обоих агрегатов.</para>
      </listitem>

      <listitem>
<!--
2015-08-26 [8a7d07018] Speed up HeapTupleSatisfiesMVCC() by replacing the XID-i
-->
       <para>Ускорение проверок видимости для недавно созданных кортежей путём проверки снимка текущей транзакции, вместо <structname>pg_clog</structname>, для определения, должна ли исходная транзакция считаться зафиксированной (Джефф Джейнс, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2016-02-15 [db76b1efb] Allow SetHintBits() to succeed if the buffer's LSN is ne
-->
       <para>Допущение установки вспомогательных битов кортежей на более раннем этапе (Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2016-01-20 [978b2f65a] Speedup 2PC by skipping two phase state files in normal
2016-03-10 [e0694cf9c] Reduce size of two phase file header
-->
       <para>Увеличение производительности подготовленных транзакций с коротким временем жизни (Стас Кельвич, Саймон Риггс, Паван Деоласи)</para>

       <para>Информация о двухфазной фиксации теперь записывается только в <acronym>WAL</acronym> во время <command>PREPARE TRANSACTION</command> и считывается назад из <acronym>WAL</acronym> во время <command>COMMIT PREPARED</command>, если это имеет место вскоре. Отдельный файл состояния создаётся, только если ожидающая транзакция не фиксируется и не прерывается к моменту следующей контрольной точки.</para>
      </listitem>

      <listitem>
<!--
2015-12-08 [25c539233] Improve performance in freeing memory contexts
-->
       <para>Увеличение скорости уничтожения контекста памяти (Ян Вик)</para>
      </listitem>

      <listitem>
<!--
2016-01-26 [cc988fbb0] Improve ResourceOwners' behavior for large numbers of ow
-->
       <para>Увеличение производительности владельцев ресурсов с большим количеством отслеживаемых объектов (Александр Алексеев)</para>
      </listitem>

      <listitem>
<!--
2016-02-06 [aa2387e2f] Improve speed of timestamp/time/date output functions.
-->
       <para>Увеличение скорости функций вывода типов <type>timestamp</type>, <type>time</type> и <type>date</type> (Дэвид Роули, Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2016-03-10 [37c54863c] Rework wait for AccessExclusiveLocks on Hot Standby
-->
       <para>Недопущение некоторых излишних отмен запросов на серверах горячего резерва при воспроизведении действий, требующих блокировок <literal>AccessExclusive</literal> (Джефф Джейнс)</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [719c84c1b] Extend relations multiple blocks at a time to improve sc
-->
       <para>Расширение отношений на несколько блоков сразу при конкуренции за блокировку расширения отношения (Дилип Кумар)</para>

       <para>Это улучшает масштабируемость и снижает уровень конфликтов.</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [5364b357f] Increase maximum number of clog buffers.
-->
       <para>Увеличение числа буферов clog для лучшей масштабируемости (Амит Капила, Андрес Фройнд)</para>
      </listitem>

      <listitem>
<!--
2015-07-05 [6c82d8d1f] Further reduce overhead for passing plpgsql variables to
-->
       <para>Ускорение вычисления выражений в <application>PL/pgSQL</application> за счёт постоянного хранения в памяти записей <literal>ParamListInfo</literal> для простых переменных (Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-07-06 [4f33621f3] Don't set SO_SNDBUF on recent Windows versions that have
-->
       <para>Недопущение уменьшения значения <literal>SO_SNDBUF</literal> ниже значения по умолчанию в последних версиях Windows (Чен Хуацзюнь)</para>
      </listitem>

      <listitem>
<!--
2016-08-17 [9b33c7e80] Disable update_process_title by default on Windows
-->
       <para>Отключение механизма <xref linkend="guc-update-process-title"/> по умолчанию в Windows (Такаюки Цунакава)</para>

       <para>В Windows издержки изменения заголовка процесса гораздо выше, чем на многих других платформах, и само это изменение менее полезно, так как большинство пользователей Windows не имеют утилит для наблюдения за заголовками процессов.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Наблюдение</title>

     <itemizedlist>

      <listitem>
<!--
2016-03-15 [c16dc1aca] Add simple VACUUM progress reporting.
-->
       <para>Добавление системного представления <link linkend="pg-stat-progress-vacuum-view"><structname>pg_stat_progress_vacuum</structname></link> для наблюдения за процессом выполнения операций <command>VACUUM</command> (Амит Ланготе, Роберт Хаас, Винаяк Покале, Рахила Сьед)</para>
      </listitem>

      <listitem>
<!--
2016-03-05 [dc7d70ea0] Expose control file data via SQL accessible functions.
-->
       <para>Добавление функций <link linkend="functions-controldata"><function>pg_control_system()</function></link>, <function>pg_control_checkpoint()</function>, <function>pg_control_recovery()</function> и <function>pg_control_init()</function>, выдающих поля <filename>pg_control</filename> в <acronym>SQL</acronym> (Джо Конвей, Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2016-02-17 [a5c43b886] Add new system view, pg_config
-->
       <para>Добавление системного представления <link linkend="view-pg-config"><structname>pg_config</structname></link> (Джо Конвей)</para>

       <para>В этом представлении выводится та же информация, что выдаётся утилитой командной строки <application>pg_config</application>, а именно разнообразные конфигурационные параметры времени компиляции <productname>PostgreSQL</productname>.</para>
      </listitem>

      <listitem>
<!--
2015-08-10 [3f811c2d6] Add confirmed_flush column to pg_replication_slots.
-->
       <para>Добавление столбца <structfield>confirmed_flush_lsn</structfield> в системное представление <link linkend="view-pg-replication-slots"><structname>pg_replication_slots</structname></link> (Марко Тииккая)</para>
      </listitem>

      <listitem>
<!--
2016-01-07 [b1a9bad9e] pgstat: add WAL receiver status view & SRF
2016-06-29 [9ed551e0a] Add conninfo to pg_stat_wal_receiver
2016-07-07 [60d50769b] Rename pg_stat_wal_receiver.conn_info to conninfo.
-->
       <para>Добавление системного представления <link linkend="pg-stat-wal-receiver-view"><structname>pg_stat_wal_receiver</structname></link> с информацией о состоянии процесса приёмника <acronym>WAL</acronym> на сервере горячего резерва (Мишель Пакье)</para>
      </listitem>

      <listitem>
<!--
2016-02-22 [52f5d578d] Create a function to reliably identify which sessions bl
-->
       <para>Добавление функции <link linkend="functions-info-session-table"><function>pg_blocking_pids()</function></link> для надёжного определения, какие сеансы блокируют какие (Том Лейн)</para>

       <para>Эта функция возвращает массив идентификаторов процессов всех сеансов, которые блокируют сеанс с заданным идентификатором. Ранее пользователи получали такую информацию, образуя замкнутое соединение с представлением <structname>pg_locks</structname>. Однако сделать это сколь-нибудь корректно слишком сложно, а с внедрением параллельных запросов старый подход стал полностью непрактичным, так как блокировки могут удерживаться или запрашиваться дочерними рабочими процессами, а не главным обслуживающим процессом сеанса.</para>
      </listitem>

      <listitem>
<!--
2016-01-12 [e63bb4549] Add new user fn pg_current_xlog_flush_location()
-->
       <para>Добавление функции <link linkend="functions-admin-backup-table"><function>pg_current_xlog_flush_location()</function></link> для вывода текущей позиции сброшенной записи в журнале транзакции (Томаш Вондра)</para>
      </listitem>

      <listitem>
<!--
2015-07-17 [a04bb65f7] Add new function pg_notification_queue_usage.
-->
       <para>Добавление функции <link linkend="functions-info-session-table"><function>pg_notification_queue_usage()</function></link>, показывающей, насколько заполнена очередь <command>NOTIFY</command> (Брендан Юрд)</para>
      </listitem>

      <listitem>
<!--
2015-08-25 [7b5ef8f2d] Limit the verbosity of memory context statistics dumps.
-->
       <para>Ограничение подробностей при выводе статистики использования контекстов памяти (Том Лейн)</para>

       <para>Информация об использовании памяти, выводимая в протокол главного сервера при нехватке памяти, теперь включает итоговую статистику при большом числе контекстов памяти, вместо одного объёмного отчёта. Также в неё теперь входит итоговая строка <quote>Всего</quote>.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title><acronym>Аутентификация</acronym></title>

     <itemizedlist>

      <listitem>
<!--
2016-04-08 [34c33a1f0] Add BSD authentication method.
-->
       <para>Добавление <link linkend="auth-bsd">метода аутентификации <acronym>BSD</acronym></link>, позволяющего использовать для проверки подлинности клиентов <productname>PostgreSQL</productname> системную службу аутентификации <systemitem class="osname">BSD</systemitem> (Мариса Емерсон)</para>

       <para>Аутентификация BSD в настоящее время поддерживается только в <systemitem class="osname">OpenBSD</systemitem>.</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [2f1d2b7a7] Set PAM_RHOST item for PAM authentication
-->
       <para>Когда используется <link linkend="auth-pam">аутентификация <acronym>PAM</acronym></link>, через поле <literal>PAM_RHOST</literal> модулям <acronym>PAM</acronym> может выдаваться IP-адрес или имя компьютера клиента (Гжегож Сампольски)</para>
      </listitem>

      <listitem>
<!--
2016-01-07 [5e0b5dcab] Provide more detail in postmaster log for password authe
-->
       <para>Добавление вывода в протокол сервера сообщений о дополнительных типах ошибок при проверке пароля (Том Лейн)</para>

       <para>Теперь в случае любых ошибок, которые обычно могут возникать, в протокол должны выдаваться сообщения уровня <literal>ПОДРОБНО</literal>.</para>
      </listitem>

      <listitem>
<!--
2015-09-06 [643beffe8] Support RADIUS passwords up to 128 characters
-->
       <para>Поддержка <link linkend="auth-radius">паролей <acronym>RADIUS</acronym></link> длиной до 128 символов (Марко Тииккая)</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [35e2e357c] Add authentication parameters compat_realm and upn_usena
-->
       <para>Добавление новых параметров <link linkend="sspi-auth">аутентификации <acronym>SSPI</acronym></link> <varname>compat_realm</varname> и <varname>upn_username</varname>, позволяющих выбрать, как при проверке подлинности <acronym>SSPI</acronym> будут использоваться имена области и пользователя (<productname>NetBIOS</productname> или <productname>Kerberos</productname>) (Кристиан Ульрих)</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Настройка сервера</title>

     <itemizedlist>

      <listitem>
<!--
2016-03-16 [c6dda1f48] Add idle_in_transaction_session_timeout.
-->
       <para>Возможность автоматического завершения сеансов, которые находятся в состоянии простоя в транзакции слишком долго (Вик Фиринг)</para>

       <para>Данное поведение настраивается новым конфигурационным параметром <xref linkend="guc-idle-in-transaction-session-timeout"/>. Это помогает бороться с забытыми транзакциями, которые могут удерживать блокировки или мешать производить очистку в течение длительного времени.</para>
      </listitem>

      <listitem>
<!--
2016-09-11 [f2dba881a] Raise max setting of checkpoint_timeout to 1d
-->
       <para>Увеличение максимально допустимого значения <xref linkend="guc-checkpoint-timeout"/> до 24 часов (Саймон Риггс)</para>
      </listitem>

      <listitem>
<!--
2015-09-08 [1aba62ec6] Allow per-tablespace effective_io_concurrency
-->
       <para>Возможность устанавливать <varname>effective_io_concurrency</varname> для табличного пространства; это полезно в случаях, когда различные табличные пространства имеют разные характеристики ввода/вывода (Жульен Рухо)</para>
      </listitem>

      <listitem>
<!--
2015-09-07 [f828654e1] Add log_line_prefix option 'n' for Unix epoch.
2015-09-07 [b1e1862a1] Coordinate log_line_prefix options 'm' and 'n' to share
-->
       <para>Добавление в <xref linkend="guc-log-line-prefix"/> спецкода <literal>%n</literal> для вывода текущего времени в формате Unix, с миллисекундами (Томаш Вондра, Джефф Дэвис)</para>
      </listitem>

      <listitem>
<!--
2016-03-16 [f4c454e9b] Add syslog_sequence_numbers parameter
2016-03-16 [fc201dfd9] Add syslog_split_messages parameter
-->
       <para>Добавление конфигурационных параметров <xref linkend="guc-syslog-sequence-numbers"/> и <xref linkend="guc-syslog-split-messages"/> для дополнительной манипуляции форматом сообщений при выводе их в <systemitem>syslog</systemitem> (Питер Эйзентраут)</para>
      </listitem>

      <listitem>
<!--
2016-03-18 [b555ed810] Merge wal_level "archive" and "hot_standby" into new nam
-->
       <para>Объединение значений <literal>archive</literal> и <literal>hot_standby</literal> конфигурационного параметра <xref linkend="guc-wal-level"/> в одном новом значении <literal>replica</literal> (Питер Эйзентраут)</para>

       <para>Различать эти варианты больше не имеет смысла, и их слияние является шагом вперёд к запланированному упрощению организации репликации. Старые варианты по-прежнему принимаются, но внутри преобразуются к <literal>replica</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-02-02 [7d17e683f] Add support for systemd service notifications
-->
       <para>Добавление в configure параметра <option>--with-systemd</option>, позволяющего вызывать <function>sd_notify()</function> при запуске и остановке сервера (Питер Эйзентраут)</para>

       <para>Это позволяет использовать единицы служб <application>systemd</application> типа <literal>notify</literal>, что значительно упрощает управление <productname>PostgreSQL</productname> в окружении <application>systemd</application>.</para>
      </listitem>

      <listitem>
<!--
2016-03-19 [9a83564c5] Allow SSL server key file to have group read access if o
-->
       <para>Теперь к файлу <acronym>SSL</acronym>-ключа сервера может быть разрешён доступ группы на чтение, если он принадлежит пользователю <literal>root</literal> (Кристоф Берг)</para>

       <para>Ранее мы настаивали на том, чтобы файл ключа принадлежал пользователю, запускающему сервер <productname>PostgreSQL</productname>, но это оказалось неудобным в некоторых системах (например, в <systemitem class="osname">Debian</systemitem>), в которых организовано централизованное управление сертификатами. Поэтому стоит допустить случай, когда файл принадлежит <literal>root</literal>, а группа имеет доступ на чтение. И в этом случае администратор отвечает за то, чтобы в эту группу не входили недоверенные пользователи.</para>
      </listitem>

     </itemizedlist>

    </sect4>

    <sect4>
     <title>Надёжность</title>

     <itemizedlist>

      <listitem>
<!--
2015-11-12 [ac1d7945f] Make idle backends exit if the postmaster dies.
-->
       <para>Принудительное завершение обслуживающих процессов в случае отключения главного процесса (Раджив Растоги, Роберт Хаас)</para>

       <para>При нормальных обстоятельствах главный процесс всегда должен жить дольше своих дочерних процессов. Если же он по какой-то причине умирает, процессы, обслуживающие клиентов, принудительно завершаются с ошибкой. Ранее работающие процессы продолжали выполняться до отключения клиента; но это было небезопасно и неэффективно. Это также не давало запустить новый управляющий процесс до завершения последнего из старых обслуживающих процессов. Теперь обслуживающие процессы будут проверять, жив ли главный процесс, ожидая ввода/вывода от клиента, так что они завершатся не мгновенно, но это должно произойти не позже завершения текущего запроса.</para>
      </listitem>

      <listitem>
<!--
2016-04-07 [fcff8a575] Detect SSI conflicts before reporting constraint violati
-->
       <para>Проверка конфликтов сериализуемости перед тем, как будет выдана ошибка нарушения ограничений (Томас Мунро)</para>

       <para>В транзакциях сериализуемого уровня изоляции желательно, чтобы ошибка, вызванная параллельными транзакциями, заявлялась как ошибка сериализации, что скажет приложению, что попытка повторить то же действие может быть успешной. К сожалению, это не будет надёжно работать при дублировании ключа при параллельном его добавлении. В результате этого изменения такая ошибка будет выдаваться как ошибка сериализации, если приложение явно проверяет присутствие конфликтующего ключа (и не находит его) до этого в транзакции.</para>
      </listitem>

      <listitem>
<!--
XXX this is pending backpatch, may need to remove
2016-04-26 [c6ff84b06] Emit invalidations to standby for transactions without x
-->
       <para>Сообщения аннулирования должны записываться в <acronym>WAL</acronym>, даже если они выдаются транзакцией, которой не назначен <acronym>XID</acronym> (Андрес Фройнд)</para>

       <para>Это решает проблемы в особых случаях, когда транзакции на резервных серверах не замечали некоторые изменения, например, создание индексов.</para>
      </listitem>

      <listitem>
<!--
XXX this is pending backpatch, may need to remove
2016-04-28 [e2c79e14d] Prevent multiple cleanup process for pending list in GIN
-->
       <para>Предупреждение одновременной отработки несколькими процессами очереди изменений в индексе <acronym>GIN</acronym> (Фёдор Сигаев, Джефф Джейнс)</para>

       <para>Это допускалось намеренно, но вызывало условия гонки, при которых процедура очистки пропускала записи в индексе, которые нужно было удалить.</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Репликация и восстановление</title>

     <itemizedlist>

      <listitem>
<!--
2016-04-06 [989be0810] Support multiple synchronous standby servers.
2016-04-27 [4c804fbdf] Clean up parsing of synchronous_standby_names GUC variab
2016-04-30 [17d5db352] Remove warning about num_sync being too large in synchro
-->
       <para>Возможность при синхронной репликации задействовать одновременно несколько синхронных резервных серверов (раньше поддерживался только один) (Масахико Савада, Бина Емерсон, Мишель Пакье, Фудзии Масао, Кётаро Хоригути)</para>

       <para>Число резервных серверов, которые должны подтвердить фиксацию, прежде чем она будет считаться завершённой, теперь устанавливается в значении параметра <xref linkend="guc-synchronous-standby-names"/>.</para>
      </listitem>

      <listitem>
<!--
2016-03-29 [314cbfc5d] Add new replication mode synchronous_commit = 'remote_ap
-->
       <para>Добавление нового значения <literal>remote_apply</literal> для конфигурационного параметра <xref linkend="guc-synchronous-commit"/> (Томас Мунро)</para>

       <para>В этом режиме главный сервер ждёт, пока транзакция не будет <emphasis>применена</emphasis> на резервном, а не просто сохранена на диске. Это значит, что можно рассчитывать, что транзакция, запущенная на резервном сервере, будет видеть все изменения, подтверждённые на главном.</para>
      </listitem>

      <listitem>
<!--
2015-08-11 [6fcd88511] Allow pg_create_physical_replication_slot() to reserve W
2015-09-06 [c314ead5b] Add ability to reserve WAL upon slot creation via replic
-->
       <para>Усовершенствование протокола репликации и добавление параметра в функцию <link linkend="functions-replication-table"><function>pg_create_physical_replication_slot()</function></link> для немедленного резервирования <acronym>WAL</acronym> при создании слота репликации (Гуржит Сингх, Мишель Пакье)</para>

       <para>Это позволяет при создании слота репликации гарантировать, что будут доступны все файлы <acronym>WAL</acronym>, нужные для базовой копии.</para>
      </listitem>

      <listitem>
<!--
2015-07-28 [0dc848b03] pg_basebackup: Add -slot option
-->
       <para>Добавление ключа <option>--slot</option> для <link linkend="app-pgbasebackup"><application>pg_basebackup</application></link> (Питер Эйзентраут)</para>

       <para>Это позволяет <application>pg_basebackup</application> использовать слот репликации, созданный для трансляции <acronym>WAL</acronym>. Выбрав тот же слот для обычной потоковой репликации после создания базовой резервной копии, можно запустить новый резервный сервер, не прерывая приём потока.</para>
      </listitem>

      <listitem>
<!--
2016-04-05 [711768546] Implement backup API functions for non-exclusive backups
2016-07-11 [87d84d67b] Fix start WAL filename for concurrent backups from stand
-->
       <para>Доработка функций <link linkend="functions-admin-backup-table"><function>pg_start_backup()</function></link> и <function>pg_stop_backup()</function> для поддержки немонопольного резервного копирования (Магнус Хагандер)</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Запросы</title>

     <itemizedlist>

      <listitem>
<!--
2016-07-26 [d8411a6c8] Allow functions that return sets of tuples to return sim
-->
       <para>Функции, возвращающие наборы кортежей, теперь могут возвращать просто <literal>NULL</literal> (Эндрю Гирт, Том Лейн)</para>

       <para>В контексте <literal>SELECT FROM function(...)</literal> функция, возвращающая набор составных значений, не могла вернуть обычное значение <literal>NULL</literal> в составе набора. Теперь это допускается и такой результат воспринимается как строка с полями <literal>NULL</literal>. Это позволяет избежать ошибок в особых случаях, например, при разворачивании массива составных значений.</para>
      </listitem>

      <listitem>
<!--
2016-08-03 [a3c7a993d] Make INSERT-from-multiple-VALUES-rows handle targetlist
-->
       <para>Полная поддержка указаний индексов массивов и выбора полей в списке целевых столбцов команды <command>INSERT</command> с несколькими строками <literal>VALUES</literal> (Том Лейн)</para>

       <para>Ранее в таких ситуациях возникала ошибка, если один и тот же целевой столбец упоминался более одного раза, например так: <literal>INSERT INTO tab (x[1], x[2]) VALUES (...)</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-03-11 [9118d03a8] When appropriate, postpone SELECT output expressions til
2016-03-25 [d543170f2] Don't split up SRFs when choosing to postpone SELECT out
-->
       <para>Когда уместно, вычисление выходных выражений <command>SELECT</command> откладывается и производится после сортировки <literal>ORDER BY</literal> (Константин Книжник)</para>

       <para>В результате этого изменения изменчивые или дорогостоящие функции в выходном списке выполняются в порядке, установленном предложением <literal>ORDER BY</literal>, и не будут вычисляться лишний раз, когда присутствует предложение <literal>LIMIT</literal>. Ранее эта оптимизация имела место, когда сортировка выполнялась при сканировании индекса или перед соединением слиянием, но не когда она производилась на верхнем уровне запроса.</para>
      </listitem>

      <listitem>
<!--
2016-03-12 [23a27b039] Widen query numbers-of-tuples-processed counters to uint
2016-03-14 [74a379b98] Use repalloc_huge() to enlarge a SPITupleTable's tuple p
-->
       <para>Расширение счётчиков, хранящих число обработанных кортежей, до 64 бит (Андреас Шербаум)</para>

       <para>В результате этого изменения в метках команд, например <command>SELECT</command>, теперь будут корректно выдаваться количества кортежей, превышающие 4 миллиарда. Это также распространяется на команду <command>GET DIAGNOSTICS ... ROW_COUNT</command> в PL/pgSQL.</para>
      </listitem>

      <listitem>
<!--
2015-11-28 [8d32717b6] Avoid doing encoding conversions by double-conversion vi
-->
       <para>Уход от преобразования некоторых кодировок через кодировку <literal>MULE_INTERNAL</literal> (Том Лейн)</para>

       <para>Ранее преобразования кириллических и центральноевропейских однобайтовых кодировок зачастую выполнялись путём перевода в связанную схему <literal>MULE_INTERNAL</literal>, и только затем в целевую кодировку. Помимо того, что это неэффективно, это означает, что при обнаружении непереводимого символа будет выдано некорректное сообщение об ошибке преобразования в/из кодировки <literal>MULE_INTERNAL</literal>, а не кодировки, видимой пользователю.</para>
      </listitem>

      <listitem>
<!--
2016-01-28 [fbe5a3fb7] Only try to push down foreign joins if the user mapping
2016-07-15 [45639a052] Avoid invalidating all foreign-join cached plans when us
-->
       <para>Допускать удалённое соединение сторонних таблиц, только если к ним обращается одна и та же роль (Шигеру Ханада, Ашутош Бапат, Эцуро Фудзита)</para>

       <para>Ранее инфраструктура вынесения соединений наружу доверяла заботу о безопасности целиком обёрткам сторонних данных, но при этом в обёртке слишком легко могли непреднамеренно образовываться неочевидные уязвимости. Поэтому решено было в коде ядра определять, какая роль обращается к каждой таблице, и пытаться выносить соединение наружу, только если это одна роль для всех задействованных отношений.</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Служебные команды</title>

     <itemizedlist>

      <listitem>
<!--
2015-11-27 [92e38182d] COPY (INSERT/UPDATE/DELETE .. RETURNING ..)
-->
       <para>Поддержка в <command>COPY</command> копирования вывода запроса <literal>INSERT</literal>/<literal>UPDATE</literal>/<literal>DELETE</literal> ... <literal>RETURNING</literal> (Марко Тииккая)</para>

       <para>Ранее для этого приходилось создавать промежуточные <acronym>CTE</acronym> (общие табличные выражения).</para>
      </listitem>

      <listitem>
<!--
2016-04-05 [f2fcad27d] Support ALTER THING .. DEPENDS ON EXTENSION
-->
       <para>Введение команды <command>ALTER <replaceable>объект</replaceable> DEPENDS ON EXTENSION</command> (Абхиджит Менон-Сен)</para>

       <para>Эта команда позволяет пометить объект базы данных как зависимый от расширения, чтобы он автоматически ликвидировался при удалении расширения (без явного указания <literal>CASCADE</literal>). Но при этом такой объект не будет частью расширения и поэтому <application>pg_dump</application> будет выгружать его отдельно.</para>
      </listitem>

      <listitem>
<!--
2015-11-19 [bc4996e61] Make ALTER .. SET SCHEMA do nothing, instead of throwing
-->
       <para>Команда <command>ALTER <replaceable>объект</replaceable> SET SCHEMA</command> теперь не будет делать ничего, если объект уже относится к заданной схеме, вместо того, чтобы выдавать ошибку, что имело место раньше для большинства типов объектов (Марти Раудсепп)</para>
      </listitem>

      <listitem>
<!--
2015-07-14 [321eed5f0] Add ALTER OPERATOR command, for changing selectivity est
2015-12-31 [0dab5ef39] Fix ALTER OPERATOR to update dependencies properly.
-->
       <para>Добавление в <command>ALTER OPERATOR</command> параметров, позволяющих изменять функции оценки избирательности, связанные с существующим оператором (Юрий Журавлёв)</para>
      </listitem>

      <listitem>
<!--
2015-07-29 [2cd40adb8] Add IF NOT EXISTS processing to ALTER TABLE ADD COLUMN
-->
       <para>Добавление указания <option>IF NOT EXISTS</option> в команду <command>ALTER TABLE ADD COLUMN</command> (Фабрицио де Ройес Мелло)</para>
      </listitem>

      <listitem>
<!--
2015-08-14 [47167b790] Reduce lock levels for ALTER TABLE SET autovacuum storag
2016-03-10 [fcb4bfddb] Reduce lock level for altering fillfactor
-->
       <para>Снижение уровня блокировок, запрашиваемых командой <command>ALTER TABLE</command> при установке фактора заполнения и параметров отношения, связанных с автоочисткой (Фабрицио де Ройес Мелло, Саймон Риггс)</para>
      </listitem>

      <listitem>
<!--
2016-03-23 [473b93287] Support CREATE ACCESS METHOD
-->
       <para>Введение команды <link linkend="sql-create-access-method"><command>CREATE ACCESS METHOD</command></link>, позволяющей расширениям создавать методы доступа индексов (Александр Коротков, Петр Желинек)</para>
      </listitem>

      <listitem>
<!--
2015-10-03 [b67aaf21e] Add CASCADE support for CREATE EXTENSION.
-->
       <para>Добавление указания <literal>CASCADE</literal> для команды <command>CREATE EXTENSION</command>, позволяющего автоматически устанавливать расширения, от которых зависит создаваемое (Петр Желинек)</para>
      </listitem>

      <listitem>
<!--
2015-10-05 [b943f502b] Have CREATE TABLE LIKE add OID column if any LIKEd table
-->
       <para>Команда <command>CREATE TABLE ... LIKE</command> должна включать столбец <type>OID</type>, если он есть в какой-либо из исходных таблиц (Брюс Момджян)</para>
      </listitem>

      <listitem>
<!--
2015-12-16 [f27a6b15e] Mark CHECK constraints declared NOT VALID valid if creat
-->
       <para>Если ограничение <literal>CHECK</literal> объявлено как <literal>NOT VALID</literal> (непроверенное) в команде создания таблицы, оно должно автоматически помечаться как проверенное (Амит Ланготе, Амул Сул)</para>

       <para>Это безопасно, так как в таблице ещё нет строк, и соответствует давно принятому поведению ограничений <literal>FOREIGN KEY</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-03-25 [c94959d41] Fix DROP OPERATOR to reset oprcom/oprnegate links to the
-->
       <para>Исправлена команда <command>DROP OPERATOR</command>; она должна очищать ссылки на удаляемый оператор <structname>pg_operator</structname>.<structfield>oprcom</structfield> и <structname>pg_operator</structname>.<structfield>oprnegate</structfield> (Рома Соколов)</para>

       <para>Ранее эти ссылки оставлялись как есть, что было чревато проблемами в довольно маловероятных случаях повторного использования <type>OID</type> удалённого оператора другим оператором.</para>
      </listitem>

      <listitem>
<!--
2016-07-11 [4d042999f] Print a given subplan only once in EXPLAIN.
-->
       <para>Один и тот же подплан не должен выдаваться дважды в выводе <command>EXPLAIN</command> (Том Лейн)</para>

       <para>В некоторых случаях, обычно с узлами SubPlan в условиях индексов, команда <command>EXPLAIN</command> выводила данные одного и того же подплана дважды.</para>
      </listitem>

      <listitem>
<!--
2016-04-16 [c34df8a00] Disallow creation of indexes on system columns (except f
-->
       <para>Запрет создания индексов по системным столбцам, за исключением <type>OID</type> (Дэвид Роули)</para>

       <para>Такие индексы никогда не считались поддерживаемыми и провоцировали некорректное поведение, так как система могла менять значения системных столбцов, не обновляя индексы. Однако ранее отсутствовали проверки, которые бы мешали их создавать.</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Управление разрешениями</title>

    <itemizedlist>

      <listitem>
<!--
2016-04-06 [1574783b4] Use GRANT system to manage access to sensitive functions
-->
       <para>Использование системы прав для управления доступом к важным функциям (Стивен Фрост)</para>

       <para>Ранее многие требующие ограниченного доступа функции содержали жёстко зашитые проверки, которые выдавали ошибки, если эти функции пытался выполнять не суперпользователь. Это вынуждало применять роли суперпользователей для выполнения и некоторых заурядных задач. Теперь эти проверки ушли, вместо этого <application>initdb</application> отзывает у роли public право на выполнение (<literal>EXECUTE</literal>) этих функций. Это позволяет на местах дать право использовать их доверенным ролям, которым не нужны все полномочия суперпользователей.</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [7a542700d] Create default roles
-->
       <para>Создание нескольких <link linkend="default-roles">встроенных ролей</link>, используя которые можно давать доступ к операциям, ранее доступным только суперпользователям (Стивен Фрост)</para>

       <para>В настоящее время есть только одна такая роль, <literal>pg_signal_backend</literal>, но в дальнейшем ожидается добавление других ролей.</para>
      </listitem>

    </itemizedlist>

   </sect3>

   <sect3>
    <title>Типы данных</title>

    <itemizedlist>

      <listitem>
<!--
2016-04-07 [bb140506d] Phrase full text search.
2016-06-27 [028350f61] Make exact distance match for FTS phrase operator
2016-06-27 [3dbbd0f02] Do not fallback to AND for FTS phrase operator.
2016-06-27 [6734a1cac] Change predecence of phrase operator.
-->
       <para>Усовершенствование <link linkend="textsearch">полнотекстового поиска</link>; поддержка поиска фраз, то есть лексем, встречающихся рядом в определённом порядке, либо с заданным расстоянием между ними (Фёдор Сигаев, Олег Бартунов, Дмитрий Иванов)</para>

       <para>Запрос поиска фразы может быть записан в значении <type>tsquery</type> с использованием новых операторов <literal>&lt;-&gt;</literal> и <literal>&lt;<replaceable>N</replaceable>&gt;</literal>. Первая запись означает, что лексемы до и после неё должны находиться рядом и в заданном порядке. Вторая запись означает, что они могут быть разделены ровно <replaceable>N</replaceable> лексемами.</para>
      </listitem>

      <listitem>
<!--
2015-12-22 [6efbded6e] Allow omitting one or both boundaries in an array slice
-->
       <para>Возможность записать указание среза массива без одной или двух границ, например, <literal>array_col[3:]</literal> (Юрий Журавлёв)</para>

       <para>Опущенные границы воспринимаются как значения верхнего или нижнего предела соответствующей позиции в массиве. Это позволяет упростить запись срезов во многих распространённых ситуациях.</para>
      </listitem>

      <listitem>
<!--
2016-03-16 [a70e13a39] Be more careful about out-of-range dates and timestamps.
-->
       <para>Более аккуратное обращение с датами и временем за пределами допустимого диапазона (Виталий Буровой)</para>

       <para>Это изменение предотвращает неожиданные ошибки выхода за пределы диапазона для значений дата/время с часовым поясом, очень близких к предельным значениям реализации. Ранее <quote>одно и то же</quote> значение могло быть принято или нет, в зависимости от значения параметра <varname>timezone</varname> (часового пояса), и как следствие, ранее выгруженные данные могли не загружаться из-за значений, который до этого считались приемлемыми. Теперь границы проверяются по <acronym>UTC</acronym>, а не по местному часовому поясу, так что эта проверка не зависит от значения <varname>timezone</varname>.</para>

       <para>Также <productname>PostgreSQL</productname> теперь более аккуратно выявляет переполнение при вычислениях новых значений даты или даты/времени, таких как <type>date</type> <literal>+</literal> <type>integer</type>.</para>
      </listitem>

      <listitem>
<!--
2016-03-30 [50861cd68] Improve portability of I/O behavior for the geometric ty
-->
       <para>Обеспечена согласованная обработка значений <literal>infinity</literal> (бесконечность) и <literal>NaN</literal> (не число) в компонентах геометрических типов данных при вводе и выводе (Том Лейн)</para>

       <para>Такие значения теперь всегда будут выводиться как они выводились бы в обычном столбце <type>float8</type>, и таким же образом будут вводиться. Предыдущее поведение зависело от платформы.</para>
      </listitem>

      <listitem>
<!--
2016-03-04 [d78a7d9c7] Improve support of Hunspell in ispell dictionary.
2016-03-11 [8829af47e] Fix merge affixes for numeric ones
2016-03-17 [f4ceed6ce] Improve support of Hunspell
-->
       <para>Добавление в словарь <link linkend="textsearch-ispell-dictionary"><literal>ispell</literal></link> поддержки дополнительных языков и современного формата файлов <productname>Hunspell</productname> (Артур Закиров)</para>
      </listitem>

      <listitem>
<!--
2015-10-30 [12c9a0400] Implement lookbehind constraints in our regular-expressi
-->
       <para>Реализация условий с просмотром назад в <link linkend="functions-posix-regexp">регулярных выражениях</link> (Том Лейн)</para>

       <para>Условие с просмотром назад похоже на условие с просмотром вперёд тем, что оно не вбирает текст; оно проверяет наличие (или отсутствие) соответствия, заканчивающегося в текущей позиции в строке, а не начинающегося с текущей позиции. Это поддерживают и многие другие исполнители регулярных выражений.</para>
      </listitem>

      <listitem>
<!--
2015-09-16 [b44d92b67] Sync regex code with Tcl 8.6.4.
-->
       <para>Если в регулярных выражениях предположительно трёхсимвольное восьмеричное значение <literal>\</literal><replaceable>nnn</replaceable> превосходит 377 (255 в десятичном виде), должно считываться только двухсимвольное восьмеричное значение (Том Лейн)</para>

       <para>Это поведение соответствует тому, что наблюдается в текущих версиях <application>Tcl</application>.</para>
      </listitem>

      <listitem>
<!--
2015-11-07 [c5e86ea93] Add "xid <> xid" and "xid <> int4" operators.
-->
       <para>Добавление операторов для идентификаторов транзакций <type>xid</type> <literal>&lt;&gt;</literal> <type>xid</type> и <type>xid</type> <literal>&lt;&gt;</literal> <type>int4</type>, для согласованности с соответствующими операторами равенства (Мишель Пакье)</para>
      </listitem>

    </itemizedlist>

   </sect3>

   <sect3>
    <title>Функции</title>

     <itemizedlist>

      <listitem>
<!--
2016-04-06 [0b62fd036] Add jsonb_insert
-->
       <para>Добавление функции <link linkend="functions-json-processing-table"><function>jsonb_insert()</function></link> для вставки нового элемента в массив <type>jsonb</type> или ранее не существовавшего ключа в объект <type>jsonb</type> (Дмитрий Долгов)</para>
      </listitem>

      <listitem>
<!--
2015-11-14 [7d9a4737c] Improve type numeric's calculations for ln(), log(), exp
2016-05-05 [18a02ad2a] Fix corner-case loss of precision in numeric pow() calcu
-->
       <para>Увеличение точности функций <function>ln()</function>, <function>log()</function>, <function>exp()</function> и <function>pow()</function> для типа <type>numeric</type> (Дин Рашид)</para>
      </listitem>

      <listitem>
<!--
2016-01-05 [abb173392] Add scale(numeric)
-->
       <para>Добавление функции <link linkend="functions-math-func-table"><function>scale(numeric)</function></link>, выдающей масштаб значения <type>numeric</type> (Марко Тииккая)</para>
      </listitem>

      <listitem>
<!--
2016-01-22 [e1bd684a3] Add trigonometric functions that work in degrees.
-->
       <para>Добавление тригонометрических функций, работающих с градусами (Дин Рашид)</para>

       <para>Например, <link linkend="functions-math-trig-table"><function>sind()</function></link> воспринимает свой аргумент в градусах, тогда как <function>sin()</function> — в радианах. Эти функции до некоторой степени выдают точный результат для аргументов, для которых его можно ожидать, например, <literal>sind(30) = 0.5</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-01-22 [fd5200c3d] Improve cross-platform consistency of Inf/NaN handling i
-->
       <para>Обработка аргументов <literal>infinity</literal> и <literal>NaN</literal> в тригонометрических функциях по стандарту <acronym>POSIX</acronym> (Дин Рашид)</para>

       <para>Стандарт <acronym>POSIX</acronym> говорит, что эти функции должны возвращать <literal>NaN</literal> для аргумента <literal>NaN</literal> и выдавать ошибку для любых значений вне допустимого диапазона (включая <literal>infinity</literal>). Ранее они вели себя по-разному на разных платформах.</para>
      </listitem>

      <listitem>
<!--
2016-03-29 [e511d878f] Allow to_timestamp(float8) to convert float infinity to
-->
       <para>Функция <link linkend="functions-datetime-table"><function>to_timestamp(float8)</function></link> теперь преобразует <literal>infinity</literal> (бесконечность) в числе с плавающей точкой в <literal>infinity</literal> в дате (Виталий Буровой)</para>

       <para>Ранее она просто выдавала ошибку для аргумента бесконечность.</para>
      </listitem>

      <listitem>
<!--
2016-03-11 [6943a946c] Tsvector editing functions
2016-05-05 [0b9a23443] Rename tsvector delete() to ts_delete(), and filter() to
-->
       <para>Добавление новых функций для значений <type>tsvector</type> (Стас Кельвич)</para>

       <para>Это функции <link linkend="textsearch-functions-table"><function>ts_delete()</function></link>, <function>ts_filter()</function>, <function>unnest()</function>, <function>tsvector_to_array()</function>, <function>array_to_tsvector()</function> и вариация <function>setweight()</function>, устанавливающая вес только для заданных лексем.</para>
      </listitem>

      <listitem>
<!--
2015-09-17 [9acb9007d] Fix oversight in tsearch type check
-->
       <para>Функции <link linkend="textsearch-statistics"><function>ts_stat()</function></link> и <link linkend="textsearch-update-triggers"><function>tsvector_update_trigger()</function></link> теперь принимают значения, имеющие не только конкретный ожидаемый тип аргумента, но и тип, двоично совместимый с ним; например, они могут принимать <type>citext</type> там, где ожидается <type>text</type> (Фёдор Сигаев)</para>
      </listitem>

      <listitem>
<!--
2016-02-04 [6819514fc] Add num_nulls() and num_nonnulls() to count NULL argumen
-->
       <para>Добавление функций <link linkend="functions-comparison-func-table"><function>num_nulls()</function></link> и <function>num_nonnulls()</function> с переменным числом аргументов, возвращающих число переданных им значений NULL и значений, отличных от NULL (Марко Тииккая)</para>

       <para>Например, их можно использовать в ограничении <literal>CHECK(num_nonnulls(a,b,c) = 1)</literal>, которое требует, чтобы ровно одно из значений a,b,c было отлично от <literal>NULL</literal>. Эти функции также могут применяться для подсчёта элементов NULL и элементов, отличных от NULL, в массиве.</para>
      </listitem>

      <listitem>
<!--
2016-03-18 [3187d6de0] Introduce parse_ident()
-->
       <para>Добавление функции <link linkend="functions-string-other"><function>parse_ident()</function></link> для разбиения полного (и возможно заключённого в кавычки) идентификатора <acronym>SQL</acronym> на компоненты (Павел Стехуле)</para>
      </listitem>

      <listitem>
<!--
2015-10-05 [28b3a3d41] to_number():  allow 'V' to divide by 10^(the number of d
-->
       <para>Функция <link linkend="functions-formatting-table"><function>to_number()</function></link> воспринимает код формата <literal>V</literal> как признак деления числа на 10 в степени, заданной цифрами после <literal>V</literal> (Брюс Момджян)</para>

       <para>Таким образом поведение этой функции оказывается обратным к <function>to_char()</function>.</para>
      </listitem>

      <listitem>
<!--
2016-01-05 [ea0d494da] Make the to_reg*() functions accept text not cstring.
-->
       <para>Функции <link linkend="functions-info-catalog-table"><function>to_reg*()</function></link> теперь принимают тип <type>text</type>, а не <type>cstring</type> (Пётр Коробейников)</para>

       <para>Это избавляет от необходимости записывать явное приведение в большинстве случаев, когда аргумент не является простой строковой константой.</para>
      </listitem>

      <listitem>
<!--
2016-02-20 [53874c522] Add pg_size_bytes() to parse human-readable size strings
-->
       <para>Добавление функции <link linkend="functions-admin-dbsize"><function>pg_size_bytes()</function></link> для преобразования понятных человеку объёмов в числа (Павел Стехуле, Виталий Буровой, Дин Рашид)</para>

       <para>Эта функция преобразует строки, в частности, те, что выдаёт <function>pg_size_pretty()</function>, в количество байтов. Использовать её можно, например, так: <literal>SELECT oid::regclass FROM pg_class WHERE pg_total_relation_size(oid) &gt; pg_size_bytes('10 GB')</literal>.</para>
      </listitem>

      <listitem>
<!--
2015-11-06 [8a1fab36a] pg_size_pretty: Format negative values similar to positi
-->
       <para>Формат вывода отрицательных чисел в <link linkend="functions-admin-dbsize"><function>pg_size_pretty()</function></link> не должен отличаться от положительных (Адриан фон ден Дриш)</para>

       <para>Ранее отрицательные числа никогда не сокращались и всегда выводились в байтах.</para>
      </listitem>

      <listitem>
<!--
2015-07-02 [10fb48d66] Add an optional missing_ok argument to SQL function curr
-->
       <para>Добавление необязательного аргумента <replaceable>missing_ok</replaceable> в функцию <link linkend="functions-admin-set-table"><function>current_setting()</function></link> (Дэвид Кристенсен)</para>

       <para>Это позволяет избежать ошибки при передаче неизвестного имени параметра; вместо ошибки будет выдан <literal>NULL</literal>.</para>
      </listitem>

      <listitem>
<!--
2016-07-26 [976b24fb4] Change various deparsing functions to return NULL for in
2016-07-29 [3153b1a52] Eliminate a few more user-visible "cache lookup failed"
2016-08-07 [8a8c6b538] Fix crash when pg_get_viewdef_name_ext() is passed a non
-->
       <para>Модификация ряда функций просмотра каталога, чтобы они возвращали <literal>NULL</literal> при недопустимых входных данных (Мишель Пакье)</para>

       <para>Функция <link linkend="functions-info-catalog-table"><function>pg_get_viewdef()</function></link> теперь возвращает <literal>NULL</literal>, получая неправильный <type>OID</type> представления; также и другие функции будут возвращать <literal>NULL</literal> при некорректных параметрах. Ранее в таких случаях обычно возникали ошибки типа <quote>cache lookup failed</quote> (ошибка поиска в кеше), с которыми не должны сталкиваться пользователи.</para>
      </listitem>

      <listitem>
<!--
2016-08-02 [dd5eb805d] Remove unused arguments from pg_replication_origin_xact_
-->
       <para>Избавление функции <link linkend="pg-replication-origin-xact-reset"><function>pg_replication_origin_xact_reset()</function></link> от аргументов (Фудзии Масао)</para>

       <para>В документации говорится, что у неё нет аргументов, и коду функции на C никакие аргументы не нужны, но в записи в <structname>pg_proc</structname> по ошибке указаны два аргумента.</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Языки программирования на стороне сервера</title>

    <itemizedlist>

      <listitem>
<!--
2015-08-21 [fcdfce682] Detect mismatched CONTINUE and EXIT statements at plpgsq
-->
       <para>Выявление некорректных операторов <command>CONTINUE</command> и <command>EXIT</command> в <link linkend="plpgsql">PL/pgSQL</link> при компиляции функции, а не во время выполнения (Джим Нэсби)</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [5c3c3cd0a] Enhanced custom error in PLPythonu
2016-06-11 [020140d84] PL/Python: Rename new keyword arguments of plpy.error()
2016-07-02 [3a4a33ad4] PL/Python: Report argument parsing errors using exceptio
-->
       <para>Расширение функций, выдающих ошибки и сообщения в <application>PL/Python</application>, чтобы они могли передавать помимо основного сообщения и дополнительные поля (Павел Стехуле)</para>
      </listitem>

      <listitem>
<!--
2016-04-05 [1d2fe56e4] Fix PL/Python for recursion and interleaved set-returnin
-->
       <para>Исправление механизма вызова функций PL/Python, позволяющее производить рекурсивные вызовы этих функций через <application>SPI</application>, и корректировка поведения в ситуации, когда несколько функций на PL/Python, возвращающих множества, вызываются в одном запросе (Алексей Грищенко, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-11-05 [8c75ad436] Fix memory leaks in PL/Python.
-->
       <para>Ликвидация утечек памяти в пределах длительности сеанса в PL/Python (Хейкки Линнакангас, Харибабу Комми, Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2016-03-02 [287822068] Convert PL/Tcl to use Tcl's "object" interfaces.
2016-03-02 [e2609323e] Make PL/Tcl require Tcl 8.4 or later.
-->
       <para>Модернизация <application>PL/Tcl</application>, переход от передачи простых строк к <quote>объектному</quote> <acronym>API</acronym> Tcl (Джим Нэсби, Карл Лехенбауэр)</para>

       <para>Это может значительно увеличить производительность в некоторых случаях. Заметьте, что для <application>PL/Tcl</application> теперь требуется версия Tcl 8.4 или новее.</para>
      </listitem>

      <listitem>
<!--
2016-03-25 [fb8d2a7f5] In PL/Tcl, make database errors return additional info i
2016-03-25 [cd37bb785] Improve PL/Tcl errorCode facility by providing decoded n
-->
       <para>В <application>PL/Tcl</application> при возникновении ошибок базы данных теперь возвращается дополнительная информация в глобальной переменной Tcl <varname>errorCode</varname> (Джим Нэсби, Том Лейн)</para>

       <para>Это реализовано в соответствии с принятым Tcl соглашением о выдаче дополнительных сведений об ошибке.</para>
      </listitem>

      <listitem>
<!--
2016-03-02 [c8c7c93de] Fix PL/Tcl's encoding conversion logic.
-->
       <para>Исправление логики преобразования кодировки в <application>PL/Tcl</application>; строки в кодировке базы данных должны преобразовываться в <literal>UTF-8</literal> (кодировку, ожидаемую в Tcl) и обратно (Том Лейн)</para>

       <para>Ранее строки передавались без преобразования, что приводило к проблемам с символами вне <literal>ASCII</literal>, когда кодировка базы была не <literal>UTF-8</literal>.</para>
      </listitem>

    </itemizedlist>

   </sect3>

   <sect3>
    <title>Клиентские интерфейсы</title>

    <itemizedlist>

      <listitem>
<!--
2016-08-26 [e796d0aba] Add a nonlocalized version of the severity field to clie
-->
       <para>Добавление нелокализуемой версии <link linkend="protocol-error-fields">поля серьёзности</link> в сообщения об ошибках и уведомления (Том Лейн)</para>

       <para>Благодаря этому изменению клиентский код может определить уровень серьёзности ошибки или замечания, не имея дела с локализованными вариантами строки важности.</para>
      </listitem>

      <listitem>
<!--
2015-09-05 [0426f349e] Rearrange the handling of error context reports.
This commit is also listed under psql and PL/pgSQL
-->
       <para>Введение в <application>libpq</application> средства подавления поля <literal>КОНТЕКСТ</literal> в сообщениях об ошибках, либо для всех, либо только для информационных сообщений (Павел Стехуле)</para>

       <para>По умолчанию <link linkend="libpq-pqerrormessage"><function>PQerrorMessage()</function></link> теперь выводит <literal>КОНТЕКСТ</literal> только для ошибок. Для корректировки её поведения предназначена новая функция <link linkend="libpq-pqseterrorcontextvisibility"><function>PQsetErrorContextVisibility()</function></link>.</para>
      </listitem>

      <listitem>
<!--
2016-04-03 [e3161b231] Add libpq support for recreating an error message with d
-->
       <para>Добавление в <application>libpq</application> возможности переформировать сообщение об ошибке с другим уровнем важности (Алексей Шульгин)</para>

       <para>Данную возможность реализует новая функция <link linkend="libpq-pqresultverboseerrormessage"><function>PQresultVerboseErrorMessage()</function></link>. Это поддерживается новой командой <application>psql</application> <literal>\errverbose</literal> и может быть также полезно для других клиентов.</para>
      </listitem>

      <listitem>
<!--
2015-11-27 [40cb21f70] Improve PQhost() to return useful data for default Unix-
-->
       <para>Усовершенствование функции <link linkend="libpq-pqhost"><function>PQhost()</function></link> в <application>libpq</application>, чтобы она возвращала полезную информацию при подключении к сокету Unix по умолчанию (Том Лейн)</para>

       <para>Ранее она возвращала <literal>NULL</literal> в отсутствие явного указания адреса узла; теперь она возвращает путь каталога сокетов по умолчанию.</para>
      </listitem>

      <listitem>
<!--
2016-02-16 [fc1ae7d2e] Change ecpg lexer to accept comments with line breaks in
-->
       <para>Исправление лексического анализатора <application>ecpg</application>, чтобы он корректно обрабатывал разрывы строк в комментариях, начинающихся в строках с директивами препроцессора (Михаэль Мескес)</para>
      </listitem>

    </itemizedlist>

   </sect3>

   <sect3>
    <title>Клиентские приложения</title>

    <itemizedlist>

      <listitem>
<!--
2015-09-14 [d02426029] Check existency of table/schema for -t/-n option (pg_dum
-->
       <para>Добавление флага <option>--strict-names</option> в <link linkend="app-pgdump"><application>pg_dump</application></link> и <link linkend="app-pgrestore"><application>pg_restore</application></link> (Павел Стехуле)</para>

       <para>С этим флагом программа выдаст ошибку, не найдя объектов, заданных параметрами <option>-t</option> или <option>-n</option>, а не просто не будет ничего делать.</para>
      </listitem>

      <listitem>
<!--
2016-04-06 [a9f0e8e5a] In pg_dump, use a bitmap to represent what to include
2016-04-06 [d217b2c36] In pg_dump, split "dump" into "dump" and "dump_contains"
2016-04-06 [23f34fa4b] In pg_dump, include pg_catalog and extension ACLs, if ch
2016-05-06 [5d589993c] pg_dump performance and other fixes
2016-05-06 [e1b120a8c] Only issue LOCK TABLE commands when necessary
-->
       <para>В <application>pg_dump</application> реализована выгрузка локально изменённых назначений прав на системные объекты (Стивен Фрост)</para>

       <para>Хотя суперпользователь всегда мог изменить назначения прав для встроенных или созданных расширениями объектов, после выгрузки/загрузки базы эти изменения терялись. Теперь <application>pg_dump</application> распознаёт такие назначения и выгружает их. (Однако это работает только при выгрузке данных с сервера 9.6 или новее.)</para>
      </listitem>

      <listitem>
<!--
2016-09-08 [31eb14504] Allow pg_dump to dump non-extension members of an extens
-->
       <para>Теперь <application>pg_dump</application> может выгружать объекты, не принадлежащие расширениям, но находящиеся в принадлежащих им схемах (Мартин Маркиз)</para>

       <para>Ранее такие объекты игнорировались, так как ошибочно считались принадлежащими расширению, которому принадлежала их схема.</para>
      </listitem>

      <listitem>
<!--
2016-04-06 [3b3fcc4ee] pg_dump: Add table qualifications to some tags
-->
       <para>В выводе <application>pg_dump</application> добавлено имя таблицы в метки тех объектов, которые являются уникальными только в рамках таблицы (как, например, триггеры) (Питер Эйзентраут)</para>
      </listitem>

    </itemizedlist>

     <sect4>
      <title><xref linkend="app-psql"/></title>

      <itemizedlist>

      <listitem>
<!--
2015-12-08 [d5563d7df] psql: Support multiple -c and -f options, and allow mixi
this commit is also listed in the compatibility section
-->
       <para>Поддержка нескольких параметров командной строки <option>-c</option> и <option>-f</option> (Павел Стехуле, Каталин Якоб)</para>

       <para>Эти операции выполняются в том порядке, в каком передаются параметры, а затем <application>psql</application> завершается.</para>
      </listitem>

      <listitem>
<!--
2016-04-08 [c09b18f21] Support \crosstabview in psql
-->
       <para>Добавление команды <command>\crosstabview</command>, выводящей результаты запроса в виде перекрёстной таблицы (Даниэль Верите)</para>

       <para>В этом виде значения из одного столбца результата запроса располагаются в клетках таблицы, заголовки строк и столбцов которой поступают из других столбцов результата.</para>
      </listitem>

      <listitem>
<!--
2016-04-03 [3cc38ca7d] Add psql \errverbose command to see last server error at
-->
       <para>Добавление команды <literal>\errverbose</literal>, выводящей последнюю ошибку сервера с максимальной детализацией (Александр Шульгин)</para>

       <para>Этим удобно пользоваться при возникновении неожиданной ошибки &mdash; больше не нужно корректировать переменную <varname>VERBOSITY</varname> и повторно воспроизводить проблему, чтобы увидеть поля ошибки, которые не показываются по умолчанию.</para>
      </listitem>

      <listitem>
<!--
2015-07-03 [8eb6407aa] Add psql \ev and \sv commands for editing and showing vi
2016-05-06 [9b66aa006] Fix psql's \ev and \sv commands so that they handle view
-->
       <para>Добавление команд <literal>\ev</literal> и <literal>\sv</literal> для редактирования и просмотра определений представлений (Пётр Коробейников)</para>

       <para>Эти команды соответствуют существующим командам <literal>\ef</literal> и <literal>\sf</literal> для функций.</para>
      </listitem>

      <listitem>
<!--
2016-04-04 [2bbe9112a] Add a \gexec command to psql for evaluation of computed
-->
       <para>Добавление команды <command>\gexec</command>, выполняющей запрос и передающей полученный результат на выполнение как тело нового запроса (Кори Хинкер)</para>
      </listitem>

      <listitem>
<!--
2015-10-05 [2145a7660] psql:  allow \pset C in setting the title, matches \C
-->
       <para>Команда <literal>\pset C <replaceable>строка</replaceable></literal> должна устанавливать заголовок таблицы, как это делает <literal>\C <replaceable>строка</replaceable></literal> (Брюс Момджян)</para>
      </listitem>

      <listitem>
<!--
2016-03-11 [69ab7b9d6] psql: Don't automatically use expanded format when there
-->
       <para>В режиме автоматического расширения (<literal>\pset expanded auto</literal>) не нужно применять широкий формат для запросов результата с всего одним столбцом (Андреас Карлссон, Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2016-03-21 [dea2b5960] Improve header output from psql's \watch command.
2016-06-15 [9901d8ac2] Use strftime("%c") to format timestamps in psql's \watch
-->
       <para>Улучшение заголовков, выводимых командой <command>\watch</command> (Мишель Пакье, Том Лейн)</para>

       <para>Добавление названия, если оно было задано командой <command>\pset title</command>, и сокращение предустановленной части заголовка до <literal><replaceable>время</replaceable> (каждые <replaceable>N</replaceable> с)</literal>. При этом формат времени теперь определяется локалью из окружения <application>psql</application>.</para>
      </listitem>

      <listitem>
<!--
2015-12-20 [d854118c8] Teach psql's tab completion to consider the entire input
-->
       <para>Усовершенствование логики дополнения табуляцией, чтобы в рассмотрение принимался весь введённый запрос, а не только текущая строка (Том Лейн)</para>

       <para>Ранее разбиение команды на несколько строк ломало все правила дополнения табуляцией, которым нужно было видеть слова в предыдущих строках.</para>
      </listitem>

      <listitem>
<!--
2015-08-04 [158e3bc8e] Tab completion for CREATE SEQUENCE.
2015-09-08 [3ae16798f] psql: Generic tab completion support for enum and bool G
2015-09-09 [2f8880704] Improve tab-completion for GRANT and REVOKE.
2015-10-01 [bf4817e4f] Fix incorrect tab-completion for GRANT and REVOKE
2015-10-20 [7c0b49cd0] Tab complete CREATE EXTENSION .. VERSION.
2015-12-25 [8014c44e8] Improve SECURITY LABEL tab completion
2016-01-12 [bc56d5898] psql: Fix CREATE INDEX tab completion
2016-01-12 [b1bfb28b5] psql: Improve CREATE INDEX CONCURRENTLY tab completion
2016-01-16 [4189e3d65] psql: Add completion support for DROP INDEX CONCURRENTLY
2016-01-20 [d0f2f53cd] psql: Add tab completion for COPY with query
2016-01-23 [6ae4c8de0] psql: Improve completion of FDW DDL commands
2016-01-26 [879d71393] Various fixes to REFRESH MATERIALIZED VIEW tab completio
2016-02-01 [89611c4df] Various fixes to "ALTER ... SET/RESET" tab completions
-->
       <para>Многочисленные улучшения механизма завершения табуляцией (Питер Эйзентраут, Вик Фиринг, Кевин Гриттнер, Кётаро Хоригути, Джефф Джейнс, Андреас Карлссон, Фудзии Масао, Томас Мунро, Масахико Савада, Павел Стехуле)</para>
      </listitem>

      <listitem>
<!--
2015-07-07 [275f05c99] Add psql PROMPT variable showing the pid of the connecte
-->
       <para>Добавление в формат приглашения <literal>PROMPT</literal> спецкода <literal>%p</literal> для отображения ID текущего обслуживающего процесса (Жульен Рухо)</para>
      </listitem>

      <listitem>
<!--
2015-09-05 [0426f349e] Rearrange the handling of error context reports.
This commit is also listed under libpq and PL/pgSQL
-->
       <para>Введение средства подавления поля <literal>КОНТЕКСТ</literal> в сообщения об ошибках, либо для всех, либо только для информационных сообщений (Павел Стехуле)</para>

       <para>Теперь по умолчанию <literal>КОНТЕКСТ</literal> выводится только для ошибок. И это можно изменить с помощью специальной переменной <varname>SHOW_CONTEXT</varname>.</para>
      </listitem>

      <listitem>
<!--
2016-07-11 [a670c24c3] Improve output of psql's \df+ command.
-->
       <para>Добавление в вывод <command>\df+</command> прав доступа к функции и характеристик распараллеливания (Мишель Пакье)</para>
      </listitem>

      </itemizedlist>

    </sect4>

    <sect4>
     <title><xref linkend="pgbench"/></title>

     <itemizedlist>

      <listitem>
<!--
2016-03-20 [68ab8e8ba] SQL commands in pgbench scripts are now ended by semicol
-->
       <para>Команды SQL в <application>pgbench</application> теперь завершаются точкой с запятой, а не переводом строки (Кётаро Хоригути, Том Лейн)</para>

       <para>Благодаря этому изменению, команды SQL в скриптах могут располагаться на нескольких строках. Существующие нестандартные скрипты придётся подредактировать и добавить точку с запятой в конце каждой строки, если это не было сделано ранее. (Это не помешает использовать тот же скрипт со старыми версиями <application>pgbench</application>.)</para>
      </listitem>

      <listitem>
<!--
2016-03-01 [7e137f846] Extend pgbench's expression syntax to support a few buil
2016-03-28 [86c43f4e2] pgbench: Support double constants and functions.
2016-05-05 [7a622b273] Rename pgbench min/max to least/greatest, and fix handli
2016-05-06 [951529948] Improve handling of numeric-valued variables in pgbench.
-->
       <para>Поддержка арифметики с плавающей точкой, а также некоторых <link linkend="pgbench-builtin-functions">встроенных функций</link>, в выражениях команд с обратной косой чертой (Фабьен Коэльо)</para>
      </listitem>

      <listitem>
<!--
2016-03-29 [ad9566470] pgbench: Remove \setrandom.
-->
       <para>Замена <command>\setrandom</command> встроенными функциями (Фабьен Коэльо)</para>

       <para>Новые встроенные функции <link linkend="pgbench-functions"><function>random()</function></link>, <function>random_exponential()</function> и <function>random_gaussian()</function> делают то же, что и <command>\setrandom</command>, но проще в использовании, так как их можно задействовать в более сложных выражениях. Так как в результате этого добавления команда <command>\setrandom</command> стала ненужной, она была ликвидирована.</para>
      </listitem>

      <listitem>
<!--
2016-01-27 [8bea3d221] pgbench: improve multi-script support
2016-03-03 [d561f1cae] pgbench: accept unambiguous builtin prefixes for -b
-->
       <para>Возможность многократно запускать и встроенные, а не только нестандартные скрипты (Фабьен Коэльо)</para>

       <para>Для этого введён ключ <option>-b</option>, работающий подобно ключу <option>-f</option> для нестандартных скриптов.</para>
      </listitem>

      <listitem>
<!--
2016-03-19 [7bafffea6] pgbench: Allow changing weights for scripts
2016-09-21 [970300faa] Print test parameters like "foo: 123", and results like
-->
       <para>Возможность изменения вероятностей выбора (весов) скриптов (Фабьен Коэльо)</para>

       <para>Когда указывается несколько скриптов, какой из них будет выполняться, для каждой транзакции <application>pgbench</application> выбирается случайным образом. Ранее выбор каждого было равновероятен, но теперь для разных скриптов можно задать разные вероятности выбора.</para>
      </listitem>

      <listitem>
<!--
2016-02-01 [1d0c3b3f8] pgbench: allow per-script statistics
-->
       <para>Сбор статистики по каждому скрипту при запуске нескольких скриптов (Фабьен Коэльо)</para>

       <para>Это добавляет промежуточный уровень детализации к существующим двум — глобальной статистике и статистике в разрезе команд.</para>
      </listitem>

      <listitem>
<!--
2015-09-16 [1def9063c] pgbench progress with timestamp
-->
       <para>Добавление параметра <option>--progress-timestamp</option> для вывода текущего времени эпохи Unix вместо времени с момента запуска теста (Фабьен Коэльо)</para>
      </listitem>

      <listitem>
<!--
2015-07-03 [ba3deeefb] Lift the limitation that # of clients must be a multiple
-->
       <para>Возможность устанавливать число клиентских соединений (<option>-c</option>), не кратное количеству потоков (<option>-j</option>) (Фабьен Коэльо)</para>
      </listitem>

      <listitem>
<!--
2016-03-09 [accf7616f] pgbench: When -T is used, don't wait for transactions be
-->
       <para>Когда задаётся параметр <option>-T</option>, завершать работу именно по истечении заданного времени (Фабьен Коэльо)</para>

       <para>Ранее, если выбиралась низкая частота транзакций, программа <application>pgbench</application> могла ждать значительно дольше заданного времени.</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

   <sect3>
    <title>Серверные приложения</title>

    <itemizedlist>

      <listitem>
<!--
2015-12-17 [66d947b9d] Adjust behavior of single-user -j mode for better initdb
-->
       <para>Улучшение вывода ошибок в <application>initdb</application> на стадии после начальной инициализации (Том Лейн)</para>

       <para>Ранее при возникновении ошибок в качестве <quote>ошибочного запроса</quote> выдавался весь входной файл; теперь выдаётся только текущий запрос. Чтобы получить желаемое поведение, теперь запросы во входных файлах <application>initdb</application> нужно разделять пустыми строками.</para>
      </listitem>

      <listitem>
<!--
2015-12-17 [c4a8812cf] Use just one standalone-backend session for initdb's pos
2016-08-30 [d9720e437] Fix initdb misbehavior when user mis-enters superuser pa
-->
       <para>Ускорение <application>initdb</application> благодаря использованию только одного серверного сеанса для всех операций после инициализации (Том Лейн)</para>
      </listitem>

      <listitem>
<!--
2015-12-01 [e50cda784] Use pg_rewind when target timeline was switched
-->
       <para>Усовершенствование программы <link linkend="app-pgrewind"><application>pg_rewind</application></link>, чтобы она могла работать при изменении целевой линии времени (Александр Коротков)</para>

       <para>Это позволяет, например, перемотать повышенный резервный сервер к какому-то предыдущему состоянию на линии времени прежнего главного сервера.</para>
      </listitem>

    </itemizedlist>

   </sect3>

   <sect3>
    <title>Исходный код</title>

     <itemizedlist>

      <listitem>
<!--
2015-07-02 [726117243] Remove obsolete heap_formtuple/modifytuple/deformtuple f
-->
       <para>Удаление устаревших функций <function>heap_formtuple</function>/<function>heap_modifytuple</function>/<function>heap_deformtuple</function> (Питер Геохеган)</para>
      </listitem>

      <listitem>
<!--
2016-08-27 [b9fe6cbc8] Add macros to make AllocSetContextCreate() calls simpler
-->
       <para>Добавление макросов, призванных сделать вызовы <function>AllocSetContextCreate()</function> проще и безопаснее (Том Лейн)</para>

       <para>Теперь указание индивидуальных параметров размера для контекста памяти считается устаревшим в пользу использования одного из новых макросов <symbol>ALLOCSET_DEFAULT_SIZES</symbol>, <symbol>ALLOCSET_SMALL_SIZES</symbol> или <symbol>ALLOCSET_START_SMALL_SIZES</symbol>. Однако существующий код будет работать по-прежнему.</para>
      </listitem>

      <listitem>
<!--
2015-08-05 [de6fd1c89] Rely on inline functions even if that causes warnings in
-->
       <para>Безусловное использование функций <literal>static inline</literal> в заголовочных файлах (Андрес Фройнд)</para>

       <para>Это может привести к предупреждениям или генерации лишнего кода с очень старыми компиляторами, но упрощение записи стоит того.</para>
      </listitem>

      <listitem>
<!--
2015-07-29 [13d856e17] Make TAP tests work on Windows.
2015-12-02 [1caef31d9] Refactor Perl test code
2015-12-07 [9821492ee] Cleanup some problems in new Perl test code
2016-03-03 [2c83f435a] Rework PostgresNode's psql method
2016-02-26 [49148645f] Add a test framework for recovery
2016-02-26 [74d58425c] Apply last revision of recovery patch
2016-05-06 [6bd356c33] Add TAP tests for pg_dump
-->
       <para>Усовершенствование инфраструктуры тестирования <application>TAP</application> (Мишель Пакье, Крейг Рингер, Альваро Эррера, Стивен Фрост)</para>

       <para>А именно, теперь эта инфраструктура позволяет тестировать сценарии восстановления.</para>
      </listitem>

      <listitem>
<!--
2015-09-11 [aa65de042] When trace_lwlocks is used, identify individual lwlocks
-->
       <para>Когда используется <varname>trace_lwlocks</varname>, идентифицировать отдельные блокировки по имени (Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2015-12-19 [d37b816dc] Adopt a more compact, less error-prone notation for tab
2016-01-04 [9b181b036] In psql's tab completion, change most TailMatches patter
2016-01-05 [4f18010af] Convert psql's tab completion for backslash commands to
-->
       <para>Улучшение инфраструктуры <application>psql</application>, обеспечивающей дополнение кода табуляцией (Томас Мунро, Мишель Пакье)</para>

       <para>Правила дополнения табуляцией стали компактнее и писать их стало легче.</para>
      </listitem>

      <listitem>
<!--
2016-01-05 [efa318bcf] Make pg_shseclabel available in early backend startup
-->
       <para>Закрепление системного каталога <structname>pg_shseclabel</structname> в кеше, чтобы он был доступен при проверке подлинности в момент подключения (Адам Брайтвелл)</para>

       <para>Код ядра не использует этот каталог для аутентификации, но к нему могут обращаться расширения.</para>
      </listitem>

      <listitem>
<!--
2016-01-17 [65c5fcd35] Restructure index access method API to hide most of it a
2016-01-21 [be44ed27b] Improve index AMs' opclass validation procedures.
2016-08-13 [ed0097e4f] Add SQL-accessible functions for inspecting index AM pro
-->
       <para>Реструктуризация <link linkend="indexam"><acronym>API</acronym> методов доступа индексов</link> с целью в большей степени скрыть его на уровне <application>C</application> (Александр Коротков, Эндрю Гирт)</para>

       <para>В результате этого изменения <acronym>API</acronym> индексных методов становится больше похожим на API, принятый для обёрток сторонних данных и генераторов выборки из таблицы. Это упрощает код <application>C</application> и должно сделать более приемлемой реализацию методов доступа индексов в устанавливаемых расширениях. Данное изменение позволило удалить из системного каталога <structname>pg_am</structname> многие столбцы. Чтобы SQL-запросы могли анализировать свойства МД индексов, которые раньше были доступны в <structname>pg_am</structname>, были добавлены новые <link linkend="functions-info-catalog-table">функции проверки свойств</link>.</para>
      </listitem>

      <listitem>
<!--
2016-04-06 [6c268df12] Add new catalog called pg_init_privs
-->
       <para>Добавление системного каталога <link linkend="catalog-pg-init-privs"><structname>pg_init_privs</structname></link> для записи изначальных прав, назначаемых для объектов, которые создаёт <application>initdb</application> и расширения (Стивен Фрост)</para>

       <para>Благодаря этой инфраструктуре <application>pg_dump</application> может выгружать изменённые в данной инсталляции назначения прав на системные объекты. Ранее такие назначения терялись после выгрузки/загрузки, но теперь они сохраняются.</para>
      </listitem>

      <listitem>
<!--
2016-02-04 [c1772ad92] Change the way that LWLocks for extensions are allocated
-->
       <para>Изменение способа запрашивания дополнительных лёгких блокировок расширениями (Амит Капила, Роберт Хаас)</para>

       <para>Функция <function>RequestAddinLWLocks()</function> была удалена, а ей на смену пришла <function>RequestNamedLWLockTranche()</function>. С новым подходом будет проще идентифицировать лёгкие блокировки и сложнее допустить ошибку.</para>
      </listitem>

      <listitem>
<!--
2016-02-11 [38f8bdcac] Modify the isolation tester so that multiple sessions ca
-->
       <para>Усовершенствование тестировщика изоляции, чтобы в состоянии ожидания могли находиться сразу несколько сеансов; это позволяет тестировать сценарии взаимоблокировок (Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2016-02-12 [bcac23de7] Introduce extensible node types.
-->
       <para>Введение расширяемых типов узлов (КайГай Кохэй)</para>

       <para>В результате этого изменения обёртки сторонних данных или провайдеры нестандартного сканирования могут сохранить данные в дереве плана в более удобном формате, чем было возможно ранее.</para>
      </listitem>

      <listitem>
<!--
2015-08-11 [68fa28f77] Postpone extParam/allParam calculations until the very e
2016-01-07 [c44d01383] Delay creation of subplan tlist until after create_plan(
2016-02-18 [19a541143] Add an explicit representation of the output targetlist
2016-03-07 [3fc6e2d7f] Make the upper part of the planner work by generating an
2016-07-01 [5ce5e4a12] Set consider_parallel correctly for upper planner rels.
2016-07-01 [9e703987a] Rethink the GetForeignUpperPaths API (again).
-->
       <para>Планировщик должен рассматривать дальнейшие шаги после сканирования/объединения, генерируя и сравнивая структуры <literal>Path</literal>; это позволяет упростить большой объём несистематической логики (Том Лейн)</para>

       <para>Сегодня это изменение практически никак не проявляется для конечных пользователей, но в будущем оно позволит реализовать множество усовершенствований планировщика, которые не вписывались в старую структуру кода.</para>
      </listitem>

      <listitem>
<!--
2016-01-20 [a7de3dc5c] Support multi-stage aggregation.
2016-06-22 [f8ace5477] Fix type-safety problem with parallel aggregate serial/d
2016-06-26 [19e972d55] Rethink node-level representation of partial-aggregation
-->
       <para>Поддержка частичного агрегирования (Дэвид Роули, Саймон Риггс)</para>

       <para>Это изменение позволяет разделить вычисление агрегатной функции на части, например, чтобы параллельные рабочие процессы могли вычислять её совместно. В будущем это может позволить производить агрегатное вычисление по локальным и удалённым данным частично на удалённой стороне.</para>
      </listitem>

      <listitem>
<!--
2016-03-09 [b6fb6471f] Add a generic command progress reporting facility.
-->
       <para>Внедрение универсального механизма для отслеживания процесса выполнения команд (Винаяк Покале, Рахила Сьед, Амит Ланготе, Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2016-03-18 [27199058d] Convert psql's flex lexer to be re-entrant, and make it
2016-03-19 [0ea9efbe9] Split psql's lexer into two separate .l files for SQL an
2016-03-20 [b6afae71a] Use %option bison-bridge in psql/pgbench lexers.
2016-03-24 [588d963b0] Create src/fe_utils/, and move stuff into there from pg_
2016-03-24 [d65bea26a] Move psql's print.c and mbprint.c into src/fe_utils.
2016-03-24 [c1156411a] Move psql's psqlscan.l into src/fe_utils.
-->
       <para>Выделение из <application>psql</application> лексического анализатора <application>flex</application>, чтобы его можно было использовать в других клиентских программах (Том Лейн, Кётаро Хоригути)</para>

       <para>Это избавляет от необходимости дублировать код для программ, которым нужно достаточно хорошо понимать команды SQL, чтобы распознавать границы команд. Полноценно реализовать это оказывается гораздо сложнее, чем хотелось бы, и на данный момент только <application>psql</application> из всех поддерживаемых клиентских программ делает это на самом деле правильно.</para>

       <para>Для размещения этого и другого кода, который будут совместно использовать наши клиентские программы, был создан новый подкаталог <filename>src/fe_utils/</filename>. Раньше для такого совместного использования приходилось создавать символические ссылки или копировать исходные файлы во время сборки, что было некрасиво и требовало двойной компиляции.</para>
      </listitem>

      <listitem>
<!--
2016-03-21 [98a64d0bd] Introduce WaitEventSet API.
-->
       <para>Внедрение нового <acronym>API</acronym> <literal>WaitEventSet</literal> для эффективного ожидания набора событий, которые обычно не меняются от одного цикла ожидания к другому (Андрес Фройнд, Амит Капила)</para>
      </listitem>

      <listitem>
<!--
2016-04-01 [65578341a] Add Generic WAL interface
-->
       <para>Добавление унифицированного интерфейса для добавления записей в <acronym>WAL</acronym> (Александр Коротков, Петр Желинек, Маркус Нуллмейер)</para>

       <para>Благодаря этому изменению, расширения могут записывать в <acronym>WAL</acronym> изменения страниц со стандартной структурой. При этом проблема воспроизведения <acronym>WAL</acronym> без доступа к этому расширению решается универсальным кодом воспроизведения. Это позволяет расширениям реализовывать, например, свои методы доступа индексов и рассчитывать на то, что <acronym>WAL</acronym> будет поддерживать их.</para>
      </listitem>

      <listitem>
<!--
2016-04-06 [3fe3511d0] Generic Messages for Logical Decoding
-->
       <para>Поддержка произвольных сообщений <acronym>WAL</acronym> при логическом декодировании (Петр Желинек, Андрес Фройнд)</para>

       <para>Этот механизм позволяет расширениям вставлять в поток <acronym>WAL</acronym> произвольные данные, которые могут быть прочитаны модулями логического декодирования, но не связаны с физическим восстановлением данных.</para>
      </listitem>

      <listitem>
<!--
2016-03-30 [ccd6eb49a] Introduce traversalValue for SP-GiST scan
2016-03-30 [87545f541] Use traversalValue in SP-GiST range opclass.
-->
       <para>Реализация возможности для классов операторов SP-GiST сохранять произвольное <quote>переходящее значение</quote> при проходе по индексу (Александр Лебедев, Фёдор Сигаев)</para>

       <para>Это может быть нечто вроде <quote>восстановленного значения</quote>, но могут быть и произвольные данные, не обязательно того же типа, что индексируемый столбец.</para>
      </listitem>

      <listitem>
<!--
2016-04-04 [66229ac00] Introduce a LOG_SERVER_ONLY ereport level, which is neve
-->
       <para>Введение уровня сообщений <literal>LOG_SERVER_ONLY</literal> для <function>ereport()</function> (Дэвид Стил)</para>

       <para>Этот уровень обрабатывается как <literal>LOG</literal>, за исключением того, что такое сообщение никогда не передаётся клиенту. Он предназначен для организации аудита и подобных приложений.</para>
      </listitem>

      <listitem>
<!--
2016-07-01 [548af97fc] Provide and use a makefile target to build all generated
-->
       <para>Реализация в <filename>Makefile</filename> цели для сборки всех генерируемых заголовочных файлов (Мишель Пакье, Том Лейн)</para>

       <para>Теперь, чтобы убедиться, что все генерируемые серверные заголовочные файлы актуальны, можно выполнить сборку цели <literal>submake-generated-headers</literal>. Это полезно в подкаталогах, которые могут собираться <quote>отдельно</quote>.</para>
      </listitem>

      <listitem>
<!--
2016-09-15 [fcd93e4af] Support OpenSSL 1.1.0.
2016-09-15 [9895818d5] Fix building with LibreSSL.
-->
       <para>Поддержка OpenSSL 1.1.0 (Андреас Карлссон, Хейкки Линнакангас)</para>
      </listitem>

     </itemizedlist>

   </sect3>

   <sect3>
    <title>Дополнительные модули</title>

    <itemizedlist>

      <listitem>
<!--
2016-03-11 [92f03fe76] Allow setting sample ratio for auto_explain
2016-03-13 [7a8d87483] Rename auto_explain.sample_ratio to sample_rate
-->
       <para>Добавление параметра конфигурации <literal>auto_explain.sample_rate</literal>, устанавливающего для <link linkend="auto-explain"><filename>contrib/auto_explain</filename></link> процент запросов, подлежащих анализу (Крейг Рингер, Жульен Рухо)</para>

       <para>Это позволяет снизить издержки при большой нагрузке и при этом всё же получать полезную общую информацию.</para>
      </listitem>

      <listitem>
<!--
2016-04-01 [9ee014fc8] Bloom index contrib module
-->
       <para>Добавление модуля <link linkend="bloom"><filename>contrib/bloom</filename></link>, реализующего метод доступа индекса на основе фильтра Блума (Фёдор Сигаев, Александр Коротков)</para>

       <para>Это в первую очередь пилотная реализация метода доступа вне ядра, но этот модуль может иметь и практическую пользу для запросов, производящих поиск по множеству столбцов.</para>
      </listitem>

      <listitem>
<!--
2015-12-18 [33bd250f6] Cube extension kNN support
2015-12-28 [81ee726d8] Code and docs review for cube kNN support.
-->
       <para>В модуле <link linkend="cube"><filename>contrib/cube</filename></link> введены операторы расстояния для кубов и поддержка поиска в стиле kNN в индексах GiST по столбцам типа cube (Стас Кельвич)</para>
      </listitem>

      <listitem>
<!--
2016-02-03 [41d2c081c] Make hstore_to_jsonb_loose match hstore_to_json_loose on
-->
       <para>Согласование представления о числах в функциях <link linkend="hstore-func-table"><function>hstore_to_jsonb_loose()</function></link> и <function>hstore_to_json_loose()</function> расширения <filename>contrib/hstore</filename> (Том Лейн)</para>

       <para>Ранее функция <function>hstore_to_jsonb_loose()</function> преобразовывала похожие на числа строки в числа <acronym>JSON</acronym>, а не в строки, даже когда они в точности не соответствовали правилам записи чисел в <acronym>JSON</acronym>. Это не согласовывалось с поведением <function>hstore_to_json_loose()</function>, так что проверки были усилены для соблюдения синтаксиса <acronym>JSON</acronym>.</para>
      </listitem>

      <listitem>
<!--
2015-07-21 [c6fbe6d6f] Add selectivity estimation functions for intarray operat
-->
       <para>Добавление функций оценки избирательности для операторов модуля <link linkend="intarray"><filename>contrib/intarray</filename></link> с целью улучшения планов запросов, использующих эти операторы (Юрий Журавлёв, Александр Коротков)</para>
      </listitem>

      <listitem>
<!--
2015-11-25 [d6061f83a] Improve pageinspect module
-->
       <para>Доработка функции <function>heap_page_items()</function> в модуле <link linkend="pageinspect"><filename>contrib/pageinspect</filename></link>, чтобы она выводила неструктурированные данные в каждом кортеже, а также добавление функций <function>tuple_data_split()</function> и <function>heap_page_item_attrs()</function> для исследования отдельных полей кортежей (Николай Шаплов)</para>
      </listitem>

      <listitem>
<!--
2016-03-09 [188f359d3] pgcrypto: support changing S2K iteration count
-->
       <para>Добавление необязательного параметра, задающего число итераций <literal>S2K</literal>, в функцию <link linkend="pgcrypto"><filename>contrib/pgcrypto</filename></link> в модуле <function>pgp_sym_encrypt()</function> (Джефф Джейнс)</para>
      </listitem>

      <listitem>
<!--
2016-03-16 [f576b17cd] Add word_similarity to pg_trgm contrib module.
-->
       <para>Добавление возможности оценивать <quote>схожесть слов</quote> в <link linkend="pgtrgm"><filename>contrib/pg_trgm</filename></link> (Александр Коротков, Артур Закиров)</para>

       <para>Добавленные функции и операторы оценивают схожесть между одной строкой и наиболее похожим отдельным словом в другой строке.</para>
      </listitem>

      <listitem>
<!--
2016-03-16 [5871b8848] GUC variable pg_trgm.similarity_threshold insead of set_
2016-06-20 [9c852566a] Fix comparison of similarity to threshold in GIST trigra
-->
       <para>Добавление параметра конфигурации <varname>pg_trgm.similarity_threshold</varname>, устанавливающего порог схожести для <filename>contrib/pg_trgm</filename> (Артур Закиров)</para>

       <para>Этот порог настраивался и раньше, но до этого им управляли специальные функции <function>set_limit()</function> и <function>show_limit()</function>. Теперь они считаются устаревшими.</para>
      </listitem>

      <listitem>
<!--
2015-07-20 [97f301464] This supports the triconsistent function for pg_trgm GIN
-->
       <para>Усовершенствование класса операторов GIN в <filename>contrib/pg_trgm</filename> для ускорения запросов с применением индекса, в которых ищутся и редкие, и частые ключи (Джефф Джейнс)</para>
      </listitem>

      <listitem>
<!--
2015-12-25 [25bfa7efd] Improve the gin index scan performance in pg_trgm.
-->
       <para>Увеличение производительности поиска по схожести в индексах GIN (модуль <filename>contrib/pg_trgm</filename>) (Кристоф Форнароли)</para>
      </listitem>

      <listitem>
<!--
2016-03-08 [ba0a198fb] Add pg_visibility contrib module.
2016-06-17 [71d05a2c7] pg_visibility: Add pg_truncate_visibility_map function.
-->
       <para>Добавление модуля <link linkend="pgvisibility"><filename>contrib/pg_visibility</filename></link>, позволяющего изучать карты видимости таблиц (Роберт Хаас)</para>
      </listitem>

      <listitem>
<!--
2015-09-07 [49124613f] contrib/sslinfo: add ssl_extension_info SRF
-->
       <para>Добавление в <filename>contrib/sslinfo</filename> функции <link linkend="sslinfo"><function>ssl_extension_info()</function></link> для вывода информации о расширениях <acronym>SSL</acronym>, представленных в сертификате <literal>X509</literal>, который используется для текущего соединения (Дмитрий Воронин)</para>
      </listitem>

    </itemizedlist>

    <sect4>
     <title><link linkend="postgres-fdw"><filename>postgres_fdw</filename></link></title>

     <itemizedlist>

      <listitem>
<!--
2015-11-03 [d89494166] Allow postgres_fdw to ship extension funcs/operators for
-->
       <para>Возможность передавать предоставляемые расширением операторы и функции на удалённый сервер, если это расширение указано в белом списке в параметрах стороннего сервера (Пол Рамси)</para>

       <para>Пользователи могут использовать это, когда точно известно, что в удалённой базе установлена совместимая версия заданного расширения. Это позволяет более эффективно выполнять запросы с операторами, поддерживаемыми расширениями.</para>
      </listitem>

      <listitem>
<!--
2015-11-03 [f18c944b6] postgres_fdw: Add ORDER BY to some remote SQL queries.
2015-12-22 [ccd8f9792] postgres_fdw: Consider requesting sorted data so we can
-->
       <para>Возможность выполнения сортировки на удалённом сервере (Ашутош Бапат)</para>
      </listitem>

      <listitem>
<!--
2016-02-09 [e4106b252] postgres_fdw: Push down joins to remote servers.
2016-03-09 [aa09cd242] postgres_fdw: Consider foreign joining and foreign sorti
-->
       <para>Возможность выполнения соединений на удалённом сервере (Шигеру Ханада, Ашутош Бапат)</para>
      </listitem>

      <listitem>
<!--
2016-03-18 [0bf3ae88a] Directly modify foreign tables.
-->
       <para>Если возможно, выполнять <command>UPDATE</command> или <command>DELETE</command> полностью на удалённом сервере (Эцуро Фудзита)</para>

       <para>Ранее для удалённой модификации данных требовалось передавать команду <command>SELECT FOR UPDATE</command>, а затем изменять или удалять отобранные строки по одной. Хотя это по-прежнему необходимо, если эта операция требует локальных действий, теперь она может выполняться и удалённо, если все элементы запроса можно безопасно передать на удалённый сервер.</para>
      </listitem>

      <listitem>
<!--
2016-02-03 [dc203dc3a] postgres_fdw: Allow fetch_size to be set per-table or pe
-->
       <para>Возможность задавать число извлекаемых строк в параметрах сервера или таблицы (Кори Хинкер)</para>

       <para>Ранее <filename>postgres_fdw</filename> всегда читала результаты удалённых запросов по 100 строк; теперь это количество стало настраиваемым.</para>
      </listitem>

      <listitem>
<!--
2016-01-28 [96198d94c] Avoid multiple foreign server connections when all use s
-->
       <para>Для всех локальных пользователей, сопоставленных с одним удалённым пользователем, должно использоваться одно соединение со сторонним сервером (Ашутош Бапат)</para>
      </listitem>

      <listitem>
<!--
2016-04-21 [f039eaac7] Allow queries submitted by postgres_fdw to be canceled.
2016-05-16 [1b812afb0] Fix multiple problems in postgres_fdw query cancellation
-->
       <para>Передача требования отмены запроса на удалённый сервер (Мишель Пакье, Эцуро Фудзита)</para>

       <para>Ранее требование на отмену локального запроса не влекло за собой досрочную отмену удалённого запроса, уже переданного на выполнение.</para>
      </listitem>

     </itemizedlist>

    </sect4>

   </sect3>

  </sect2>

 </sect1>
