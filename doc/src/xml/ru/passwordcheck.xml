<!-- doc/src/xml/passwordcheck.xml -->

<sect1 id="passwordcheck" xreflabel="passwordcheck">
 <title>passwordcheck</title>

 <indexterm zone="passwordcheck"><primary>passwordcheck</primary></indexterm>

 <para>Модуль <filename>passwordcheck</filename> проверяет пароли пользователей, задаваемые командами <xref linkend="sql-createrole"/> и <xref linkend="sql-alterrole"/>. Если пароль признаётся слишком слабым, он не принимается и команда завершается ошибкой.</para>

 <para>Чтобы задействовать этот модуль, добавьте строку <literal>'$libdir/passwordcheck'</literal> в переменную <xref linkend="guc-shared-preload-libraries"/> в <filename>postgresql.conf</filename>, а затем перезапустите сервер.</para>

 <para>Этот модуль можно приспособить к вашим нуждам, изменив исходный код. Например, для проверки паролей вы можете использовать библиотеку <ulink url="http://sourceforge.net/projects/cracklib/">CrackLib</ulink> &mdash; для этого нужно только раскомментировать две строки в <filename>Makefile</filename> и пересобрать модуль. (Мы не можем включить <productname>CrackLib</productname> по умолчанию из-за лицензии.) Без <productname>CrackLib</productname> этот модуль проверяет стойкость пароля по простым правилам, которые вы можете изменить или расширить по своему усмотрению.</para>

 <caution>
  <para>Чтобы незашифрованные пароли не передавались по сети, не записывались в журнал сервера и не стали каким-либо образом известны администратору баз данных, <productname>&productname;</productname> позволяет пользователю передавать предварительно зашифрованные пароли. Используя это, клиентские программы могут шифровать пароль, прежде чем передавать его серверу.</para>
  <para>Это ограничивает полезность модуля <filename>passwordcheck</filename>, так как в этом случае можно только попытаться угадать пароль. Поэтому использовать <filename>passwordcheck</filename> не рекомендуется, когда требуется высокий уровень безопасности. Более безопасно будет применить внешний вариант проверки подлинности, например GSSAPI (см. <xref remap="4" linkend="client-authentication"/>), а не использовать пароли, хранящиеся в базе данных.</para>
  <para>Также можно изменить <filename>passwordcheck</filename>, чтобы предварительно зашифрованные пароли не принимались, но если пользователи будут задавать пароли открытым текстом, с этим связаны свои риски безопасности.</para>
 </caution>

</sect1>
