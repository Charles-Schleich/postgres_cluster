<!-- doc/src/xml/errcodes.xml -->

<appendix id="errcodes-appendix">
 <title>Коды ошибок <productname>&productname;</productname></title>

 <indexterm zone="errcodes-appendix"><primary>коды ошибок</primary> <secondary>список</secondary></indexterm>

 <para>Всем сообщениям, которые выдаёт сервер <productname>&productname;</productname>, назначены пятисимвольные коды ошибок, соответствующие кодам <quote>SQLSTATE</quote>, описанным в стандарте SQL. Приложения, которые должны знать, какое условие ошибки имело место, обычно проверяют код ошибки и только потом обращаются к текстовому сообщению об ошибке. Коды ошибок, скорее всего, не изменятся от выпуска к выпуску <productname>&productname;</productname>, и они не меняются при локализации как сообщения об ошибках. Заметьте, что отдельные, но не все коды ошибок, которые выдаёт <productname>&productname;</productname>, определены стандартом SQL; некоторые дополнительные коды ошибок для условий, не описанных стандартом, были добавлены независимо или позаимствованы из других баз данных.</para>

 <para>Согласно стандарту, первые два символа кода ошибки обозначают класс ошибок, а последние три символа обозначают определённое условие в этом классе. Таким образом, приложение, не знающее значение определённого кода ошибки, всё же может понять, что делать, по классу ошибки.</para>

 <para>В <xref remap="6" linkend="errcodes-table"/> перечислены все коды ошибок, определённые в <productname>&productname;</productname> &version;. (Некоторые коды в настоящее время не используются, хотя они определены в стандарте SQL.) Также показаны классы ошибок. Для каждого класса ошибок имеется <quote>стандартный</quote> код ошибки с последними тремя символами <literal>000</literal>. Этот код выдаётся только для таких условий ошибок, которые относятся к некоторому классу, но не имеют более определённого кода.</para>

 <para>Символ, указанный в столбце <quote>Имя условия</quote>, определяет условие в <application>PL/pgSQL</application>. Имена условий могут записываться в верхнем или нижнем регистре. (Заметьте, что <application>PL/pgSQL</application>, в отличие от ошибок, не распознаёт предупреждения; то есть классы 00, 01 и 02.)</para>

 <para>Для некоторых типов ошибок сервер сообщает имя объекта базы данных (таблица, столбец таблицы, тип данных или ограничение), связанного с ошибкой; например, имя уникального ограничения, вызвавшего ошибку <symbol>unique_violation</symbol>. Такие имена передаются в отдельных полях сообщения об ошибке, чтобы приложениям не пришлось извлекать его из возможно локализованного текста ошибки для человека. На момент выхода <productname>PostgreSQL</productname> 9.3 полностью охватывались только ошибки класса SQLSTATE 23 (нарушения ограничений целостности), но в будущем должны быть охвачены и другие классы.</para>


<table id="errcodes-table">
 <title>Коды ошибок <productname>&productname;</productname></title>

 <tgroup cols="2">
  <colspec colnum="1" colname="errorcode"/>
  <colspec colnum="2" colname="condname"/>
  <spanspec namest="errorcode" nameend="condname" spanname="span12"/>

  <thead>
   <row>
    <entry>Код ошибки</entry>
    <entry>Имя условия</entry>
   </row>
  </thead>

  <tbody>

    &errcodes-table;

  </tbody>
 </tgroup>
</table>


</appendix>
