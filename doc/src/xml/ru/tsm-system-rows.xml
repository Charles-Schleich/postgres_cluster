<!-- doc/src/xml/tsm-system-rows.xml -->

<sect1 id="tsm-system-rows" xreflabel="tsm_system_rows">
 <title>tsm_system_rows</title>

 <indexterm zone="tsm-system-rows"><primary>tsm_system_rows</primary></indexterm>

 <para>Модуль <filename>tsm_system_rows</filename> предоставляет метод извлечения выборки <literal>SYSTEM_ROWS</literal>, который можно использовать в предложении <literal>TABLESAMPLE</literal> команды <xref linkend="sql-select"/>.</para>

 <para>Этот метод извлечения выборки принимает один целочисленный аргумент, задающий максимальное число выбираемых строк. Результирующая выборка будет содержать в точности столько строк, если только в таблице не оказывается меньше заданного числа строк (в этом случае выдаётся вся таблица).</para>

 <para>Как и встроенный метод извлечения выборки <literal>SYSTEM</literal>, <literal>SYSTEM_ROWS</literal> производит выборку на уровне блоков, так что выборка будет не полностью случайной, а может подвергаться эффектам кластеризации, особенно когда запрашивается небольшое число строк.</para>

 <para><literal>SYSTEM_ROWS</literal> не поддерживает предложение <literal>REPEATABLE</literal>.</para>

 <sect2>
  <title>Примеры</title>

  <para>Пример получения выборки из таблицы с применением метода <literal>SYSTEM_ROWS</literal>. Сначала нужно установить расширение:</para>

<programlisting>CREATE EXTENSION tsm_system_rows;</programlisting>

  <para>Затем вы можете использовать его в команде <command>SELECT</command>, например так: <programlisting>SELECT * FROM my_table TABLESAMPLE SYSTEM_ROWS(100);</programlisting></para>

  <para>Эта команда выдаст выборку из 100 строк из таблицы <structname>my_table</structname> (а если в таблице не окажется 100 видимых строк, будут возвращены все строки).</para>
 </sect2>

</sect1>
