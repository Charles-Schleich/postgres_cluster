<!-- doc/src/xml/chkpass.xml -->

<sect1 id="chkpass" xreflabel="chkpass">
 <title>chkpass</title>

 <indexterm zone="chkpass"><primary>chkpass</primary></indexterm>

 <para>Этот модуль реализует тип данных <type>chkpass</type>, предназначенный для хранения зашифрованных паролей. Каждый пароль автоматически преобразуется в зашифрованный вид при вводе и всегда хранится зашифрованным. Для проверки пароля его нужно сравнить с паролем в открытом виде, который будет также зашифрован перед сравнением.</para>

 <para>В коде предусмотрена возможность выдавать ошибку, если вводимый пароль оказывается слишком простым. Однако в настоящее время это просто заглушка, которая ничего не делает.</para>

 <para>Если вводимая строка начинается с двоеточия, предполагается, что это уже зашифрованный пароль и он сохраняется без дополнительного шифрования. Это позволяет сохранять ранее зашифрованные пароли.</para>

 <para>Выводимая строка этого типа предваряется двоеточием. Это позволяет выгружать и заново загружать пароли, не расшифровывая их. Если вы хотите получить строку зашифрованного пароля без двоеточия, можно использовать функцию <function>raw()</function>. Благодаря этому, данный тип можно применять, например, с модулем <literal>Auth_PostgreSQL</literal> для Apache.</para>

 <para>Для шифрования используется стандартная функция Unix <function>crypt()</function>, так что на данную реализацию распространяются все обычные ограничения этой функции; в частности, учитываются только первые восемь символов пароля.</para>

 <para>Заметьте, что тип данных <type>chkpass</type> не является индексируемым.</para>

 <para>Пример использования:</para>

<programlisting>test=# create table test (p chkpass);
CREATE TABLE
test=# insert into test values ('hello');
INSERT 0 1
test=# select * from test;
       p
----------------
 :dVGkpXdOrE3ko
(1 row)

test=# select raw(p) from test;
      raw
---------------
 dVGkpXdOrE3ko
(1 row)

test=# select p = 'hello' from test;
 ?column?
----------
 t
(1 row)

test=# select p = 'goodbye' from test;
 ?column?
----------
 f
(1 row)</programlisting>

 <sect2>
  <title>Автор</title>

  <para>Д'Арси Дж. М. Каин (<email>darcy@druid.net</email>)</para>
 </sect2>

</sect1>
